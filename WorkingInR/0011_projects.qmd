# RStudio projects {#sec-working-project}

```{r setup, include=FALSE}

source("R/setup.R")
```

::: callout-note
## In this chapter, you will

- learn why you should use RStudio projects for your analyses
- set up an RStudio project
- learn how to organise your files within an RStudio project
:::

RStudio allows you to divide your work into projects which are independent from each other.
A project has its on working directory in which you can create specific scripts, load data sets, add external files, activate packages, etc.
For each project, you will thus be guaranteed to work in a dedicated workspace.

Working with projects is a great way to keep things tidy.
You do not risk to mix up files or variables with relatively similar names when writing your code, especially if you are not so creative when it comes to naming objects.
You will also find it easy to share your work with others since everything they need (and nothing less or more) is in a project.

For example, if you plan to work with assignments in different courses in addition to the data analyses for your master's thesis, we strongly recommend to set up a RStudio project for each course, and another for your thesis.

To create a project, go to the main menu and select File \> New Project... as shown in @fig-new-project:

```{r}
#| label: fig-new-project
#| echo: false
#| fig-cap: "Creating a new project -- step 1"
#| fig-alt: Screenshot of the start of the RStudio new project wizard
#| out-width: "100%"
knitr::include_graphics("figures/RStudio-newproject.png")
```

Click again on New Directory \> New Project, choose a project name and a destination on your disk, eand click the button "Create Project" as shown in @fig-new-project2:

```{r}
#| label: fig-new-project2
#| echo: false
#| fig-cap: "Creating a new project -- step 2"
#| fig-alt: Screenshot of the last stage of creating a new project in RStudio
#| out-width: "100%"
knitr::include_graphics("figures/RStudio-createproject.png")
```

Feel free to import in the project folder all the files that you will need later on, such as original data sets, etc.

## Exercise {.unnumbered .facta .toc-ignore}

Create a project for BIO300B.
Call it BIO300B and save it to a convenient location.

## Working with a script {#sec-working-script}

### What is a script?

Practically, a script is a plain text file where you write your code, whether it contains a handful of lines or dozens of them.
It is an evolving document which not only helps you keep track of your code, but also your workflow.

With time, you will realize that a script is a lot of things at the same time:

-   it is a whiteboard where you try coding for something and correct mistakes whenever you find out things do not work as expected,
-   it contains your coding history, where all the steps from loading a data set to printing the final output are chronologically exposed,
-   it is the key file that you may share with collaborators, etc,
-   it is guarantee that your work is reproducible, meaning that you can run your code on your data set again and again, and obtain the same result, consistently.

A simple script may look like this:

```{r commented-script, echo=TRUE, eval=FALSE}
# activate tidyverse
library(tidyverse)

# load the data from external file
Veronica_Vestland <- read_delim("Veronica_Vestland.csv", delim = ",")

# calculate the mean and standard deviation of Sepal.Length for each Location
mean_sd_SL <- Veronica_Vestland |>
           group_by(location) |>
           summarise(mean(Sepal.Length), sd(Sepal.Length))

# print the result
mean_sd_SL

# draw boxplot Sepal.Length for each Location
ggplot(Veronica_Vestland,
       aes(x = Location, y  = Sepal.Length, fill = Location)) +
  geom_boxplot()
```

You will be able to write similar code to this very soon.

### Running the code

Writing code in a script does not do anything *per se*.
To tell R to do something, you must either:

-   place the cursor on a single line of code and press the `Run` button above the script or type <kbd>CTRL</kbd> + <kbd>Enter</kbd> (<kbd>⌘</kbd> + <kbd>Enter</kbd>) to run that *single line of code*, or
-   select several lines of code and press <kbd>CTRL</kbd> + <kbd>Enter</kbd> (<kbd>⌘</kbd> + <kbd>Enter</kbd>) to run *ALL* the selected lines at once, or
-   press <kbd>CTRL</kbd> + <kbd>ALT</kbd> + <kbd>Enter</kbd> (<kbd>⌘</kbd> + <kbd>⌥</kbd> + <kbd>Enter</kbd>) to run the whole script.

The result of your command(s) will appear in the tab `Console` if the commands are intended to print something, and/or in the tab `Plots` if the commands generate a plot.

### Code versus comment

In the script above, there are two types of lines: those that start with the symbol `#`, and those that do not.

Let's start with the lines that do not start with a `#`.
They are the *real* code, the commands that manipulate the data.
Right now these lines do not mean much to you, but in fact, each of them commands R to "do something specific" with your data.
That "something specific" is defined by *functions* which are followed by parentheses -- `function()`.
In the R language, functions are verbs in your sentences, the data are their subject.
For example, in the code above, `library(tidyverse)` commands R to *activate* the package tidyverse found in the package library.

The lines that start with a `#` are *comments*.
They do not code for anything at all.
When you run the script via a console, R simply ignores them.
So use comments to keep track of what you do with the code.
Write what the point of each *real* code line is, what you plan to do.
That way, you will always remember what you originally intended to code for, in case you lose track.

The symbol `#` is also convenient to prevent R from running a specific code line or chunk, without having to delete that line.
Indeed if you place a `#` in front of any line, the console will consider it as a comment, and simply skip it.

In the following example, each line was originally written to activate a different package:

```{r commenting-to-deactivate, echo=TRUE, eval=FALSE}
library(ggplot2)
library(tidyr)
#library(tidyverse)
library(readr)
```

However, the third line has been *commented* with a `#`.
Consequently, only the packages `ggplot2`, `tidyr`, and `vroom` are activated; `tidyverse` will be ignored.

In the chapter First Steps in R (@sec-first-steps-in-r), you will learn to write in the R language.
We strongly advise you to work in scripts, and make extensive use of comments from the start.
This is considered good coding practice, and will save you quite some time and energy.
