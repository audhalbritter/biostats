[{"path":"index.html","id":"introduction","chapter":"1 Introduction","heading":"1 Introduction","text":"R markdown lets write reproducible documents interwoven code text.\nbook written R markdown.","code":""},{"path":"index.html","id":"before-you-start","chapter":"1 Introduction","heading":"Before you start","text":"Chapters 1 - 4 tutorial introduce R markdown, tool lets combine code text write reproducible documents.Chapters 5 6 show author manuscript, report thesis R markdown.need installedRStudioR","code":""},{"path":"getting-started.html","id":"getting-started","chapter":"2 Getting started","heading":"2 Getting started","text":"","code":""},{"path":"getting-started.html","id":"why-you-should-use-r-markdown","chapter":"2 Getting started","heading":"2.1 Why you should use R markdown","text":"traditional way write paper run analyses R software copy figures, tables etc. word processor.\nfind error code data need repeat process.\nRepeatedly.inefficient error prone.R markdown lets code text one document.\ncode data updated, new versions figures tables automatically generated inserted corrected document.much reproducible process.","code":""},{"path":"getting-started.html","id":"creating-and-knitting-an-r-markdown-file","chapter":"2 Getting started","heading":"2.2 Creating and knitting an R markdown file","text":"R markdown file plain text file.\ncan create new text file, give “.Rmd” extension, start typing.\nbetter use RStudio.Go “File” menu bar, “New File,” “R Markdown….”\nfirst time , may asked install extra packages.\nNow pop-window asking Title, author output format (Fig. 2.1).\nFigure 2.1: Choose output format\ncan fill now, edit document later.\nrecommend start “HTML” format doesn’t require anything else installed.\nready, click OK, new R markdown file open.\nlook something like Figure 2.2\nFigure 2.2: default R markdown document.\nlearn elements file section 3.","code":""},{"path":"getting-started.html","id":"knitting-the-r-markdown-file","chapter":"2 Getting started","heading":"2.3 Knitting the R markdown file","text":"can see rendered R markdown document knitting .\nClick blue “Knit” button document.\nFigure 2.3: knit button\nfirst time knit document, need save .","code":""},{"path":"elements-of-an-r-markdown-file.html","id":"elements-of-an-r-markdown-file","chapter":"3 Elements of an R markdown file","heading":"3 Elements of an R markdown file","text":"","code":""},{"path":"elements-of-an-r-markdown-file.html","id":"yaml","chapter":"3 Elements of an R markdown file","heading":"3.1 YAML","text":"YAML metadata document goes right top file.\ncan set document author title, output format many things.\nYAML format can difficult get right sensitive white space.\ncan use RStudio Addin package ymlthis help write YAML.","code":""},{"path":"elements-of-an-r-markdown-file.html","id":"r-code-in-yaml","chapter":"3 Elements of an R markdown file","heading":"3.1.1 R code in YAML","text":"possible add R code YAML, example show current date.\nR code needs enclosed quote marks back-ticks r code.\ncode contains quotemarks, need different enclosing quotemarks (.e. single vs double quotes).See data-time tutorial codes \"%d %B %Y\".","code":""},{"path":"elements-of-an-r-markdown-file.html","id":"output-formats","chapter":"3 Elements of an R markdown file","heading":"3.1.2 Output formats","text":"R markdown documents can rendered many different output formats, includingpresentations (xaringan::moon_reader ioslides)posters (posterdown)books (bookdown).theses (thesisdown)tutorial focuses documents like reports.choice output format documents.\ncan specified R markdown file created RStudio editing YAML.Producing html file view browser simplest, nothing extra needs installing.\nYAML look something like .Word documents also easy; just change output word_document.\ncan useful supervisor collaborators cope R markdown directly, consider using redoc package lets convert edited word document back R markdown.Rendering R markdown file PDF requires external tools (LaTeX) installed.\ncan done tinytxt package.output format YAML can changed pdf_document.","code":"\n# run this only once\ninstall.packages('tinytex')\ntinytex::install_tinytex()"},{"path":"elements-of-an-r-markdown-file.html","id":"text","chapter":"3 Elements of an R markdown file","heading":"3.2 Text","text":"Type make text!\nRStudio built-spell checker underline words doesn’t recognise red.\nGo “Tools” >> “Global Options…” >> “Spelling” change language.Paragraphs blank line .\ngood practice write one sentence per line.\nextra line breaks removed document knitted.\nwant force line break, put two spaces end line.Formatting generated special characters.\nexample:# Title## Subtitle*italic* _italics_ = italic** bold** __bold__ = boldSuperscript m^2^ = m2Subscript CO~2~ = CO2If don’t like formatting document hand, can use RStudio visual editor clicking grey Å document.complete list given R markdown cheat sheet.","code":""},{"path":"elements-of-an-r-markdown-file.html","id":"code-chunks","chapter":"3 Elements of an R markdown file","heading":"3.3 Code chunks","text":"Code R markdown document contained code chunks.code chunk loads penguin data palmerpenguins package.starts three back-ticks, followed braces.\nInside braces, “r” indicates chunk R language.\nnext word optional chunk name.\ncomma optional chunk arguments.\nnew line body chunk.\nchunk ends three back-ticks line.","code":"```{r import, echo = FALSE}\ndata(penguins, package = \"palmerpenguins)\n```"},{"path":"elements-of-an-r-markdown-file.html","id":"making-a-chunk","chapter":"3 Elements of an R markdown file","heading":"3.3.1 Making a chunk","text":"can type back-ticks braces needed make chunk, easier get RStudio insert chunk.\ncan +C button use keyboard shortcut ctrl+alt+(mac Command+Option+).","code":""},{"path":"elements-of-an-r-markdown-file.html","id":"chunk-language","chapter":"3 Elements of an R markdown file","heading":"3.3.2 Chunk language","text":"just work R chunks, possible run chunks languages RStudio, including Python.","code":""},{"path":"elements-of-an-r-markdown-file.html","id":"chunk-names","chapter":"3 Elements of an R markdown file","heading":"3.3.3 Chunk names","text":"good idea name chunks.\ndon’t, automatically called “unnamed-chunk-n” “n” incrementing number.\ninconvenient debugging (need work chunk “unnamed-chunk-37”) working image files generated document.\nsection 5.2 see use chunk names cross-reference figures tables document.","code":""},{"path":"elements-of-an-r-markdown-file.html","id":"rules-for-naming-chunks","chapter":"3 Elements of an R markdown file","heading":"3.3.3.1 Rules for naming chunks","text":"Chunk names informative can contain letters numbers.\nWords separated hyphens (“-”).ImportantAvoid spaces, underscores, periods chunk names.\ncause sorts strange problems.","code":""},{"path":"elements-of-an-r-markdown-file.html","id":"chunk-options","chapter":"3 Elements of an R markdown file","heading":"3.3.4 Chunk options","text":"lots chunk options, need use frequently.\ndefault.echo (TRUE) Show chunk’s code output.eval (TRUE) Run chunk code.include (TRUE) Include output chunk document.message (TRUE) Include messages R.warning(TRUE) Include warnings R.error (FALSE) TRUE, shows error message.\nFALSE, stops knitting error R code.leave message warning TRUE writing document, can see possible problems, set FALSE knit final version.sometimes find useful set error TRUE can make easier debug errors code.Chunk options figures shown section 4.1.1.Full list http://yihui.name/knitr/options/","code":""},{"path":"elements-of-an-r-markdown-file.html","id":"setting-default-chunk-options","chapter":"3 Elements of an R markdown file","heading":"3.3.5 Setting default chunk options","text":"Default chunk options can set chunks knitr::opts_chunk$set first chunk.\nNew R markdown files created RStudio automatically chunk called “setup.”chunk sets echo = TRUE chunks.\ninclude=FALSE stop output chunk included output.","code":"```{r setup, include=FALSE}\nknitr::opts_chunk$set(echo = TRUE)\n```"},{"path":"elements-of-an-r-markdown-file.html","id":"running-a-chunk","chapter":"3 Elements of an R markdown file","heading":"3.3.6 Running a chunk","text":"Code chunks run document knitted (unless eval = FALSE), also useful run code interactively check works.\ncan clicking green play buttons right chunk (Fig. 3.1) Run button document.\ncode depends previous chunks, grey/green icon run .\nFigure 3.1: green run chunk icon grey/green icon run previous chunks.\n","code":""},{"path":"elements-of-an-r-markdown-file.html","id":"hiding-a-chunk","chapter":"3 Elements of an R markdown file","heading":"3.3.7 Hiding a chunk","text":"chunk lot code, can useful hide make easier navigate document.\ngrey arrow next line numbers .\nSections text can also hidden.","code":""},{"path":"elements-of-an-r-markdown-file.html","id":"environments-and-working-directory","chapter":"3 Elements of an R markdown file","heading":"3.3.8 Environments and working directory","text":"R knits R markdown documents new R session.\nenvironment empty: R markdown document access objects current environment (good thing reproducible analyses).\nmeans data want use document needs imported code document.working directory new R session used knitting R markdown file directory file .\nfile root directory RStudio project, relative paths work way R markdown document console.\nfile sub-directory, use ::() form paths relative project root.","code":""},{"path":"elements-of-an-r-markdown-file.html","id":"inline-code","chapter":"3 Elements of an R markdown file","heading":"3.4 Inline code","text":"addition output chunks code, can insert code directly text.\nInline code enclosed back-ticks starts r.Seven times six 42If want numbers written words, use package english.Seven times six forty-twoIt best keep inline code short keep text readable.\nOne trick necessary calculation previous chunk, name object result needs inline code.\nmany results report, consider storing list following example.Bill length body mass Adelie penguins positively correlated, r = 0.55 (df = 149, p < 0.001).","code":"\ncor_adelie <- cor.test(\n  ~ bill_length_mm + body_mass_g, \n  data = penguins, \n  subset = species == \"Adelie\")\n\nadelie_list <- list(\n  #degrees of freedom\n  df = cor_adelie$parameter,\n  # extract correlation and round\n  est = round(cor_adelie$estimate, 2),\n  #format p.value with an \"=\" is the first character is not \"<\". \n  #See the characters tutorial for more on the stringr package and regular expressions.\n  p_val = str_replace(\n    string = format.pval(cor_adelie$p.value, eps = 0.001),\n    pattern = \"^(?!<)\", \n    replacement = \"= \")\n)"},{"path":"figures-tables-and-equations.html","id":"figures-tables-and-equations","chapter":"4 Figures, tables and equations","heading":"4 Figures, tables and equations","text":"","code":""},{"path":"figures-tables-and-equations.html","id":"figures-made-in-r","chapter":"4 Figures, tables and equations","heading":"4.1 Figures made in R","text":"Plots can included chunk makes figure either base plot ggplot.make plot ggplot, remember print .","code":"```{r histogram,  fig.cap = \"An embedded figure\"}\np <- ggplot(penguins, aes(x = bill_length_mm)) + \n  geom_histogram()\np # remember to print the plot\n```"},{"path":"figures-tables-and-equations.html","id":"figure-chunk-options","chapter":"4 Figures, tables and equations","heading":"4.1.1 Figure chunk options","text":"several useful chunk options figures, including:fig.cap figure caption.fig.height figure height inches (1 inch = 25.4 mm)fig.width figure width inches","code":""},{"path":"figures-tables-and-equations.html","id":"embedding-external-images","chapter":"4 Figures, tables and equations","heading":"4.2 Embedding external images","text":"Photographs figures prepared outside R can included path URL file.![Alt description](image.jpg)much control knitr::include_graphics() lets set caption, adjust size, .Use .width .height chunk options set size figure.","code":"```{r include-figure, out.width = \"100%\", fig.cap = \"An embedded figure\"}\nknitr::include_graphics(\"my_image.png\")\n```"},{"path":"figures-tables-and-equations.html","id":"tables","chapter":"4 Figures, tables and equations","heading":"4.3 Tables","text":"can make tables markdown hand, much easier use R.Simple tables can made function knitr::kable.\nSeveral packages, including kableExtra gt can make beautiful tables.","code":""},{"path":"figures-tables-and-equations.html","id":"kable","chapter":"4 Figures, tables and equations","heading":"4.3.1 kable","text":"\nTable 4.1: top penguins\n","code":"\nknitr::kable(x = slice(penguins, 1:5), #the data for the table\n             caption = \"The top penguins\" # the caption\n)## slice: removed 339 rows (99%), 5 rows remaining"},{"path":"figures-tables-and-equations.html","id":"kableextra","chapter":"4 Figures, tables and equations","heading":"4.3.2 kableExtra","text":"kableExtra extends knitr::kable, letting add extra rows headers, repeating headers table spans multiple pages many features.\nTable 4.2: top penguins\nreading kableExtra.","code":"\nlibrary(kableExtra)\npenguins %>% \n  #rename some columns\n  rename(length_mm = bill_length_mm, depth_mm = bill_depth_mm) %>% \n  #replace \"_\" with spaces\n  rename_with(str_replace_all,  pattern = \"_\", replacement = \" \") %>% \n  #capitalise first letter\n  rename_with(str_to_sentence) %>% \n  #get first five rows\n  slice(1:5) %>% \nkbl(booktabs = TRUE, caption = \"The top penguins\") %>% \n  kable_styling(full_width = TRUE) %>%\n  add_header_above(c(\" \", \" \", \"Bill\" = 2, \"Body\" = 2, \" \", \" \"))"},{"path":"figures-tables-and-equations.html","id":"equations","chapter":"4 Figures, tables and equations","heading":"4.4 Equations","text":"Equations embedded pair dollar symbols.\nRStudio show preview equation type .\nEquations written LaTeX notation.example using inline equation.\\(\\delta^{13}C\\) value …double dollar enclosure gives equation line.\nexample, equation standard deviation uses several different elements.\\[SD = \\sqrt{\\frac{\\sum_{=1}^{n}{(x_i - \\bar{x})^2}}{n-1}}\\]making complex formula, build one element time, often starting middle, rather trying get working .","code":"## Rows: 6 Columns: 3## ── Column specification ─────────────────────────────────────────────────────────────\n## Delimiter: \",\"\n## chr (3): What, How, Output## \n## ℹ Use `spec()` to retrieve the full column specification for this data.\n## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.The $\\delta^{13}C$ value ...$$SD = \\sqrt{\\frac{\\sum_{i=1}^{n}{(x_i - \\bar{x})^2}}{n-1}}$$"},{"path":"towards-a-manuscript.html","id":"towards-a-manuscript","chapter":"5 Towards a manuscript","heading":"5 Towards a manuscript","text":"","code":""},{"path":"towards-a-manuscript.html","id":"citations-and-bibliographies","chapter":"5 Towards a manuscript","heading":"5.1 Citations and bibliographies","text":"R markdown can add citations bibliography document.\nUse bibliography field YAML point bibliography file.bibliography file can one several formats, including bibTeX (*.bib) endnote (*.enl).\nreference manager able export bibTeX file.","code":""},{"path":"towards-a-manuscript.html","id":"bibliography-placement","chapter":"5 Towards a manuscript","heading":"5.1.1 Bibliography placement","text":"default, bibliography placed end document.\ngood idea end R markdown file appropriate header.{-} stops R markdown numbering reference section header.want move bibliography, example need finish appendix, need use bit magic.\nalso need use output format bookdown::html_document2 YAML.","code":""},{"path":"towards-a-manuscript.html","id":"citations","chapter":"5 Towards a manuscript","heading":"5.1.2 Citations","text":"Use citation keys bibliography cite reference text.\ncite reference citation key “Cooper2017” use.output depends csl file.\nUsing default author-date style givesThe citr package [install GitHub] makes RStudio add-adding citations text bibliograpy.","code":"Reproducible code [@Cooper2017] ...\n@Cooper2017 discuss ... "},{"path":"towards-a-manuscript.html","id":"citation-style","chapter":"5 Towards a manuscript","heading":"5.1.3 Citation style","text":"don’t like default citation style, want submit manuscript journal overly pedantic editor, can change citation style specifying csl file YAML.csl (Citation Style Language) file defines citation style.\nmany citation style available http://zotero.org/styles.","code":""},{"path":"towards-a-manuscript.html","id":"citation-problems","chapter":"5 Towards a manuscript","heading":"5.1.4 Citation problems","text":"Unfortunately, can problems bibliography citation.\ncan solved googling error message.\ncommon problems addressed .","code":""},{"path":"towards-a-manuscript.html","id":"incorrect-capitalisation","chapter":"5 Towards a manuscript","heading":"5.1.4.0.1 Incorrect capitalisation","text":"Many CLS styles convert title title case (.e. first letter first word capitalised).\ncan annoying names (people, countries, species) can given wrong case.paper titlePopulation ecology polar bears Svalbard, Norway.may appear asPopulation ecology polar bears svalbard, norway.can fixed editing bibtex file, putting braces around word capitals need kept.Population ecology polar bears {Svalbard}, {Norway}.","code":""},{"path":"towards-a-manuscript.html","id":"accents-and-other-special-characters","chapter":"5 Towards a manuscript","heading":"5.1.4.0.2 Accents and other special characters","text":"tool-chain processes R markdown files can sometimes fall accented characters diacritic marks references.\nerror message look something like thisOne solution edit bibtex file replace accented character escaped code.\nexample, “í” “Martínez” replaced “\\’{}.”","code":"! Package inputenc Error: Unicode character ́ (U+0301)  \n(inputenc)                not set up for use with LaTeX."},{"path":"towards-a-manuscript.html","id":"cross-referencing","chapter":"5 Towards a manuscript","heading":"5.2 Cross-referencing","text":"Cross-referencing lets refer figures tables document.\nset , happens automatically, don’t need re-number figures add delete one.Cross-referencing needs use bookdown package output, declared YAML.","code":""},{"path":"towards-a-manuscript.html","id":"cross-referencing-figures-and-tables","chapter":"5 Towards a manuscript","heading":"5.2.1 Cross-referencing figures and tables","text":"chunk made figure table needs name (underscores!) caption.\nFigure 5.1: Histogram penguin body mass\ncross-reference figure made chunk, need use notation.Penguins cool (Fig. 5.1)refer table made chunk called penguin-results, useNote fig replaced tab reference.get chunk name wrong, warning document knitted, question marks shown reference .Non-existing figure (Fig. ??)","code":"```{r penguin-hist, fig.cap = \"Histogram of penguin body mass\"}\npenguins %>% \n  ggplot(aes(x = body_mass_g, fill = species)) +\n  geom_histogram()\n```Penguins are cool (Fig. \\@ref(fig:penguin-hist))Penguins are cool (Table \\@ref(tab:penguin-results))Figure \\@ref(fig:no-exist)) does not exist"},{"path":"towards-a-manuscript.html","id":"cross-referencing-equations","chapter":"5 Towards a manuscript","heading":"5.2.2 Cross-referencing equations","text":"cross-reference equation, need give label.Note equation must line dollars.\nRStudio try show label preview - ignore .\nNow label can used.\\[\n\\frac{\\sum_{=1}^{n}{x_i}}{n}\n \\tag{5.1}\n\\]mean (equation (5.1)).","code":"$$\n\\frac{\\sum_{i=1}^{n}{x_i}}{n}\n (\\#eq:mean)\n$$The mean (equation \\@ref(eq:mean))."},{"path":"towards-a-manuscript.html","id":"cross-referencing-document-sections","chapter":"5 Towards a manuscript","heading":"5.2.3 Cross-referencing document sections","text":"can also refer sections document using title/subtitle.\nexample, refer section, useCross-referencing (Section 5.2.3)Note reference must written lower case spaces must replaced hyphens.\nPunctuation deleted.","code":"Cross-referencing (Section \\@ref(cross-referencing-document-sections))"},{"path":"towards-a-manuscript.html","id":"journal-specific-formatting","chapter":"5 Towards a manuscript","heading":"5.3 Journal-specific formatting","text":"Use rticles package produce draft manuscript journal-specific format.\nMany journal formats available.","code":"\nlibrary(\"rmarkdown\")\ndraft(\"MyArticle.Rmd\", template = \"plos\", package = \"rticles\")"},{"path":"towards-a-manuscript.html","id":"line-numbers","chapter":"5 Towards a manuscript","heading":"5.4 Line numbers","text":"creating PDF, can include line numbers adding header-includes section YAML.LaTeX packages can added similar way add extra functionality, example, pages landscape.","code":""},{"path":"other-topics.html","id":"other-topics","chapter":"6 Other topics","heading":"6 Other topics","text":"","code":""},{"path":"other-topics.html","id":"child-documents","chapter":"6 Other topics","heading":"6.1 Child documents","text":"document becomes long, might worth moving sections separate R markdown document known child document.\nparent R markdown file knitted, child file included output.\nchild file can also knitted separately.Child documents can included parent document using child option code chunk file’s name path.ImportantThe chunk must empty.Chunk names child R markdown file(s) must unique different names parent file.call knitr::opts_chunk$set child document set chunk option defaults rest document.","code":"```{r child = \"discussion.Rmd\"}\n```"},{"path":"other-topics.html","id":"too-much-or-too-slow-code","chapter":"6 Other topics","heading":"6.2 Too much or too slow code","text":"code runs slowly, output code chunks can cached, next time document rendered existing cached results can used.\ncaching system R markdown can activated setting chunk option cache = TRUE.\ncaching system can tricky set complex projects, targets package much robust framework building reproducible analysis pipelines.\nSee demonstration project example set targets.","code":""},{"path":"other-topics.html","id":"paramertised-reports","chapter":"6 Other topics","heading":"6.3 Paramertised reports","text":"need template many reports, example, showing results specific location time period, consider using\nParamertised reports\nallow pass variable R markdown document knitted.","code":""},{"path":"troubleshooting.html","id":"troubleshooting","chapter":"7 Troubleshooting","heading":"7 Troubleshooting","text":"normal errors working R R markdown.\nProblems can minimised developing document code incrementally knitting repeatedly errors can detected immediately.common problems.","code":""},{"path":"troubleshooting.html","id":"duplicate-chunk-names","chapter":"7 Troubleshooting","heading":"7.1 Duplicate chunk names","text":"Chunk names must unique.\nget error message including followingIdentify offending chunk rename .","code":"  Duplicate chunk label 'import', which has been used for the chunk:"},{"path":"troubleshooting.html","id":"more-errors-to-come","chapter":"7 Troubleshooting","heading":"7.2 More errors to come","text":"Tell find difficult.","code":""},{"path":"troubleshooting.html","id":"further-reading","chapter":"7 Troubleshooting","heading":"Further reading","text":"R markdown cheat sheetR markdown RStudioR Markdown: Definitive Guide","code":""},{"path":"troubleshooting.html","id":"contributors","chapter":"7 Troubleshooting","heading":"Contributors","text":"Richard J. Telford","code":""}]
