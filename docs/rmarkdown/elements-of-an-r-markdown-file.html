<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>3 Elements of an R markdown file | R Markdown</title>
<meta name="author" content="Richard J Telford">
<meta name="description" content="3.1 YAML The YAML is metadata for the document that goes right at the top of the file. The YAML consists of key: values pairs. The colon and space are required. It can set the document author and...">
<meta name="generator" content="bookdown 0.26 with bs4_book()">
<meta property="og:title" content="3 Elements of an R markdown file | R Markdown">
<meta property="og:type" content="book">
<meta property="og:description" content="3.1 YAML The YAML is metadata for the document that goes right at the top of the file. The YAML consists of key: values pairs. The colon and space are required. It can set the document author and...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="3 Elements of an R markdown file | R Markdown">
<meta name="twitter:description" content="3.1 YAML The YAML is metadata for the document that goes right at the top of the file. The YAML consists of key: values pairs. The colon and space are required. It can set the document author and...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="css/style-chapters.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">R Markdown</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Introduction</a></li>
<li class="book-part">First steps in R markdown</li>
<li><a class="" href="getting-started.html"><span class="header-section-number">2</span> Getting started</a></li>
<li><a class="active" href="elements-of-an-r-markdown-file.html"><span class="header-section-number">3</span> Elements of an R markdown file</a></li>
<li><a class="" href="figures-tables-and-equations.html"><span class="header-section-number">4</span> Figures, tables and equations</a></li>
<li class="book-part">Towards a manuscript</li>
<li><a class="" href="citations-and-bibliographies.html"><span class="header-section-number">5</span> Citations and bibliographies</a></li>
<li><a class="" href="cross-referencing.html"><span class="header-section-number">6</span> Cross-referencing</a></li>
<li><a class="" href="formatting-for-a-journal.html"><span class="header-section-number">7</span> Formatting for a journal</a></li>
<li><a class="" href="other-topics.html"><span class="header-section-number">8</span> Other topics</a></li>
<li class="book-part">Presentations</li>
<li><a class="" href="presentations-in-r-markdown.html"><span class="header-section-number">9</span> Presentations in R markdown</a></li>
<li class="book-part">Troubleshooting</li>
<li><a class="" href="troubleshooting.html"><span class="header-section-number">10</span> Troubleshooting</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="elements-of-an-r-markdown-file" class="section level1" number="3">
<h1>
<span class="header-section-number">3</span> Elements of an R markdown file<a class="anchor" aria-label="anchor" href="#elements-of-an-r-markdown-file"><i class="fas fa-link"></i></a>
</h1>
<div id="yaml" class="section level2" number="3.1">
<h2>
<span class="header-section-number">3.1</span> YAML<a class="anchor" aria-label="anchor" href="#yaml"><i class="fas fa-link"></i></a>
</h2>
<p>The YAML is metadata for the document that goes right at the top of the file.
The YAML consists of <code>key: values</code> pairs.
The colon and space are required.
It can set the document author and title, the output format and many other things.
YAML format can be difficult to get right as it is sensitive to white space.
You can use an RStudio Addin from the package <code>ymlthis</code> to help write the YAML.</p>
<div id="r-code-in-yaml" class="section level3" number="3.1.1">
<h3>
<span class="header-section-number">3.1.1</span> R code in YAML<a class="anchor" aria-label="anchor" href="#r-code-in-yaml"><i class="fas fa-link"></i></a>
</h3>
<p>It is possible to add R code to the YAML, for example to show the current date.
The R code needs to be enclosed in quote marks AND back-ticks with an <code>r</code> before the code.
If the code contains quotemarks, then they need to be different from the enclosing quotemarks (i.e. single vs double quotes).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb2-1"><a href="elements-of-an-r-markdown-file.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb2-2"><a href="elements-of-an-r-markdown-file.html#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"My Manuscript"</span></span>
<span id="cb2-3"><a href="elements-of-an-r-markdown-file.html#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span><span class="at"> html_document</span></span>
<span id="cb2-4"><a href="elements-of-an-r-markdown-file.html#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">date</span><span class="kw">:</span><span class="at"> </span><span class="st">'24 August 2022'</span></span>
<span id="cb2-5"><a href="elements-of-an-r-markdown-file.html#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>See the data-time tutorial for more about the codes in <code>"%d %B %Y"</code>.</p>
</div>
<div id="exercise-3" class="section level3 unnumbered facta toc-ignore">
<h3>Exercise<a class="anchor" aria-label="anchor" href="#exercise-3"><i class="fas fa-link"></i></a>
</h3>
<p>Add date and author to the YAML of your svalbard_traits R Markdown document so it shows today’s date and your name when knitted.</p>
</div>
<div id="output-formats" class="section level3" number="3.1.2">
<h3>
<span class="header-section-number">3.1.2</span> Output formats<a class="anchor" aria-label="anchor" href="#output-formats"><i class="fas fa-link"></i></a>
</h3>
<p>R Markdown documents can be rendered in many different output formats, including</p>
<ul>
<li>presentations (with <a href="https://bookdown.org/yihui/rmarkdown/xaringan.html"><code>xaringan::moon_reader</code></a> or <a href="https://bookdown.org/yihui/rmarkdown/ioslides-presentation.html">ioslides</a>)</li>
<li>posters (with <a href="https://cran.r-project.org/web/packages/posterdown/"><code>posterdown</code></a>)</li>
<li>books (with <a href="https://bookdown.org/yihui/bookdown/"><code>bookdown</code></a>).</li>
<li>theses (with <a href="https://github.com/ismayc/thesisdown"><code>thesisdown</code></a>)</li>
</ul>
<p>This tutorial focuses on document-like reports.</p>
<p>There is a choice of output format for documents.
This can be specified when the R markdown file is created in RStudio or by editing the YAML.</p>
<p>Producing an html file to view in a browser is the simplest, as nothing extra needs installing.
The YAML should look something like this.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb3-1"><a href="elements-of-an-r-markdown-file.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb3-2"><a href="elements-of-an-r-markdown-file.html#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"My Manuscript"</span></span>
<span id="cb3-3"><a href="elements-of-an-r-markdown-file.html#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span><span class="at"> html_document</span></span>
<span id="cb3-4"><a href="elements-of-an-r-markdown-file.html#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>Word documents are also easy; just change the output to <code>word_document</code>.
This can be very useful if you have a supervisor or collaborators who cannot cope with R markdown directly, but consider using the <a href="https://noamross.github.io/redoc/index.html"><code>redoc</code></a> package which lets you convert an edited word document back into R markdown.</p>
<p>Rendering the R markdown file as a PDF requires some external tools (LaTeX) to be installed (you don’t need to learn any LaTeX).
This can be done with the <code>tinytxt package</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># run this only once</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'tinytex'</span><span class="op">)</span></span>
<span><span class="fu">tinytex</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tinytex/man/install_tinytex.html">install_tinytex</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Then the output format in the YAML can be changed to <code>pdf_document</code>.
With PDF documents, it can be tricky to control exactly where the figures are positioned, so I recommend working with html as long as possible.</p>
</div>
</div>
<div id="r-markdown-pdf-and-latex" class="section level2 infobox" number="3.2">
<h2>
<span class="header-section-number">3.2</span> R Markdown, PDF and LaTeX<a class="anchor" aria-label="anchor" href="#r-markdown-pdf-and-latex"><i class="fas fa-link"></i></a>
</h2>
<p>R Markdown uses LaTeX to make PDFs.
You don’t need to know any LaTeX, but you can include some if you want to change the formatting etc.
For example, you force a new page, you could use the command.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode latex"><code class="sourceCode latex"><span id="cb5-1"><a href="elements-of-an-r-markdown-file.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\\</span>newpage</span></code></pre></div>
</div>
<div id="coauthoring-with-r-markdown" class="section level2 infobox" number="3.3">
<h2>
<span class="header-section-number">3.3</span> Coauthoring with R Markdown<a class="anchor" aria-label="anchor" href="#coauthoring-with-r-markdown"><i class="fas fa-link"></i></a>
</h2>
<p>Perhaps the best way to collaborate with coauthors on a R Markdown document is to use version control for example with <a href="https://biostats-r.github.io/biostats/github/index.html" title="Git and GitHub book">GitHub</a>.</p>
<p>An alternative is to use the <code>trackdown</code> package to upload markdown files to Google Drive where they can be edited and then downloaded again.</p>
</div>
<div id="comments" class="section level2 infobox" number="3.4">
<h2>
<span class="header-section-number">3.4</span> Comments<a class="anchor" aria-label="anchor" href="#comments"><i class="fas fa-link"></i></a>
</h2>
<p>A comment in an R code block starts with a <code>#</code>, just as in an ordinary R script.</p>
<p>A comment in the text is enclosed an html comment mark</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb6-1"><a href="elements-of-an-r-markdown-file.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- This is a comment  --&gt;</span></span></code></pre></div>
<p>Type <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>C</kbd> to get this comment mark.</p>
<p>In the source editor, you can select text you want to hide and use this keyboard short-cut to comment it out.</p>
</div>
<div id="text" class="section level2" number="3.5">
<h2>
<span class="header-section-number">3.5</span> Text<a class="anchor" aria-label="anchor" href="#text"><i class="fas fa-link"></i></a>
</h2>
<p>Type to make text!
In the RStudio visual editor, which you can access by clicking on “Visual” above the document, you can format the text in much the same way you would work in MS word or Libra Office.
RStudio has a built-in spell checker that will underline words it doesn’t recognise in red.
Go to “Tools” &gt;&gt; “Global Options…” &gt;&gt; “Spelling” to change the language.</p>
<div id="source-editor" class="section level3" number="3.5.1">
<h3>
<span class="header-section-number">3.5.1</span> Source editor<a class="anchor" aria-label="anchor" href="#source-editor"><i class="fas fa-link"></i></a>
</h3>
<p>Sometimes it is useful to be able to write in markdown directly, rather than using the visual editor, for example if you are writing a question for <a href="stackoverflow.com">stackoverflow.com</a> or an issue on <a href="github.com">github.com</a>.
You can see this mode by clicking on “Source” above the document</p>
<p>Paragraphs have a blank line between them.
It is good practice to write one sentence per line.
The extra line breaks will be removed when the document in knitted.
If you want to force a line break, put two spaces at the end of the line.</p>
<p>Formatting is generated with some special characters.
For example:</p>
<style type="text/css">
.heading-output {
  border-bottom: none;
  margin-top: 0;
  margin-bottom: 0;
}
</style>
<div class="inline-table"><table style="width:89%;" class="table table-sm">
<colgroup>
<col width="43%">
<col width="45%">
</colgroup>
<thead><tr class="header">
<th>Markdown Syntax</th>
<th>Output</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><pre><code># Header 1</code></pre></td>
<td><h2 id="header-1" class="unlisted unnumbered heading-output">Header 1</h2></td>
</tr>
<tr class="even">
<td><pre><code>## Header 2</code></pre></td>
<td><h2 id="header-2" class="heading-output">Header 2</h2></td>
</tr>
<tr class="odd">
<td><pre><code>### Header 3</code></pre></td>
<td><h3 id="header-3" class="heading-output">Header 3</h3></td>
</tr>
<tr class="even">
<td>*italics* and **bold**</td>
<td>
<em>italics</em> and <strong>bold</strong>
</td>
</tr>
<tr class="odd">
<td>superscript m^2^</td>
<td>superscript m<sup>2</sup>
</td>
</tr>
<tr class="even">
<td>subscript CO~2~</td>
<td>subscript CO<sub>2</sub>
</td>
</tr>
<tr class="odd">
<td><code>`verbatim code`</code></td>
<td><code>verbatim code</code></td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div id="escaping-characters" class="section level2 infobox" number="3.6">
<h2>
<span class="header-section-number">3.6</span> Escaping characters<a class="anchor" aria-label="anchor" href="#escaping-characters"><i class="fas fa-link"></i></a>
</h2>
<p>If you actually want a *_^~ in the text, you need to escape it by putting a backslash \ before it, e.g. \*.</p>
</div>
<p>A more complete list of formatting is given in the <a href="https://github.com/rstudio/cheatsheets/blob/master/rmarkdown-2.0.pdf">R markdown cheat sheet</a>.</p>
<p>A more complete list is given in the <a href="https://github.com/rstudio/cheatsheets/blob/master/rmarkdown-2.0.pdf">R markdown cheat sheet</a>.</p>
<div id="exercise-4" class="section level3 unnumbered facta toc-ignore">
<h3>Exercise<a class="anchor" aria-label="anchor" href="#exercise-4"><i class="fas fa-link"></i></a>
</h3>
<p>The Results section of the svalbard_traits document should be in Header 1 style, and species names should be in italics.
Fix this and render the document to check the formatting has worked.</p>
</div>
<div id="code-chunks" class="section level2" number="3.7">
<h2>
<span class="header-section-number">3.7</span> Code chunks<a class="anchor" aria-label="anchor" href="#code-chunks"><i class="fas fa-link"></i></a>
</h2>
<p>Code in an R Markdown document is contained in code chunks.</p>
<p>This is a code chunk that loads the penguin data from the <code>palmerpenguins</code> package.</p>
<pre><code>```{r}
data(penguins, package = "palmerpenguins)
```</code></pre>
<p>It starts with three back-ticks, followed by braces.
Inside the braces, the “r” indicates that this is a chunk in the R language.
Next, on a new line, is the body of the chunk.
The chunk ends with three back-ticks on their own line.
In the visual editor, you won’t see the back-ticks, but the code block will start with <code>{r}</code> and have a grey background.</p>
<div id="making-a-chunk" class="section level3" number="3.7.1">
<h3>
<span class="header-section-number">3.7.1</span> Making a chunk<a class="anchor" aria-label="anchor" href="#making-a-chunk"><i class="fas fa-link"></i></a>
</h3>
<p>You can type the back-ticks and braces needed to make a block, but, when using the visual editor, it is easier to get RStudio to insert the block with the insert tool.
Type a forwards slash <kbd>/</kbd> on a blank line and choose “R code chunk”.
You can also use the RStudio keyboard shortcut <kbd>ctrl</kbd>+<kbd>alt</kbd>+<kbd>i</kbd> (on a mac <kbd>Command</kbd>+<kbd>Option</kbd>+<kbd>i</kbd>).</p>
</div>
<div id="chunk-language" class="section level3" number="3.7.2">
<h3>
<span class="header-section-number">3.7.2</span> Chunk language<a class="anchor" aria-label="anchor" href="#chunk-language"><i class="fas fa-link"></i></a>
</h3>
<p>We will just work with R chunks, but it is possible to run chunks in other languages in RStudio, including Python.</p>
</div>
<div id="exercise-5" class="section level3 unnumbered facta toc-ignore">
<h3>Exercise<a class="anchor" aria-label="anchor" href="#exercise-5"><i class="fas fa-link"></i></a>
</h3>
<p>Make a new code block (or blocks) that make a plot showing the effect of the treatment on leaf thickness.</p>
<details><summary><p>Hint</p>
</summary><p>You can copy and modify some of the existing code rather than writing from scratch.</p>
</details>
</div>
<div id="chunk-options" class="section level3" number="3.7.3">
<h3>
<span class="header-section-number">3.7.3</span> Chunk options<a class="anchor" aria-label="anchor" href="#chunk-options"><i class="fas fa-link"></i></a>
</h3>
<p>Code block options control how the blocks work and how any output is treated.
Options are given in special comments at the top of the block (in previous versions of R Markdown they were given after the r in the braces at the start of the chunk).</p>
<pre><code>```{r}
#| echo: false
#| label: penguins-bill-body
#| warning: false
#| fig-cap: "The figure caption"
#| fig-alt: Plot of penguin bill length against body mass by species 

library(ggplot2)
ggplot(penguins, aes(x = body_mass_g, y = bill_length_mm, colour = species)) +
  geom_point()
```</code></pre>
</div>
</div>
<div id="options-format" class="section level2 infobox" number="3.8">
<h2>
<span class="header-section-number">3.8</span> Options format<a class="anchor" aria-label="anchor" href="#options-format"><i class="fas fa-link"></i></a>
</h2>
<p>The white space in the block options is critical.</p>
<ul>
<li><p>If you don’t have the space after the <code>#|</code> then the option becomes a regular comment and is ignored.</p></li>
<li><p>If you don’t have a space after the colon, you get “<span style="color: red">ERROR: Render failed due to invalid YAML</span>.”</p></li>
</ul>
<p><code>true</code> and <code>false</code> can be written in lower case (in R they must be upper case).</p>
</div>
<p>There are lots of chunk options, but only a few that you will need to use frequently.
Here are some and their default.</p>
<ul>
<li>
<code>echo</code> (<code>true</code>) Show the chunk’s code in the output.</li>
<li>
<code>eval</code> (<code>false</code>) Run the chunk code.</li>
<li>
<code>include</code> (<code>true</code>) Include the output of the chunk in the document.</li>
<li>
<code>message</code> (<code>true</code>) Include messages from R.</li>
<li>
<code>warning</code> (<code>true</code>) Include warnings from R.</li>
<li>
<code>error</code> (<code>false</code>) If <code>true</code>, shows any error message.
If <code>false</code>, stops knitting when there is an error in R code.</li>
</ul>
<p>I leave <code>message</code> and <code>warning</code> as <code>true</code> while I am writing the document, so I can see any possible problems, and set them to <code>false</code> when I knit the final version.</p>
<p>I sometimes find it useful to set <code>error</code> to <code>true</code> as can make it easier to debug any errors in the code.</p>
<p>Chunk options for figures are shown in section <a href="figures-tables-and-equations.html#figure-chunk-options">4.1.1</a>.</p>
<p>For more options see <a href="http://yihui.name/knitr/options/" class="uri">http://yihui.name/knitr/options/</a></p>
<div id="exercise-6" class="section level3 unnumbered facta toc-ignore">
<h3>Exercise<a class="anchor" aria-label="anchor" href="#exercise-6"><i class="fas fa-link"></i></a>
</h3>
<p>Importing packages produces lots of output that we don’t need to see in the final report Use block options to hide the output of this block.</p>
<p>The code block making the table is giving a message about the grouping.
Use block options to make this message go away.
Use block options to make this message go away.</p>
</div>
<div id="setting-default-chunk-options" class="section level3" number="3.8.1">
<h3>
<span class="header-section-number">3.8.1</span> Setting default chunk options<a class="anchor" aria-label="anchor" href="#setting-default-chunk-options"><i class="fas fa-link"></i></a>
</h3>
<p>Default chunk options can be set for all chunks with <code>knitr::opts_chunk$set</code> in the first chunk.
New R markdown files created by RStudio automatically have this in a chunk called “setup”.</p>
<pre><code>```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```</code></pre>
<p>This chunk sets <code>echo = TRUE</code> for all chunks.
The <code>include=FALSE</code> will stop any output from this chunk being included in the output.</p>
</div>
<div id="exercise-7" class="section level3 unnumbered facta toc-ignore">
<h3>Exercise<a class="anchor" aria-label="anchor" href="#exercise-7"><i class="fas fa-link"></i></a>
</h3>
<p>Use global block options to stop the code from showing in the report.</p>
</div>
<div id="chunk-labels" class="section level3" number="3.8.2">
<h3>
<span class="header-section-number">3.8.2</span> Chunk labels<a class="anchor" aria-label="anchor" href="#chunk-labels"><i class="fas fa-link"></i></a>
</h3>
<p>It is a good idea to label chunks.
If you don’t, they will automatically be called “unnamed-chunk-n” where “n” is a incrementing number.
This is inconvenient for debugging (you need to work out which chunk is “unnamed-chunk-37”) and for working with any image files generated by the document.
In section <a href="cross-referencing.html#cross-referencing">6</a> you will see how to use chunk names to cross-reference figures and tables in your document.</p>
<p>Chunks can be labelled either by putting the label in the braces at the start of the chunk</p>
<pre><code>```{r load-packages}
library(tidyverse)
```</code></pre>
<p>or with the label chunk option</p>
<pre><code>```{r}
#| label: load-packages
library(tidyverse)
```</code></pre>
<div id="rules-for-naming-chunks" class="section level4" number="3.8.2.1">
<h4>
<span class="header-section-number">3.8.2.1</span> Rules for naming chunks<a class="anchor" aria-label="anchor" href="#rules-for-naming-chunks"><i class="fas fa-link"></i></a>
</h4>
<p>Chunk labels should be informative and can contain letters and numbers.
Words should be separated by hyphens (“-”).</p>
</div>
</div>
<div id="special-characters-in-labels" class="section level2 infobox" number="3.9">
<h2>
<span class="header-section-number">3.9</span> Special characters in labels<a class="anchor" aria-label="anchor" href="#special-characters-in-labels"><i class="fas fa-link"></i></a>
</h2>
<p>Avoid spaces, underscores, periods and other special characters in code block labels.
They will cause all sorts of strange problems.</p>
</div>
<div id="running-a-chunk" class="section level3" number="3.9.1">
<h3>
<span class="header-section-number">3.9.1</span> Running a chunk<a class="anchor" aria-label="anchor" href="#running-a-chunk"><i class="fas fa-link"></i></a>
</h3>
<p>Code in chunks will be run when the document is knitted (unless <code>eval: false</code>), but it is also useful to run the code interactively to check that it works.
You can do this by clicking on the green play buttons at the right of the chunk (Fig. <a href="elements-of-an-r-markdown-file.html#fig:run-pic">3.1</a>) or from the Run button above the document.
If the code depends on previous chunks, the grey/green icon will run them all.</p>
<div class="figure">
<span style="display:block;" id="fig:run-pic"></span>
<img src="Pics/run-chunk.png" alt="The green run chunk icon and the grey/green icon to run all previous chunks." width="220px"><p class="caption">
Figure 3.1: The green run chunk icon and the grey/green icon to run all previous chunks.
</p>
</div>
</div>
<div id="hiding-a-chunk" class="section level3" number="3.9.2">
<h3>
<span class="header-section-number">3.9.2</span> Hiding a chunk<a class="anchor" aria-label="anchor" href="#hiding-a-chunk"><i class="fas fa-link"></i></a>
</h3>
<p>If a chunk has a lot of code, it can be useful to hide it to make it easier to navigate the document.
The grey arrow next to the line numbers will do this.
Sections of text can also be hidden.</p>
</div>
<div id="environments-and-working-directory" class="section level3" number="3.9.3">
<h3>
<span class="header-section-number">3.9.3</span> Environments and working directory<a class="anchor" aria-label="anchor" href="#environments-and-working-directory"><i class="fas fa-link"></i></a>
</h3>
<p>R knits R Markdown documents in a new R session.
Initially, no packages are loaded and the environment is empty: the R markdown document does not have access to any objects in your current environment (this is a good thing for reproducible analyses).
This means that any data or packages you want to use in the document needs to be imported by the code in the document.</p>
<p>The working directory for the new R session used when knitting the R markdown file is the directory where the file is.
If the file is in the root directory of an RStudio project, relative paths will work the same way in the R markdown document as from the console.
If the file is in a sub-directory, use <code><a href="https://here.r-lib.org//reference/here.html">here::here()</a></code> to form paths relative to the project root.</p>
</div>
<div id="inline-code" class="section level2" number="3.10">
<h2>
<span class="header-section-number">3.10</span> Inline code<a class="anchor" aria-label="anchor" href="#inline-code"><i class="fas fa-link"></i></a>
</h2>
<p>In addition to the output from chunks of code, you can insert code directly into text.
This lets you avoid copying and pasting numbers from the output.
Inline code is enclosed by back-ticks and starts with an <code>r</code>.</p>
<pre><code class="language-r"><code>Seven times six is <span style="background-color:#ffff7f">`r 7 * 6`</span></code></code></pre>
<p><span style="background-color: Beige;">Seven times six is 42</span></p>
</div>
<div id="numbers-in-words" class="section level2 infobox" number="3.11">
<h2>
<span class="header-section-number">3.11</span> Numbers in words<a class="anchor" aria-label="anchor" href="#numbers-in-words"><i class="fas fa-link"></i></a>
</h2>
<p>If you want numbers written as words, for example at the start of a sentence, use the package <code>english</code>.</p>
<pre><code class="language-r"><code>Seven times six is <span style="background-color:#ffff7f">`r english::words(7 * 6)`</span></code></code></pre>
<p><span style="background-color: Beige;">Seven times six is forty-two</span></p>
</div>
<p>It is best to keep inline code short to keep the text readable.
One trick is to do all necessary calculations in a previous chunk, so only the name of the object with the result needs to be in the inline code.
If there are many results to report, consider storing them in a list as in the following example.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cor_adelie</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.test.html">cor.test</a></span><span class="op">(</span></span>
<span>  <span class="op">~</span> <span class="va">bill_length_mm</span> <span class="op">+</span> <span class="va">body_mass_g</span>, </span>
<span>  data <span class="op">=</span> <span class="va">penguins</span>, </span>
<span>  subset <span class="op">=</span> <span class="va">species</span> <span class="op">==</span> <span class="st">"Adelie"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">adelie_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>  <span class="co">#degrees of freedom</span></span>
<span>  df <span class="op">=</span> <span class="va">cor_adelie</span><span class="op">$</span><span class="va">parameter</span>,</span>
<span>  <span class="co"># extract correlation and round</span></span>
<span>  est <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">cor_adelie</span><span class="op">$</span><span class="va">estimate</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  <span class="co">#format p.value with an "=" is the first character is not "&lt;". </span></span>
<span>  <span class="co">#See the characters tutorial for more on the stringr package and regular expressions.</span></span>
<span>  p_val <span class="op">=</span> <span class="fu">str_replace</span><span class="op">(</span></span>
<span>    string <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/format.pval.html">format.pval</a></span><span class="op">(</span><span class="va">cor_adelie</span><span class="op">$</span><span class="va">p.value</span>, eps <span class="op">=</span> <span class="fl">0.001</span><span class="op">)</span>,</span>
<span>    pattern <span class="op">=</span> <span class="st">"^(?!&lt;)"</span>, </span>
<span>    replacement <span class="op">=</span> <span class="st">"= "</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code class="language-r"><code>Bill length and body mass in Adelie penguins are positively correlated, <br>r = <span style="background-color:#ffff7f">`r adelie_list$est`</span> (df = <span style="background-color:#ffff7f">`r adelie_list$df`</span>, p <span style="background-color:#ffff7f">`r adelie_list$p_val`</span>).</code></code></pre>
<p><span style="background-color: Beige;">Bill length and body mass in Adelie penguins are positively correlated, r = 0.55 (df = 149, p &lt; 0.001).</span></p>
<div id="exercise-8" class="section level3 unnumbered facta toc-ignore">
<h3>Exercise<a class="anchor" aria-label="anchor" href="#exercise-8"><i class="fas fa-link"></i></a>
</h3>
<p>Use some inline R code to report the maximum height recorded for <em>Bistorta vivipera</em>.</p>
<details><summary><p>Hint</p>
</summary><p><code><a href="https://rdrr.io/r/base/Extremes.html">max()</a></code></p>
</details>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="getting-started.html"><span class="header-section-number">2</span> Getting started</a></div>
<div class="next"><a href="figures-tables-and-equations.html"><span class="header-section-number">4</span> Figures, tables and equations</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
<style>
               img.site-logo {
  height: auto;
  width: 95%;
}
      </style>
<p><a  href="https://biostats.w.uib.no/" aria-label="bioST@TS | When biology adds up, at last&#8230;"><img class="site-logo" src="https://biostats.w.uib.no/files/2020/01/biostats-button-res2.png" alt="BioST@TS homepage" width="250" height="101"  data-no-retina class=" attachment-11864" title = "BioST@TS homepage"/></a>  
<br><a  href="../index.html" aria-label="bioST@TS | When biology adds up, at last&#8230;"><img class="site-logo" src="../figures/icons_all.png" alt= "BioST@TS books" width="250" height="101"  data-no-retina class=" attachment-11864", title = "BioST@TS books"/></a>   </p>
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#elements-of-an-r-markdown-file"><span class="header-section-number">3</span> Elements of an R markdown file</a></li>
<li>
<a class="nav-link" href="#yaml"><span class="header-section-number">3.1</span> YAML</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#r-code-in-yaml"><span class="header-section-number">3.1.1</span> R code in YAML</a></li>
<li><a class="nav-link" href="#exercise-3">Exercise</a></li>
<li><a class="nav-link" href="#output-formats"><span class="header-section-number">3.1.2</span> Output formats</a></li>
</ul>
</li>
<li><a class="nav-link" href="#r-markdown-pdf-and-latex"><span class="header-section-number">3.2</span> R Markdown, PDF and LaTeX</a></li>
<li><a class="nav-link" href="#coauthoring-with-r-markdown"><span class="header-section-number">3.3</span> Coauthoring with R Markdown</a></li>
<li><a class="nav-link" href="#comments"><span class="header-section-number">3.4</span> Comments</a></li>
<li>
<a class="nav-link" href="#text"><span class="header-section-number">3.5</span> Text</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#source-editor"><span class="header-section-number">3.5.1</span> Source editor</a></li></ul>
</li>
<li>
<a class="nav-link" href="#escaping-characters"><span class="header-section-number">3.6</span> Escaping characters</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#exercise-4">Exercise</a></li></ul>
</li>
<li>
<a class="nav-link" href="#code-chunks"><span class="header-section-number">3.7</span> Code chunks</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#making-a-chunk"><span class="header-section-number">3.7.1</span> Making a chunk</a></li>
<li><a class="nav-link" href="#chunk-language"><span class="header-section-number">3.7.2</span> Chunk language</a></li>
<li><a class="nav-link" href="#exercise-5">Exercise</a></li>
<li><a class="nav-link" href="#chunk-options"><span class="header-section-number">3.7.3</span> Chunk options</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#options-format"><span class="header-section-number">3.8</span> Options format</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#exercise-6">Exercise</a></li>
<li><a class="nav-link" href="#setting-default-chunk-options"><span class="header-section-number">3.8.1</span> Setting default chunk options</a></li>
<li><a class="nav-link" href="#exercise-7">Exercise</a></li>
<li><a class="nav-link" href="#chunk-labels"><span class="header-section-number">3.8.2</span> Chunk labels</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#special-characters-in-labels"><span class="header-section-number">3.9</span> Special characters in labels</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#running-a-chunk"><span class="header-section-number">3.9.1</span> Running a chunk</a></li>
<li><a class="nav-link" href="#hiding-a-chunk"><span class="header-section-number">3.9.2</span> Hiding a chunk</a></li>
<li><a class="nav-link" href="#environments-and-working-directory"><span class="header-section-number">3.9.3</span> Environments and working directory</a></li>
</ul>
</li>
<li><a class="nav-link" href="#inline-code"><span class="header-section-number">3.10</span> Inline code</a></li>
<li>
<a class="nav-link" href="#numbers-in-words"><span class="header-section-number">3.11</span> Numbers in words</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#exercise-8">Exercise</a></li></ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>R Markdown</strong>" was written by Richard J Telford. It was last built on 2022-08-24.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
