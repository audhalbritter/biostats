<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>5 Towards a manuscript | R Markdown</title>
<meta name="author" content="Richard J Telford">
<meta name="generator" content="bookdown 0.23 with bs4_book()">
<meta property="og:title" content="5 Towards a manuscript | R Markdown">
<meta property="og:type" content="book">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="5 Towards a manuscript | R Markdown">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.10/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.5.1/tabs.js"></script><script src="libs/bs3compat-0.2.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="css/style-chapters.css">
<meta name="description" content="5.1 Citations and bibliographies R markdown can add citations and a bibliography to a document. Use the bibliography field in the YAML to point to the bibliography file. The bibliography file can...">
<meta property="og:description" content="5.1 Citations and bibliographies R markdown can add citations and a bibliography to a document. Use the bibliography field in the YAML to point to the bibliography file. The bibliography file can...">
<meta name="twitter:description" content="5.1 Citations and bibliographies R markdown can add citations and a bibliography to a document. Use the bibliography field in the YAML to point to the bibliography file. The bibliography file can...">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">R Markdown</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Introduction</a></li>
<li><a class="" href="getting-started.html"><span class="header-section-number">2</span> Getting started</a></li>
<li><a class="" href="elements-of-an-r-markdown-file.html"><span class="header-section-number">3</span> Elements of an R markdown file</a></li>
<li><a class="" href="figures-tables-and-equations.html"><span class="header-section-number">4</span> Figures, tables and equations</a></li>
<li><a class="active" href="towards-a-manuscript.html"><span class="header-section-number">5</span> Towards a manuscript</a></li>
<li><a class="" href="other-topics.html"><span class="header-section-number">6</span> Other topics</a></li>
<li><a class="" href="troubleshooting.html"><span class="header-section-number">7</span> Troubleshooting</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="towards-a-manuscript" class="section level1" number="5">
<h1>
<span class="header-section-number">5</span> Towards a manuscript<a class="anchor" aria-label="anchor" href="#towards-a-manuscript"><i class="fas fa-link"></i></a>
</h1>
<div id="citations-and-bibliographies" class="section level2" number="5.1">
<h2>
<span class="header-section-number">5.1</span> Citations and bibliographies<a class="anchor" aria-label="anchor" href="#citations-and-bibliographies"><i class="fas fa-link"></i></a>
</h2>
<p>R markdown can add citations and a bibliography to a document.
Use the bibliography field in the YAML to point to the bibliography file.</p>
<p>The bibliography file can be in one of several formats, including bibTeX (*.bib) and endnote (*.enl).
Any reference manager should be able to export to a bibTeX file.</p>
<div id="bibliography-placement" class="section level3" number="5.1.1">
<h3>
<span class="header-section-number">5.1.1</span> Bibliography placement<a class="anchor" aria-label="anchor" href="#bibliography-placement"><i class="fas fa-link"></i></a>
</h3>
<p>By default, the bibliography is placed at the end of the document.
It is a good idea to end the R markdown file with an appropriate header.</p>
<p>The <code>{-}</code> stops R markdown from numbering the reference section header.</p>
<p>If you want to move the bibliography, for example because you need to finish with an appendix, you need to use this bit of magic.
You also need to use the output format <code><a href="https://pkgs.rstudio.com/bookdown/reference/html_document2.html">bookdown::html_document2</a></code> in the YAML.</p>
</div>
<div id="citations" class="section level3" number="5.1.2">
<h3>
<span class="header-section-number">5.1.2</span> Citations<a class="anchor" aria-label="anchor" href="#citations"><i class="fas fa-link"></i></a>
</h3>
<p>Use the citation keys from the bibliography to cite the reference in the text.
So to cite the reference with the citation key “Cooper2017” we would use.</p>
<pre><code>Reproducible code [@Cooper2017] ...
@Cooper2017 discuss ... </code></pre>
<p>The output depends on the csl file.
Using the default author-date style gives</p>
<hr>
<span style="background-color: Beige;">
Reproducible code <span class="citation">(Cooper and Hsing 2017)</span> …<br><span class="citation">Cooper and Hsing (2017)</span> discuss …<br></span>
<hr>
<p>The <code>citr</code> package [install from <a href="https://github.com/crsh/citr">GitHub</a>] makes an RStudio add-in for adding citations to the text from the bibliograpy.</p>
</div>
<div id="citation-style" class="section level3" number="5.1.3">
<h3>
<span class="header-section-number">5.1.3</span> Citation style<a class="anchor" aria-label="anchor" href="#citation-style"><i class="fas fa-link"></i></a>
</h3>
<p>If you don’t like the default citation style, or you want to submit a manuscript to a journal with an overly pedantic editor, you can change the citation style by specifying a csl file in the YAML.</p>
<p>The csl (Citation Style Language) file defines the citation style.
There are many citation style available from <a href="http://zotero.org/styles" class="uri">http://zotero.org/styles</a>.</p>
</div>
<div id="citation-problems" class="section level3" number="5.1.4">
<h3>
<span class="header-section-number">5.1.4</span> Citation problems<a class="anchor" aria-label="anchor" href="#citation-problems"><i class="fas fa-link"></i></a>
</h3>
<p>Unfortunately, there can be problems with the bibliography and citation.
Most can be solved by googling the error message.
A few common problems are addressed here.</p>
<div id="incorrect-capitalisation" class="section level5" number="5.1.4.0.1">
<h5>
<span class="header-section-number">5.1.4.0.1</span> Incorrect capitalisation<a class="anchor" aria-label="anchor" href="#incorrect-capitalisation"><i class="fas fa-link"></i></a>
</h5>
<p>Many CLS styles convert the title to title case (i.e. only first letter of the first word is capitalised).
This can be annoying as names (people, countries, species) can be given in the wrong case.</p>
<p>A paper with the title</p>
<p><code>Population ecology of polar bears at Svalbard, Norway.</code></p>
<p>may appear as</p>
<p><code>Population ecology of polar bears at svalbard, norway.</code></p>
<p>This can be fixed by editing the bibtex file, putting braces around the word with capitals that need to be kept.</p>
<p><code>Population ecology of polar bears at {Svalbard}, {Norway}.</code></p>
</div>
<div id="accents-and-other-special-characters" class="section level5" number="5.1.4.0.2">
<h5>
<span class="header-section-number">5.1.4.0.2</span> Accents and other special characters<a class="anchor" aria-label="anchor" href="#accents-and-other-special-characters"><i class="fas fa-link"></i></a>
</h5>
<p>The tool-chain that processes R markdown files can sometimes fall over with accented characters or other diacritic marks in the references.
The error message will look something like this</p>
<pre><code>! Package inputenc Error: Unicode character ́ (U+0301)  
(inputenc)                not set up for use with LaTeX.</code></pre>
<p>One solution is to edit the bibtex file to replace the accented character with an <a href="https://en.wikibooks.org/wiki/LaTeX/Special_Characters#Escaped_codes">escaped code</a>.
For example, the “í” in “Martínez” could be replaced by “\’{i}.”</p>
</div>
</div>
</div>
<div id="cross-referencing" class="section level2" number="5.2">
<h2>
<span class="header-section-number">5.2</span> Cross-referencing<a class="anchor" aria-label="anchor" href="#cross-referencing"><i class="fas fa-link"></i></a>
</h2>
<p>Cross-referencing lets you refer to figures and tables in your document.
Once set up, this happens automatically, so you don’t need to re-number all the figures when you add or delete one.</p>
<p>Cross-referencing needs to use a bookdown package output, declared in the YAML.</p>
<div id="cross-referencing-figures-and-tables" class="section level3" number="5.2.1">
<h3>
<span class="header-section-number">5.2.1</span> Cross-referencing figures and tables<a class="anchor" aria-label="anchor" href="#cross-referencing-figures-and-tables"><i class="fas fa-link"></i></a>
</h3>
<p>The chunk that made the figure or table needs to have a name (no underscores!) and a caption.</p>
<pre><code>```{r penguin-hist, fig.cap = "Histogram of penguin body mass"}
penguins %&gt;% 
  ggplot(aes(x = body_mass_g, fill = species)) +
  geom_histogram()
```</code></pre>
<div class="figure">
<span style="display:block;" id="fig:penguin-hist"></span>
<img src="rmarkdown-bookdown_files/figure-html/penguin-hist-1.png" alt="Histogram of penguin body mass" width="480"><p class="caption">
Figure 5.1: Histogram of penguin body mass
</p>
</div>
<p>To cross-reference the figure made by the above chunk, we need to use this notation.</p>
<pre><code>Penguins are cool (Fig. \@ref(fig:penguin-hist))</code></pre>
<p><span style="background-color: Beige;">Penguins are cool (Fig. <a href="towards-a-manuscript.html#fig:penguin-hist">5.1</a>)</span></p>
<p>To refer to a table made by a chunk called <code>penguin-results</code>, you would use</p>
<pre><code>Penguins are cool (Table \@ref(tab:penguin-results))</code></pre>
<p>Note that the <code>fig</code> has been replaced by <code>tab</code> in the reference.</p>
<p>If you get the chunk name wrong, there will be a warning when the document in knitted, and question marks shown where the reference should be.</p>
<pre><code>Figure \@ref(fig:no-exist)) does not exist</code></pre>
<p><span style="background-color: Beige;">Non-existing figure (Fig. <a href="#fig:no-exist"><strong>??</strong></a>)</span></p>
</div>
<div id="cross-referencing-equations" class="section level3" number="5.2.2">
<h3>
<span class="header-section-number">5.2.2</span> Cross-referencing equations<a class="anchor" aria-label="anchor" href="#cross-referencing-equations"><i class="fas fa-link"></i></a>
</h3>
<p>To cross-reference an equation, we need to give it a label.</p>
<pre><code>$$
\frac{\sum_{i=1}^{n}{x_i}}{n}
 (\#eq:mean)
$$</code></pre>
<p>Note that the equation must be on the line below the dollars.
RStudio will try to show the label in the preview - ignore it.
Now the label can be used.</p>
<pre><code>The mean (equation \@ref(eq:mean)).</code></pre>
<p><span class="math display" id="eq:mean">\[
\frac{\sum_{i=1}^{n}{x_i}}{n}
 \tag{5.1}
\]</span></p>
<p><span style="background-color: Beige;">The mean (equation <a href="towards-a-manuscript.html#eq:mean">(5.1)</a>).</span></p>
</div>
<div id="cross-referencing-document-sections" class="section level3" number="5.2.3">
<h3>
<span class="header-section-number">5.2.3</span> Cross-referencing document sections<a class="anchor" aria-label="anchor" href="#cross-referencing-document-sections"><i class="fas fa-link"></i></a>
</h3>
<p>You can also refer to other sections of the document using the title/subtitle.
For example, to refer to this section, you would use</p>
<pre><code>Cross-referencing (Section \@ref(cross-referencing-document-sections))</code></pre>
<p><span style="background-color: Beige;">Cross-referencing (Section <a href="towards-a-manuscript.html#cross-referencing-document-sections">5.2.3</a>)</span></p>
<p>Note that the reference must be written in lower case and spaces must be replaced by hyphens.
Punctuation is deleted.</p>
</div>
</div>
<div id="journal-specific-formatting" class="section level2" number="5.3">
<h2>
<span class="header-section-number">5.3</span> Journal-specific formatting<a class="anchor" aria-label="anchor" href="#journal-specific-formatting"><i class="fas fa-link"></i></a>
</h2>
<p>Use the <code>rticles</code> package to produce a draft manuscript in a journal-specific format.
Many journal formats are available.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/rstudio/rmarkdown">"rmarkdown"</a></span><span class="op">)</span>
<span class="fu"><a href="https://pkgs.rstudio.com/rmarkdown/reference/draft.html">draft</a></span><span class="op">(</span><span class="st">"MyArticle.Rmd"</span>, template <span class="op">=</span> <span class="st">"plos"</span>, package <span class="op">=</span> <span class="st">"rticles"</span><span class="op">)</span></code></pre></div>
</div>
<div id="line-numbers" class="section level2" number="5.4">
<h2>
<span class="header-section-number">5.4</span> Line numbers<a class="anchor" aria-label="anchor" href="#line-numbers"><i class="fas fa-link"></i></a>
</h2>
<p>If you are creating a PDF, you can include line numbers by adding a header-includes section to the YAML.</p>
<p>Other LaTeX packages can be added in a similar way to add extra functionality, for example, pages in <a href="https://stackoverflow.com/questions/25849814/rstudio-rmarkdown-both-portrait-and-landscape-layout-in-a-single-pdf">landscape</a>.</p>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="figures-tables-and-equations.html"><span class="header-section-number">4</span> Figures, tables and equations</a></div>
<div class="next"><a href="other-topics.html"><span class="header-section-number">6</span> Other topics</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#towards-a-manuscript"><span class="header-section-number">5</span> Towards a manuscript</a></li>
<li>
<a class="nav-link" href="#citations-and-bibliographies"><span class="header-section-number">5.1</span> Citations and bibliographies</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#bibliography-placement"><span class="header-section-number">5.1.1</span> Bibliography placement</a></li>
<li><a class="nav-link" href="#citations"><span class="header-section-number">5.1.2</span> Citations</a></li>
<li><a class="nav-link" href="#citation-style"><span class="header-section-number">5.1.3</span> Citation style</a></li>
<li><a class="nav-link" href="#citation-problems"><span class="header-section-number">5.1.4</span> Citation problems</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#cross-referencing"><span class="header-section-number">5.2</span> Cross-referencing</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#cross-referencing-figures-and-tables"><span class="header-section-number">5.2.1</span> Cross-referencing figures and tables</a></li>
<li><a class="nav-link" href="#cross-referencing-equations"><span class="header-section-number">5.2.2</span> Cross-referencing equations</a></li>
<li><a class="nav-link" href="#cross-referencing-document-sections"><span class="header-section-number">5.2.3</span> Cross-referencing document sections</a></li>
</ul>
</li>
<li><a class="nav-link" href="#journal-specific-formatting"><span class="header-section-number">5.3</span> Journal-specific formatting</a></li>
<li><a class="nav-link" href="#line-numbers"><span class="header-section-number">5.4</span> Line numbers</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>R Markdown</strong>" was written by Richard J Telford. It was last built on 2021-08-30.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
