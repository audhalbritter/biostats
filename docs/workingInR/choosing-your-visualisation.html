<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>11 Choosing your visualisation | Working in R</title>
<meta name="author" content="Jonathan SoulÃ©, Aud Halbritter and Richard J Telford">
<meta name="description" content="The key to deciding what type of plot to make is to determine what type of data you have and what you are trying to show.  11.0.1 Before we start Categorical and continuous variables Familiar with...">
<meta name="generator" content="bookdown 0.23 with bs4_book()">
<meta property="og:title" content="11 Choosing your visualisation | Working in R">
<meta property="og:type" content="book">
<meta property="og:description" content="The key to deciding what type of plot to make is to determine what type of data you have and what you are trying to show.  11.0.1 Before we start Categorical and continuous variables Familiar with...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="11 Choosing your visualisation | Working in R">
<meta name="twitter:description" content="The key to deciding what type of plot to make is to determine what type of data you have and what you are trying to show.  11.0.1 Before we start Categorical and continuous variables Familiar with...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.10/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.5.1/tabs.js"></script><script src="libs/bs3compat-0.2.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><link href="libs/panelset-0.2.6/panelset.css" rel="stylesheet">
<script src="libs/panelset-0.2.6/panelset.js"></script><link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="css/style-chapters.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Working in R</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Introduction</a></li>
<li class="book-part">Setting up R and RStudio</li>
<li><a class="" href="getting-started-with-r.html"><span class="header-section-number">2</span> Getting started with R</a></li>
<li class="book-part">First steps in R</li>
<li><a class="" href="first-steps-in-r.html"><span class="header-section-number">3</span> First steps in R</a></li>
<li><a class="" href="importing-data-in-r.html"><span class="header-section-number">4</span> Importing data in R</a></li>
<li class="book-part">Data manipulation with the tidyverse</li>
<li><a class="" href="pipes.html"><span class="header-section-number">5</span> Pipes</a></li>
<li><a class="" href="tidying-data-with-tidyr.html"><span class="header-section-number">6</span> Tidying data with tidyr</a></li>
<li><a class="" href="working-with-single-tables-in-dplyr.html"><span class="header-section-number">7</span> Working with single tables in dplyr</a></li>
<li><a class="" href="working-with-multiple-tables-in-dplyr.html"><span class="header-section-number">8</span> Working with multiple tables in dplyr</a></li>
<li class="book-part">Data visualisation</li>
<li><a class="" href="why-is-data-visualization-important.html"><span class="header-section-number">9</span> Why is data visualization important?</a></li>
<li><a class="" href="getting-started-with-ggplot.html"><span class="header-section-number">10</span> Getting started with ggplot</a></li>
<li><a class="active" href="choosing-your-visualisation.html"><span class="header-section-number">11</span> Choosing your visualisation</a></li>
<li><a class="" href="themes-1.html"><span class="header-section-number">12</span> Themes</a></li>
<li><a class="" href="colours-shapes-and-linetypes.html"><span class="header-section-number">13</span> Colours, shapes and linetypes</a></li>
<li><a class="" href="combining-plots.html"><span class="header-section-number">14</span> Combining plots</a></li>
<li><a class="" href="using-functions-and-packages.html"><span class="header-section-number">15</span> Using functions and packages</a></li>
<li class="book-part">Other topics</li>
<li><a class="" href="handling-missing-values.html"><span class="header-section-number">16</span> Handling missing values</a></li>
<li><a class="" href="bestiary-of-brackets-and-other-r-notation.html"><span class="header-section-number">17</span> Bestiary of Brackets and other R notation</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="choosing-your-visualisation" class="section level1" number="11">
<h1>
<span class="header-section-number">11</span> Choosing your visualisation<a class="anchor" aria-label="anchor" href="#choosing-your-visualisation"><i class="fas fa-link"></i></a>
</h1>
<p>The key to deciding what type of plot to make is to determine what type of data you have and what you are trying to show.</p>
<div id="before-we-start-3" class="section level3 facta toc-ignore" number="11.0.1">
<h3>
<span class="header-section-number">11.0.1</span> Before we start<a class="anchor" aria-label="anchor" href="#before-we-start-3"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Categorical and continuous variables</li>
<li>Familiar with ggplot</li>
</ul>
</div>
<div id="amounts" class="section level2" number="11.1">
<h2>
<span class="header-section-number">11.1</span> Amounts<a class="anchor" aria-label="anchor" href="#amounts"><i class="fas fa-link"></i></a>
</h2>
<p>You can use barplots to show amounts.
<code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code> will count how many observations there are of each type.</p>
<div class="sourceCode" id="cb447"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">penguins</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="103_different_types_of_vizualization_files/figure-html/bar-1.png" width="288"></div>
<p>If we have already calculated the amount, then we can use <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col()</a></code> to get an identical figure.</p>
<div class="sourceCode" id="cb448"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">penguins</span> |&gt; 
  <span class="fu"><a href="https://rdrr.io/pkg/tidylog/man/count.html">count</a></span><span class="op">(</span><span class="va">species</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">species</span>, y <span class="op">=</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="103_different_types_of_vizualization_files/figure-html/col-1.png" width="288"></div>
</div>
<div id="distribution-of-a-continuous-variable" class="section level2" number="11.2">
<h2>
<span class="header-section-number">11.2</span> Distribution of a continuous variable<a class="anchor" aria-label="anchor" href="#distribution-of-a-continuous-variable"><i class="fas fa-link"></i></a>
</h2>
<p>Histograms and density plots are often used to show the distribution of a continuous variable.
These can be made with <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code> and <code><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density()</a></code>, respectively.
Histograms split the data into bins and usually show the number of observations in each bin.
Density plots use a kernel smoother (often a Gaussian kernal - the normal bell-shaped curve) to give a smooth version of a histogram.</p>
<div class="sourceCode" id="cb449"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">base</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">penguins</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">flipper_length_mm</span><span class="op">)</span><span class="op">)</span>
<span class="va">p_hist</span> <span class="op">&lt;-</span> <span class="va">base</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">p_dens</span> <span class="op">&lt;-</span> <span class="va">base</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density</a></span><span class="op">(</span><span class="op">)</span> </code></pre></div>
<div class="sourceCode" id="cb450"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p_hist</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"geom_histogram()"</span><span class="op">)</span> <span class="op">+</span>
  <span class="va">p_dens</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"geom_density()"</span><span class="op">)</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<div class="inline-figure"><img src="103_different_types_of_vizualization_files/figure-html/hist-density-patch-1.png" width="672"></div>
<p>A key decision with histograms is how many bins to use, which can be set with the <code>bins</code> argument.
Too few bins and information is lost, too many and the result is very noisy.
Always try different values.
The placing of the bins can be controlled with the <code>boundary</code> or <code>center</code>.</p>
<div id="exercise-39" class="section level3 unnumbered facta toc-ignore">
<h3>Exercise<a class="anchor" aria-label="anchor" href="#exercise-39"><i class="fas fa-link"></i></a>
</h3>
<p>Make a histogram of the penguins bill length.
Change the number of bins.
What how many bins seem to work best?</p>
<details><summary>
Hint
</summary><p>Change the <code>bins</code> argument in <code>geom_histogram</code></p>
</details><p>Density plots can fail if there are sharp breaks in the data, and they can extrapolate into impossible regions (e.g.Â negative ages on a density plot of ages).</p>
</div>
<div id="exercise-40" class="section level3 unnumbered facta toc-ignore">
<h3>Exercise<a class="anchor" aria-label="anchor" href="#exercise-40"><i class="fas fa-link"></i></a>
</h3>
<p>Make a density plot of the penguins bill length.
Use the <code>adjust</code> argument to make the bandwidth of the smoother wider or narrower than the default.</p>
<details><summary>
Hint
</summary><p>Change the <code>adjust</code> argument in <code>geom_density</code></p>
</details>
</div>
</div>
<div id="a-few-distributions-of-a-continuous-variable" class="section level2" number="11.3">
<h2>
<span class="header-section-number">11.3</span> A few distributions of a continuous variable<a class="anchor" aria-label="anchor" href="#a-few-distributions-of-a-continuous-variable"><i class="fas fa-link"></i></a>
</h2>
<p>If we want show the distribution of a continuous variable conditioned by a categorical variable, we can add a fill aesthetic to the histogram or density plot.</p>
<div class="sourceCode" id="cb452"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">base</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">penguins</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">flipper_length_mm</span>, fill <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span>
<span class="va">p_hist</span> <span class="op">&lt;-</span> <span class="va">base</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">p_dens</span> <span class="op">&lt;-</span> <span class="va">base</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density</a></span><span class="op">(</span>alpha  <span class="op">=</span> <span class="fl">0.4</span><span class="op">)</span> <span class="co"># set alpha to make transparent</span></code></pre></div>
<div class="sourceCode" id="cb453"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p_hist</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"geom_histogram()"</span><span class="op">)</span> <span class="op">+</span>
  <span class="va">p_dens</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"geom_density()"</span><span class="op">)</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<div class="inline-figure"><img src="103_different_types_of_vizualization_files/figure-html/hist-density2-patch-1.png" width="672"></div>
<p>By default, <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code> gives a stacked histogram, while <code><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density()</a></code> plots the curves behind each other, which makes them easier to compare.
This behaviour can be changed with the position argument.</p>
<p>With more than a few levels of the categorical variable, this becomes unreadable, especially for the histogram, and we need another way to show the data.</p>
<div id="exercise-41" class="section level3 unnumbered facta toc-ignore">
<h3>Exercise<a class="anchor" aria-label="anchor" href="#exercise-41"><i class="fas fa-link"></i></a>
</h3>
<p>Make a histogram of the penguins bill length, showing the different species with different fills.
Make the fill semi-transparent with the <code>alpha</code> argument.
Change the <code>position</code> argument from <code>"stack"</code> to <code>"identity"</code>.
Which position is easiest to interpret?</p>
</div>
<div id="exercise-42" class="section level3 unnumbered facta toc-ignore">
<h3>Exercise<a class="anchor" aria-label="anchor" href="#exercise-42"><i class="fas fa-link"></i></a>
</h3>
<p>Make a density plot of the penguins bill length, showing the different species with different fills.
Make the fill semi-transparent with the <code>alpha</code> argument.
Change the <code>position</code> argument from <code>"identity"</code> to <code>"stack"</code>.
Which position is easiest to interpret?</p>
</div>
</div>
<div id="many-distributions-of-a-continuous-variable" class="section level2" number="11.4">
<h2>
<span class="header-section-number">11.4</span> Many distributions of a continuous variable<a class="anchor" aria-label="anchor" href="#many-distributions-of-a-continuous-variable"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb455"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">base</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">penguins</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">species</span>, y <span class="op">=</span> <span class="va">flipper_length_mm</span><span class="op">)</span><span class="op">)</span>

<span class="va">p_prange</span> <span class="op">&lt;-</span> <span class="va">base</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/stat_summary.html">stat_summary</a></span><span class="op">(</span>fun.data <span class="op">=</span> <span class="va">mean_sdl</span><span class="op">)</span>
<span class="va">p_box</span> <span class="op">&lt;-</span> <span class="va">base</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span>
<span class="va">p_vio</span> <span class="op">&lt;-</span> <span class="va">base</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_violin.html">geom_violin</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span>
<span class="va">p_point</span> <span class="op">&lt;-</span> <span class="va">base</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span>
<span class="va">p_jit</span> <span class="op">&lt;-</span> <span class="va">base</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html">geom_jitter</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggforce.data-imaginist.com">ggforce</a></span><span class="op">)</span>
<span class="va">p_sina</span> <span class="op">&lt;-</span> <span class="va">base</span> <span class="op">+</span> <span class="fu"><a href="https://ggforce.data-imaginist.com/reference/geom_sina.html">geom_sina</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/eclarke/ggbeeswarm">ggbeeswarm</a></span><span class="op">)</span>
<span class="va">p_bees</span> <span class="op">&lt;-</span> <span class="va">base</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/pkg/ggbeeswarm/man/geom_beeswarm.html">geom_beeswarm</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span>
<span class="va">p_quasi</span> <span class="op">&lt;-</span> <span class="va">base</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/pkg/ggbeeswarm/man/geom_quasirandom.html">geom_quasirandom</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="103_different_types_of_vizualization_files/figure-html/boxplots-etc-plot-1.png" width="672"></div>
<ul>
<li>
<code><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html">geom_pointrange()</a></code> is showing the mean <span class="math inline">\(\pm\)</span> 2 standard deviations.
It is a bad choice as it shows nothing of the raw data.</li>
<li>
<code><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot()</a></code> shows the median as the middle black line; the box encloses the central 50 % of the data (from the lower to the upper quantiles).
Whiskers stretch out as far as the maximum/minimum value that is within 1.5x the width of the central box.
Outliers beyond this are shown as points.</li>
<li>
<code><a href="https://ggplot2.tidyverse.org/reference/geom_violin.html">geom_violin()</a></code> are like <code><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density()</a></code> curves, turned on their side and reflected.
They show the shape of the distribution better than boxplots, and can work better than boxplots, especially for non-unimodal data.</li>
<li>
<code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code> shows the data, but is not very informative because of over-plotting.</li>
<li>
<code><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html">geom_jitter()</a></code> reduces over-plotting but does not show the distribution very well</li>
<li>
<code><a href="https://ggforce.data-imaginist.com/reference/geom_sina.html">geom_sina()</a></code>, <code><a href="https://rdrr.io/pkg/ggbeeswarm/man/geom_beeswarm.html">geom_beeswarm()</a></code> and <code><a href="https://rdrr.io/pkg/ggbeeswarm/man/geom_quasirandom.html">geom_quasirandom()</a></code>, all from extra packages, attempt to minimise over-plotting while showing the shape of the distribution.</li>
</ul>
<p>It is possible to use multiple geoms on top of each other, for example, <code><a href="https://ggforce.data-imaginist.com/reference/geom_sina.html">geom_sina()</a></code> and <code><a href="https://ggplot2.tidyverse.org/reference/geom_violin.html">geom_violin()</a></code></p>
</div>
<div id="many-distributions-of-a-continuous-variable-split-by-a-categorical-variable" class="section level2" number="11.5">
<h2>
<span class="header-section-number">11.5</span> Many distributions of a continuous variable split by a categorical variable<a class="anchor" aria-label="anchor" href="#many-distributions-of-a-continuous-variable-split-by-a-categorical-variable"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb456"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">penguins</span> |&gt; 
  <span class="fu"><a href="https://rdrr.io/pkg/tidylog/man/drop_na.html">drop_na</a></span><span class="op">(</span><span class="va">flipper_length_mm</span>, <span class="va">sex</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">species</span>, y <span class="op">=</span> <span class="va">flipper_length_mm</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_violin.html">geom_violin</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">sex</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="103_different_types_of_vizualization_files/figure-html/boxplots-etc2-1.png" width="384"></div>
<p>Need to decide which variable to have on the x-axis and which to have as fill.
Can also use facets with more complex plots.</p>
</div>
<div id="association-between-two-continuous-variables" class="section level2" number="11.6">
<h2>
<span class="header-section-number">11.6</span> Association between two continuous variables<a class="anchor" aria-label="anchor" href="#association-between-two-continuous-variables"><i class="fas fa-link"></i></a>
</h2>
<p>The standard plot for two continuous variables is the scatterplot, which we can get with <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code>.</p>
<div class="sourceCode" id="cb457"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">penguins</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">body_mass_g</span>, y <span class="op">=</span> <span class="va">bill_length_mm</span>, colour <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Body mass, g"</span>, y <span class="op">=</span> <span class="st">"Bill length,  mm"</span>, colour <span class="op">=</span> <span class="st">"Species"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="103_different_types_of_vizualization_files/figure-html/scatter-1.png" width="384"></div>
<p>The x-axis should be the predictor (independent) variable, and the y-axis the response (dependent) variable.
With observational data, it may not be so obvious which variable should be on which axis.</p>
<p>With lots of data, especially if it is of low precision, there can be a problem with over-plotting.</p>
<p>Several solutions, which can be used together</p>
<ul>
<li>transparency. Make the points semi-transparent by setting <code>alpha</code>.
Now where there are many points the plot will appear darker.</li>
<li>
<code>jitter</code>, add a small amount of noise to the data by using <code><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html">geom_jitter()</a></code> instead of <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code>
</li>
<li>
<code><a href="https://ggplot2.tidyverse.org/reference/geom_count.html">geom_count()</a></code> show bubbles scaled according to how many points there are at each point.</li>
<li>
<code><a href="https://ggplot2.tidyverse.org/reference/geom_density_2d.html">geom_density2d()</a></code> contour lines of the density of points.</li>
<li>
<code><a href="https://ggplot2.tidyverse.org/reference/geom_bin_2d.html">geom_bin2d()</a></code> or <code>geom_hexbin()</code> to make 2-dimensional histograms.</li>
</ul>
<div id="d-density" class="section level3" number="11.6.1">
<h3>
<span class="header-section-number">11.6.1</span> 2D density<a class="anchor" aria-label="anchor" href="#d-density"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb458"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguins</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">bill_length_mm</span>, y <span class="op">=</span> <span class="va">bill_depth_mm</span>, colour <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density_2d.html">geom_density2d</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="103_different_types_of_vizualization_files/figure-html/density2d-1.png" width="480"></div>
</div>
</div>
<div id="association-between-more-than-two-continuous-variables" class="section level2" number="11.7">
<h2>
<span class="header-section-number">11.7</span> Association between more than two continuous variables<a class="anchor" aria-label="anchor" href="#association-between-more-than-two-continuous-variables"><i class="fas fa-link"></i></a>
</h2>
<p>Some choices</p>
<ul>
<li>use an ordination to reduce the data to two orthogonal dimensions (See BIO303)</li>
<li>use a heatmap of the correlations between variables</li>
<li>plot all possible pairs of variables with <code><a href="https://ggobi.github.io/ggally/reference/ggpairs.html">GGally::ggpairs()</a></code>
</li>
</ul>
<div id="ggallyggpairs" class="section level3" number="11.7.1">
<h3>
<span class="header-section-number">11.7.1</span> GGally::ggpairs<a class="anchor" aria-label="anchor" href="#ggallyggpairs"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb459"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggobi.github.io/ggally/">GGally</a></span><span class="op">)</span>
<span class="va">penguins</span> |&gt; 
  <span class="fu"><a href="https://rdrr.io/pkg/tidylog/man/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">year</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://ggobi.github.io/ggally/reference/ggpairs.html">ggpairs</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="103_different_types_of_vizualization_files/figure-html/ggpairs-1.png" width="672"></div>
</div>
<div id="heatmap" class="section level3" number="11.7.2">
<h3>
<span class="header-section-number">11.7.2</span> Heatmap<a class="anchor" aria-label="anchor" href="#heatmap"><i class="fas fa-link"></i></a>
</h3>
<p>First calculate the correlations between the numeric variables, then reshape the data into long format,</p>
<div class="sourceCode" id="cb460"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Select only numeric variables and remove all NAs</span>
<span class="va">penguin_matrix</span> <span class="op">&lt;-</span> <span class="va">penguins</span> |&gt; 
  <span class="fu"><a href="https://rdrr.io/pkg/tidylog/man/select.html">select</a></span><span class="op">(</span><span class="va">bill_length_mm</span><span class="op">:</span><span class="va">body_mass_g</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://rdrr.io/pkg/tidylog/man/drop_na.html">drop_na</a></span><span class="op">(</span><span class="va">bill_length_mm</span><span class="op">)</span>

<span class="co"># Calculate the correlation between all variables and rearrange the table</span>
<span class="va">cor_matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html">cor</a></span><span class="op">(</span><span class="va">penguin_matrix</span><span class="op">)</span>

<span class="co"># rearrange</span>
<span class="va">cor_long</span> <span class="op">&lt;-</span> <span class="va">cor_matrix</span> |&gt; 
  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="op">)</span> |&gt; 
  <span class="fu">rownames_to_column</span><span class="op">(</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://rdrr.io/pkg/tidylog/man/pivot_longer.html">pivot_longer</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="op">-</span><span class="va">rowname</span>, names_to <span class="op">=</span> <span class="st">"colname"</span>, values_to <span class="op">=</span> <span class="st">"cor"</span><span class="op">)</span> |&gt; 
  <span class="co">#only upper triangle</span>
  <span class="fu"><a href="https://rdrr.io/pkg/tidylog/man/filter.html">filter</a></span><span class="op">(</span><span class="va">rowname</span> <span class="op">&lt;</span> <span class="va">colname</span><span class="op">)</span></code></pre></div>
<p>Now we can use the function <code><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">geom_tile()</a></code> to plot the data.</p>
<div class="sourceCode" id="cb461"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">cor_long</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">rowname</span>, y <span class="op">=</span> <span class="va">colname</span>, fill <span class="op">=</span> <span class="va">cor</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">geom_tile</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html">scale_fill_gradient2</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="103_different_types_of_vizualization_files/figure-html/heatmap-1.png" width="672"></div>
<p>Alternatively, we can use <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code> and use the size aesthetic to scale the points by the absolute value of the correlation to give more visual weight to the larger correlations.</p>
<div class="sourceCode" id="cb462"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">cor_long</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">rowname</span>, y <span class="op">=</span> <span class="va">colname</span>, colour <span class="op">=</span> <span class="va">cor</span>, size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span><span class="op">(</span><span class="va">cor</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html">scale_colour_gradient2</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_size.html">scale_size_continuous</a></span><span class="op">(</span>range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="103_different_types_of_vizualization_files/figure-html/heatmap-circles-1.png" width="672"></div>
</div>
<div id="lines" class="section level3" number="11.7.3">
<h3>
<span class="header-section-number">11.7.3</span> Lines<a class="anchor" aria-label="anchor" href="#lines"><i class="fas fa-link"></i></a>
</h3>
<p>Temporal data are often plotted with line plots.
Time is usually on the x axis.</p>
<div class="sourceCode" id="cb463"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">economics</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">unemploy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">""</span>, y <span class="op">=</span> <span class="st">"Unemployment"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="103_different_types_of_vizualization_files/figure-html/lines-1.png" width="672"></div>
<p><code><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line()</a></code> will draw a line from the left to the right of the screen regardless of the order of the data.
If the order of the data are important, use <code><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_path()</a></code> instead.</p>

</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="getting-started-with-ggplot.html"><span class="header-section-number">10</span> Getting started with ggplot</a></div>
<div class="next"><a href="themes-1.html"><span class="header-section-number">12</span> Themes</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li>
<a class="nav-link" href="#choosing-your-visualisation"><span class="header-section-number">11</span> Choosing your visualisation</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#before-we-start-3"><span class="header-section-number">11.0.1</span> Before we start</a></li></ul>
</li>
<li><a class="nav-link" href="#amounts"><span class="header-section-number">11.1</span> Amounts</a></li>
<li>
<a class="nav-link" href="#distribution-of-a-continuous-variable"><span class="header-section-number">11.2</span> Distribution of a continuous variable</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#exercise-39">Exercise</a></li>
<li><a class="nav-link" href="#exercise-40">Exercise</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#a-few-distributions-of-a-continuous-variable"><span class="header-section-number">11.3</span> A few distributions of a continuous variable</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#exercise-41">Exercise</a></li>
<li><a class="nav-link" href="#exercise-42">Exercise</a></li>
</ul>
</li>
<li><a class="nav-link" href="#many-distributions-of-a-continuous-variable"><span class="header-section-number">11.4</span> Many distributions of a continuous variable</a></li>
<li><a class="nav-link" href="#many-distributions-of-a-continuous-variable-split-by-a-categorical-variable"><span class="header-section-number">11.5</span> Many distributions of a continuous variable split by a categorical variable</a></li>
<li>
<a class="nav-link" href="#association-between-two-continuous-variables"><span class="header-section-number">11.6</span> Association between two continuous variables</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#d-density"><span class="header-section-number">11.6.1</span> 2D density</a></li></ul>
</li>
<li>
<a class="nav-link" href="#association-between-more-than-two-continuous-variables"><span class="header-section-number">11.7</span> Association between more than two continuous variables</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#ggallyggpairs"><span class="header-section-number">11.7.1</span> GGally::ggpairs</a></li>
<li><a class="nav-link" href="#heatmap"><span class="header-section-number">11.7.2</span> Heatmap</a></li>
<li><a class="nav-link" href="#lines"><span class="header-section-number">11.7.3</span> Lines</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Working in R</strong>" was written by Jonathan SoulÃ©, Aud Halbritter and Richard J Telford. It was last built on 2021-09-14.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
