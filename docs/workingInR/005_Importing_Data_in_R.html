<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.37">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Working in R - 7&nbsp; Importing data in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./010-pipes.html" rel="next">
<link href="./002_First_Steps_in_R.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
</head>
<body class="nav-sidebar floating slimcontent">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }"><div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">
<span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Importing data in R</span>
</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Working in R</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/biostats-r/biostats" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="" title="Share" id="sidebar-tool-dropdown-0" class="sidebar-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-share"></i></a>
    <ul class="dropdown-menu" aria-labelledby="sidebar-tool-dropdown-0">
<li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=%7Curl%7C">
            <i class="bi bi-bi-twitter pe-1"></i>
          Twitter
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=%7Curl%7C">
            <i class="bi bi-bi-facebook pe-1"></i>
          Facebook
          </a>
        </li>
    </ul>
<a href="" class="quarto-color-scheme-toggle sidebar-tool" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Setting up R and RStudio</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0010_Getting_Started_with_RStudio.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Installing and configuring R and RStudio</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0011_projects.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">RStudio projects</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0012_scripts.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Working with a script</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./0013_packages.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Installing packages</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">First steps in R</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./002_First_Steps_in_R.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">First steps in R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./005_Importing_Data_in_R.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Importing data in R</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">Data manipulation with the tidyverse</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./010-pipes.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Pipes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./011-tidyr-pivot.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Tidying data with <code>tidyr</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./012-dplyr-single-table.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Working with single tables in <code>dplyr</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./013-dplyr-multiple-tables.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Working with multiple tables in <code>dplyr</code></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">Data Visualisation</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./100_why_data_visualisation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Why is data visualization important?</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./101_getting_started_with_ggplot.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Getting started with ggplot</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./103_different_types_of_vizualization.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Choosing your visualisation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./118_themes.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Themes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./120_colour_shape_linetypes.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Colours, shapes and linetypes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./125_ggplot_regression.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Regression and ggplot</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./130_patchwork.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Combining plots</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">Other Topics</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./050_missing_values.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Handling missing values</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./060_bestiary.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Bestiary of Brackets and other R notation</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><!-- margin-sidebar --><div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
<style>
               img.site-logo {
  height: auto;
  width: 95%;
}
      </style>
<p><a  href="https://biostats.w.uib.no/" aria-label="bioST@TS | When biology adds up, at last&#8230;"><img class="site-logo" src="https://biostats.w.uib.no/files/2020/01/biostats-button-res2.png" alt="BioST@TS homepage" width="250" height="101"  data-no-retina class=" attachment-11864" title = "BioST@TS homepage"/></a>  
<br><a  href="../index.html" aria-label="bioST@TS | When biology adds up, at last&#8230;"><img class="site-logo" src="../figures/icons_all.png" alt= "BioST@TS books" width="250" height="101"  data-no-retina class=" attachment-11864", title = "BioST@TS books"/></a>   </p>
        <nav id="TOC" role="doc-toc"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#what-are-tabular-data" id="toc-what-are-tabular-data" class="nav-link active" data-scroll-target="#what-are-tabular-data"> <span class="header-section-number">7.1</span> What are tabular data?</a></li>
  <li><a href="#about-tidy-data" id="toc-about-tidy-data" class="nav-link" data-scroll-target="#about-tidy-data"> <span class="header-section-number">7.2</span> About tidy data</a></li>
  <li>
<a href="#file-formats" id="toc-file-formats" class="nav-link" data-scroll-target="#file-formats"> <span class="header-section-number">7.3</span> File formats</a>
  <ul class="collapse">
<li><a href="#the-csv-format" id="toc-the-csv-format" class="nav-link" data-scroll-target="#the-csv-format"> <span class="header-section-number">7.3.1</span> The CSV format</a></li>
  </ul>
</li>
  <li><a href="#know-your-data" id="toc-know-your-data" class="nav-link" data-scroll-target="#know-your-data"> <span class="header-section-number">7.4</span> Know your data!</a></li>
  <li>
<a href="#import-with-readr" id="toc-import-with-readr" class="nav-link" data-scroll-target="#import-with-readr"> <span class="header-section-number">7.5</span> Import with readr</a>
  <ul class="collapse">
<li><a href="#read_delim" id="toc-read_delim" class="nav-link" data-scroll-target="#read_delim"> <span class="header-section-number">7.5.1</span> read_delim()</a></li>
  <li><a href="#read_csv" id="toc-read_csv" class="nav-link" data-scroll-target="#read_csv"> <span class="header-section-number">7.5.2</span> read_csv()</a></li>
  <li><a href="#white-space-delimited-files" id="toc-white-space-delimited-files" class="nav-link" data-scroll-target="#white-space-delimited-files"> <span class="header-section-number">7.5.3</span> White space delimited files</a></li>
  <li><a href="#useful-arguments" id="toc-useful-arguments" class="nav-link" data-scroll-target="#useful-arguments"> <span class="header-section-number">7.5.4</span> Useful arguments</a></li>
  </ul>
</li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title d-none d-lg-block">
<span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Importing data in R</span>
</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i></button></div></div>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header><p>R can import data from files in many different formats. For example:</p>
<ul>
<li>csv files with the <code>readr</code> package</li>
<li>excel files with the <code>readxl</code> package</li>
<li>xlm files with the <code>xml2</code> package</li>
<li>netcdf files with the <code>ncdf4</code> package</li>
<li>shapefiles with the <code>sf</code> package</li>
</ul>
<p>In this chapter, you will learn how to import tabular data from an external text file as a tibble. We will use functions from the package <code>readr</code> which is part of the <code>tidyverse</code> package, so make sure that you have activated it with <code><a href="https://tidyverse.tidyverse.org">library(tidyverse)</a></code>.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Before we start
</div>
</div>
<div class="callout-body-container callout-body">
<p>You must be familiar with tibbles and data types (such as numeric, character, etc).</p>
</div>
</div>
<section id="what-are-tabular-data" class="level2" data-number="7.1"><h2 data-number="7.1" class="anchored" data-anchor-id="what-are-tabular-data">
<span class="header-section-number">7.1</span> What are tabular data?</h2>
<p>Tabular data are data that is organized in the form of a table with rows and columns. A table often has a header, i.e.&nbsp;an additional row that displays variable names. Here is an example of a formatted table with header:</p>
<div id="tbl-kable" class="cell tbl-parent quarto-layout-panel anchored">
<div class="panel-caption table-caption">
<p>Table 7.1: <strong>?(caption)</strong></p>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div id="tbl-kable-1" class="quarto-layout-cell quarto-layout-cell-subref anchored" data-ref-parent="tbl-kable" style="flex-basis: 100.0%;justify-content: center;">
<table class="table table-sm table-striped">
<caption>(a) <em>A simple table with header</em>
</caption>
<thead><tr class="header">
<th style="text-align: left;">month</th>
<th style="text-align: right;">temperature (Celsius)</th>
<th style="text-align: right;">precipitation (mm)</th>
<th style="text-align: right;">Wind (m/s)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">January</td>
<td style="text-align: right;">-3.4</td>
<td style="text-align: right;">29.4</td>
<td style="text-align: right;">1.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">February</td>
<td style="text-align: right;">-0.4</td>
<td style="text-align: right;">15.4</td>
<td style="text-align: right;">0.9</td>
</tr>
<tr class="odd">
<td style="text-align: left;">March</td>
<td style="text-align: right;">-1.7</td>
<td style="text-align: right;">57.6</td>
<td style="text-align: right;">1.7</td>
</tr>
<tr class="even">
<td style="text-align: left;">april</td>
<td style="text-align: right;">3.8</td>
<td style="text-align: right;">3.2</td>
<td style="text-align: right;">0.8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">May</td>
<td style="text-align: right;">5.1</td>
<td style="text-align: right;">25.2</td>
<td style="text-align: right;">1.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">June</td>
<td style="text-align: right;">10.6</td>
<td style="text-align: right;">52.4</td>
<td style="text-align: right;">1.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">July</td>
<td style="text-align: right;">13.1</td>
<td style="text-align: right;">65.0</td>
<td style="text-align: right;">1.0</td>
</tr>
<tr class="even">
<td style="text-align: left;">August</td>
<td style="text-align: right;">12.8</td>
<td style="text-align: right;">67.4</td>
<td style="text-align: right;">0.7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">September</td>
<td style="text-align: right;">6.9</td>
<td style="text-align: right;">79.0</td>
<td style="text-align: right;">1.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">October</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">18.2</td>
<td style="text-align: right;">0.8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">November</td>
<td style="text-align: right;">-2.2</td>
<td style="text-align: right;">7.8</td>
<td style="text-align: right;">0.8</td>
</tr>
<tr class="even">
<td style="text-align: left;">December</td>
<td style="text-align: right;">1.5</td>
<td style="text-align: right;">92.0</td>
<td style="text-align: right;">1.5</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>In this example, the table consists of 4 variables (columns) and 12 observations (rows) in addition to the header (top row). All cell contents are clearly delimited.</p>
<p>Below is an example of a <em>non</em>-tabular dataset. This dataset is a list of profiles with recurrent fields (<code>Name</code>, <code>Position</code>, <code>Institution</code>). Each profile contains three lines with a <code>field:value</code> pair.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Name: Aud Halbritter
Position: Researcher
Institution: UiB
-----------------------------
Name: Jonathan Soule
Position: Senior Engineer
Institution: UiB
-----------------------------
Name: Richard J. Telford
Position: Associate Professor
Institution: UiB
-----------------------------</code></pre>
</div>
</div>
</section><section id="about-tidy-data" class="level2" data-number="7.2"><h2 data-number="7.2" class="anchored" data-anchor-id="about-tidy-data">
<span class="header-section-number">7.2</span> About tidy data</h2>
<p>Sooner or later, you will read about <em>tidy data</em> which is a standard, consistent way to organize tabular data in R. Briefly, tidy data follows a short series of rules:</p>
<ul>
<li>each variable in the data set is presented in a specific column,</li>
<li>each observation in the data set is presented in a specific row,</li>
<li>each cell at the intersection of a row and a column contains a single value.</li>
</ul>
<p>The following figure illustrates well these rules.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="figures/tidy1.png" class="img-fluid figure-img" alt="Schematic diagram showing that variables should be in columns, observations in rows and each cell should contain a single value" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">In a tidy dataset, variables are in columns, observations are in rows, and values are in cells. — Source: <a href="https://r4ds.had.co.nz/tidy-data.html">R for Data Science</a></figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>The dataset presented in <a href="#tbl-kable">Table&nbsp;<span>7.1</span></a> respects all three rules, and is thus a tidy dataset.</p>
<p>On the contrary, the following dataset is <em>not</em> tidy:</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: One or more parsing issues, see `problems()` for details</code></pre>
</div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Date"],"name":[1],"type":["chr"],"align":["left"]},{"label":["17.06.2016"],"name":[2],"type":["chr"],"align":["left"]},{"label":["21.06.2016"],"name":[3],"type":["chr"],"align":["left"]},{"label":["23.06.2016"],"name":[4],"type":["chr"],"align":["left"]},{"label":["26.06.2016"],"name":[5],"type":["chr"],"align":["left"]},{"label":["27.06.2016"],"name":[6],"type":["chr"],"align":["left"]},{"label":["28.06.2016"],"name":[7],"type":["chr"],"align":["left"]},{"label":["29.06.2016"],"name":[8],"type":["chr"],"align":["left"]},{"label":["30.06.2016"],"name":[9],"type":["chr"],"align":["left"]},{"label":["02.07.2016"],"name":[10],"type":["chr"],"align":["left"]},{"label":["04.07.2016"],"name":[11],"type":["chr"],"align":["left"]},{"label":["05.07.2016"],"name":[12],"type":["chr"],"align":["left"]},{"label":["06.07.2016"],"name":[13],"type":["chr"],"align":["left"]},{"label":["08.07.2016"],"name":[14],"type":["chr"],"align":["left"]},{"label":["10.07.2016"],"name":[15],"type":["chr"],"align":["left"]},{"label":["11.07.2016"],"name":[16],"type":["chr"],"align":["left"]},{"label":["13.07.2016"],"name":[17],"type":["chr"],"align":["left"]},{"label":["15.07.2016"],"name":[18],"type":["chr"],"align":["left"]},{"label":["17.07.2016"],"name":[19],"type":["chr"],"align":["left"]},{"label":["19.07.2016"],"name":[20],"type":["chr"],"align":["left"]},{"label":["21.07.2016"],"name":[21],"type":["chr"],"align":["left"]},{"label":["23.07.2016"],"name":[22],"type":["chr"],"align":["left"]},{"label":["24.07.2016"],"name":[23],"type":["chr"],"align":["left"]},{"label":["26.07.2016"],"name":[24],"type":["chr"],"align":["left"]},{"label":["28.07.2016"],"name":[25],"type":["chr"],"align":["left"]},{"label":["30.07.2016"],"name":[26],"type":["chr"],"align":["left"]},{"label":["02.08.2016"],"name":[27],"type":["chr"],"align":["left"]},{"label":["04.08.2016"],"name":[28],"type":["chr"],"align":["left"]},{"label":["06.08.2016"],"name":[29],"type":["chr"],"align":["left"]},{"label":["11.08.2016"],"name":[30],"type":["chr"],"align":["left"]},{"label":["13.08.2016"],"name":[31],"type":["chr"],"align":["left"]},{"label":["15.08.2016"],"name":[32],"type":["chr"],"align":["left"]},{"label":["17.08.2016"],"name":[33],"type":["chr"],"align":["left"]},{"label":["18.08.2016"],"name":[34],"type":["chr"],"align":["left"]}],"data":[{"1":"Time","2":"10:00","3":"11:00","4":"11:00","5":"13:00","6":"13:00","7":"09:33","8":"13:00","9":"15:00","10":"09:00","11":"09:15","12":"09:30","13":"09:15","14":"09:15","15":"09:15","16":"09:15","17":"09:30","18":"10:00","19":"13:00","20":"17:30","21":"10.00","22":"10:00","23":"09:30","24":"09:30","25":"09:30","26":"09:15","27":"09:30","28":"15:00","29":"11:00","30":"15:00","31":"14:00","32":"09:00","33":"11:00","34":"08:00"},{"1":"Weather","2":"Sunny_PartlyCloudy","3":"Cloudy_Fog","4":"Cloudy_Sunny","5":"Cloudy_Rainy_Windy_Fog","6":"Cloudy_Windy_Rainy","7":"Windy_Rainy_MostlyCloudy","8":"Windy_Sunny_Cloudy","9":"Windy_Cloudy","10":"Windy_Cloudy","11":"Cloudy_Sunny","12":"Cloudy_Sunny","13":"Cloudy_Fog_Rainy","14":"Sunny_PartlyCloudy","15":"Cloudy_Rainy","16":"Cloudy","17":"Cloudy_Sunny","18":"Cloudy","19":"Cloudy_Rainy","20":"Cloudy_Rainy","21":"Cloudy_Sunny","22":"Sunny_Cloudy","23":"Cloudy_Sunny","24":"Cloudy_Rainy","25":"Cloudy_Rainy","26":"Cloudy_Rainy","27":"Cloudy_Rainy","28":"Cloudy_Rainy","29":"Cloudy_Rainyn","30":"Cloudy_Snowy_Sunny","31":"Cloudy_PartlyRainy","32":"Cloudy_Sunny","33":"Sunny","34":"Cloudy;Cloudy"},{"1":"Observer","2":"LV_AH","3":"LV","4":"LV","5":"LV","6":"LV_SB","7":"LV_SB","8":"LV_SB","9":"LV","10":"LV_SB","11":"SB_LV","12":"SB_LV","13":"LV_SB","14":"LV_SB","15":"LV_SB","16":"LV","17":"LV","18":"LV_SB_AH","19":"SB_LV","20":"SB_LV","21":"SB_LV","22":"SB_LV","23":"LV","24":"LV","25":"LV","26":"LV","27":"LV","28":"LV","29":"LV","30":"LV","31":"LV","32":"LV","33":"LV","34":"LV"},{"1":"E01a","2":"0","3":"NA","4":"0","5":"0","6":"0","7":"0","8":"1","9":"1","10":"2","11":"2","12":"3","13":"3","14":"6","15":"8","16":"8","17":"11","18":"13","19":"10","20":"9","21":"7","22":"3","23":"6","24":"3","25":"3","26":"1","27":"1","28":"1","29":"2","30":"1","31":"NA","32":"NA","33":"NA","34":"NA"},{"1":"E01b","2":"0","3":"NA","4":"0","5":"0","6":"1","7":"1","8":"1","9":"1","10":"1","11":"1","12":"1","13":"1","14":"3","15":"3","16":"3","17":"8","18":"19","19":"23","20":"26","21":"24","22":"16","23":"16","24":"8","25":"5","26":"2","27":"3","28":"4","29":"3","30":"2","31":"NA","32":"NA","33":"NA","34":"NA"},{"1":"E01c","2":"0","3":"NA","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"1","17":"5","18":"9","19":"12","20":"10","21":"7","22":"4","23":"3","24":"3","25":"3","26":"2","27":"2","28":"0","29":"1","30":"1","31":"NA","32":"NA","33":"NA","34":"NA"},{"1":"E01d","2":"0","3":"NA","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"1","15":"1","16":"1","17":"2","18":"4","19":"3","20":"2","21":"4","22":"1","23":"1","24":"1","25":"2","26":"2","27":"1","28":"1","29":"1","30":"0","31":"NA","32":"NA","33":"NA","34":"NA"},{"1":"E01e","2":"0","3":"NA","4":"0","5":"0","6":"0","7":"0","8":"0","9":"0","10":"0","11":"0","12":"0","13":"0","14":"0","15":"0","16":"0","17":"1","18":"4","19":"4","20":"4","21":"5","22":"4","23":"3","24":"1","25":"0","26":"0","27":"0","28":"0","29":"0","30":"0","31":"NA","32":"NA","33":"NA","34":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Indeed, at least one of the rules is broken since columns display data matching several variables (Date, time, Weather, etc).</p>
<p>Importing data from a file containing tidy data is a great way to start your work, but it is <em>not</em> a prerequisite to data import. As long as your data is tabular, you will be able to import it in R, and later you will have the chance to tidy it (see <a href="011-tidyr-pivot.html"><span>Chapter&nbsp;9</span></a>).</p>
</section><section id="file-formats" class="level2" data-number="7.3"><h2 data-number="7.3" class="anchored" data-anchor-id="file-formats">
<span class="header-section-number">7.3</span> File formats</h2>
<p>Tabular data may be stored in files using various formats, spreadsheets, etc. The most common spreadsheets store data in their own, proprietary file format, e.g.&nbsp;MS Excel which produces <code>.xls</code> and <code>.xlsx</code> files. Such formats may be a limitation to data management in R. Simpler formats such as plain text files with <code>.txt</code> or <code>.csv</code> should always be preferred when saving or exporting data from spreadsheets.</p>
<section id="the-csv-format" class="level3" data-number="7.3.1"><h3 data-number="7.3.1" class="anchored" data-anchor-id="the-csv-format">
<span class="header-section-number">7.3.1</span> The CSV format</h3>
<p>One of the most common format for storing tabular data in plain text files is CSV, which stands for <strong>C</strong>omma-<strong>S</strong>eparated <strong>V</strong>alues. It is this format that we are going to deal with here. Note that CSV-formatted files often have (but not always) a <code>.csv</code> extension. They may also have a <code>.txt</code> extension.</p>
<p>In a CSV-formatted file, the data is stored in a similar manner to this:</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="figures/csv.png" class="img-fluid figure-img" style="width:75.0%"></p>
<p></p><figcaption class="figure-caption"><em>Contents of a CSV file viewed in the text editor Notepad</em></figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>For information, this file matches the example in <a href="#tbl-kable">Table&nbsp;<span>7.1</span></a>. Each line corresponds to a row in the table (including header) and cell contents are separated with a comma <code>,</code>. Note that the period symbol <code>.</code> is used as decimal separator.</p>
<p>The use of commas in the CSV format is however not universal. Other symbols such as a semi-colon <code>;</code> may be used as a delimiter. This is the case in several European countries where commas are decimal separator. Here is the same data set as above, this time in the European format:</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="figures/csv2.png" class="img-fluid figure-img" style="width:75.0%"></p>
<p></p><figcaption class="figure-caption"><em>Contents of another CSV file</em></figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Finally, you should know that there exist other delimiter-separated formats, in which delimiters like <code>|</code> or tabs (coded as <code>\t</code>) replace commas.</p>
</section></section><section id="know-your-data" class="level2" data-number="7.4"><h2 data-number="7.4" class="anchored" data-anchor-id="know-your-data">
<span class="header-section-number">7.4</span> Know your data!</h2>
<p>There are several reasons why different symbols are used in CSV files. Among these reasons are:</p>
<ul>
<li>locale, i.e.&nbsp;the parameters that define the language and regional settings (currency, time and date, number format setting) in use on your machine,</li>
<li>software-based preferences, the settings which are defined <em>by default</em> by the software that you have used to punch your data,</li>
<li>user-based preferences, the settings that <em>you</em> choose when punching or saving data.</li>
</ul>
<p>It is thus very important to know what your CSV file is made of. We therefore recommend to systematically inspect your data file before importing in R. One way to do it is to open the file with <code>read_lines('file.txt')</code> (the <code>n_max</code> argument is useful if there is lots of data) and determine:</p>
<ul>
<li>which symbol is used as decimal separator (<code>,</code> or <code>.</code>)</li>
<li>which symbol is used as delimiter (<code>,</code> or <code>;</code>)</li>
<li>any extra lines of data that need removing</li>
</ul>
<p>Here is our previous example:</p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">read_lines</span><span class="op">(</span><span class="st">'data/weather.csv'</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "month,temperature (Celsius),precipitation (mm),Wind (m/s)"
 [2] "January,-3.4,29.4,1.3"                                    
 [3] "February,-0.4,15.4,0.9"                                   
 [4] "March,-1.7,57.6,1.7"                                      
 [5] "april,3.8,3.2,0.8"                                        
 [6] "May,5.1,25.2,1.4"                                         
 [7] "June,10.6,52.4,1.1"                                       
 [8] "July,13.1,65.0,1.0"                                       
 [9] "August,12.8,67.4,0.7"                                     
[10] "September,6.9,79.0,1.2"                                   
[11] "October,2.5,18.2,0.8"                                     
[12] "November,-2.2,7.8,0.8"                                    
[13] "December,1.5,92.0,1.5"                                    </code></pre>
</div>
</div>
<p>In this file, the decimal separator is <code>.</code> and the delimiter is <code>,</code>.</p>
</section><section id="import-with-readr" class="level2 page-columns page-full" data-number="7.5"><h2 data-number="7.5" class="anchored" data-anchor-id="import-with-readr">
<span class="header-section-number">7.5</span> Import with readr</h2>
<p><code>readr</code> comes with several functions that read data files. Among them are:</p>
<ul>
<li><code>read_delim()</code></li>
<li><code>read_csv()</code></li>
<li><code>read_csv2()</code></li>
<li><code>read_table()</code></li>
</ul>
<p>We will focus essentially on <code>read_delim()</code> as it is a general function that can import all the formats. <code>read_csv()</code> and <code>read_csv2()</code> are more specific functions which are preset to import CSV-formatted files in which a comma <code>,</code> or a semi-colon <code>;</code> is defined as delimiter, respectively. <code>read_delim()</code> reads white-space delimited files.</p>
<section id="read_delim" class="level3" data-number="7.5.1"><h3 data-number="7.5.1" class="anchored" data-anchor-id="read_delim">
<span class="header-section-number">7.5.1</span> read_delim()</h3>
<p><code>read_delim()</code> is a simple function that does several things at once. First, it finds and reads the file to import. Then it looks at the first 1000 rows of the file and guesses the number of variables and rows, and the data type for each variable. Finally, it displays the data as a tibble keeping track of the order of both the columns and rows, and the nature of the data.</p>
<p>The function does not automatically <em>store</em> the data after reading the file. This is why the tibble produced by <code>read_delim()</code> must be assigned to an object using <code>&lt;-</code>.</p>
<p><code>read_delim()</code> has two main mandatory arguments:</p>
<ul>
<li>
<code>file = " "</code> which defines where to find the data file,</li>
<li>
<code>delim = " "</code> which defines the symbol used as delimiter.</li>
</ul>
<p>When searching for the file, R/RStudio uses the location of the current RStudio project as a root. As a consequence, you may simply write the file name if the file is in the same folder as your <code>.Rproj</code> file. Alternatively, write <code>[subfolder]/[filename]</code> if the file is in a subfolder. For more info about RStudio projects, read section <a href="0011_projects.html"><span>Chapter&nbsp;3</span></a>.</p>
<p>In the following example, we import the file <code>weather.csv</code> located in the subfolder <code>data</code> of the current RStudio project into the object <code>weather</code>. In <code>weather.csv</code>, the delimiter is <code>,</code> and the decimal separator is <code>.</code></p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">weather</span> <span class="op">&lt;-</span> <span class="fu">read_delim</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/weather.csv"</span>, </span>
<span>                      delim <span class="op">=</span> <span class="st">","</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 12 Columns: 4
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (1): month
dbl (3): temperature (Celsius), precipitation (mm), Wind (m/s)

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>When the function is executed, the console shows a short series of warnings and messages. In the frame above, the message <code>Column specification</code> tells you that the content of the column <code>month</code> has been recognized as of data type <code>character</code>, and that the three other columns have been recognized as <code>double</code> (which is similar to <code>numeric</code>).</p>
<p>Now the tibble <code>weather</code> is available in R as you may see in the tab <code>Environment</code> (see <a href="#fig-csv-env">Figure&nbsp;<span>7.1</span></a>).</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-csv-env" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="figures/csv-env.png" class="img-fluid figure-img" alt="Screenshot of the environment tab showing one object &quot;weather&quot; with 12 obsevations and 4 variables." style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">Figure 7.1: The <em>tibble</em> weather is now stored in R.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>You can display the table as follows:</p>
<div class="cell">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">weather</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 4
   month     `temperature (Celsius)` `precipitation (mm)` `Wind (m/s)`
   &lt;chr&gt;                       &lt;dbl&gt;                &lt;dbl&gt;        &lt;dbl&gt;
 1 January                      -3.4                 29.4          1.3
 2 February                     -0.4                 15.4          0.9
 3 March                        -1.7                 57.6          1.7
 4 april                         3.8                  3.2          0.8
 5 May                           5.1                 25.2          1.4
 6 June                         10.6                 52.4          1.1
 7 July                         13.1                 65            1  
 8 August                       12.8                 67.4          0.7
 9 September                     6.9                 79            1.2
10 October                       2.5                 18.2          0.8
11 November                     -2.2                  7.8          0.8
12 December                      1.5                 92            1.5</code></pre>
</div>
</div>
<section id="choose-the-right-delimiter" class="level4" data-number="7.5.1.1"><h4 data-number="7.5.1.1" class="anchored" data-anchor-id="choose-the-right-delimiter">
<span class="header-section-number">7.5.1.1</span> Choose the right delimiter</h4>
<p>The example above is rather straight forward, but you may experience some issues depending on the content of the CSV file. Relatively often, one tries to import CSV files wrongly assuming that <code>,</code> has been used as a delimiter. Here is what happens when doing this assumption for a file (<code>weather2.csv</code>) where <code>;</code> was in fact used as delimiter:</p>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">weather2</span> <span class="op">&lt;-</span> <span class="fu">read_delim</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/weather2.csv"</span>, </span>
<span>                       delim <span class="op">=</span> <span class="st">","</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: One or more parsing issues, see `problems()` for details</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 12 Columns: 1
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (1): month;temperature (Celsius);precipitation (mm);Wind (m/s)

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>The message <code>Column specification</code> tells you that the content of the whole CSV file has been transferred into one single column named <code>month;temperature (Celsius);precipitation (mm);Wind (m/s)</code> and recognized as of data type <code>character</code>. Accordingly, the object <code>weather2</code>, now visible in the tab <code>Environment</code> (see <a href="#fig-csv-env2">Figure&nbsp;<span>7.2</span></a>), is described as a tibble with 12 observations and only one variable.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-csv-env2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="figures/csv-env2.png" class="img-fluid figure-img" alt="Screenshot of the environment tab, which now also has weather2 which only has one variable" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">Figure 7.2: The <em>tibble</em> weather2 is now stored, but is wrongly formatted.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>The content of the resulting tibble is as follows:</p>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">weather2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 1
   `month;temperature (Celsius);precipitation (mm);Wind (m/s)`
   &lt;chr&gt;                                                      
 1 January;-3,4;29,4;1,3                                      
 2 February;-0,4;15,4;0,9                                     
 3 March;-1,7;57,6;1,7                                        
 4 april;3,8;3,2;0,8                                          
 5 May;5,1;25,2;1,4                                           
 6 June;10,6;52,4;1,1                                         
 7 July;13,1;65,0;1,0                                         
 8 August;12,8;67,4;0,7                                       
 9 September;6,9;79,0;1,2                                     
10 October;2,5;18,2;0,8                                       
11 November;-2,2;7,8;0,8                                      
12 December;1,5;92,0;1,5                                      </code></pre>
</div>
</div>
<p>This shows how important it is to review the data before importing it. A quick check with <code>read_lines('data/weather2.csv')</code> would have revealed the use of <code>;</code> as delimiter in <code>weather2.csv</code>, and you would have certainly used the follow code to import it.</p>
<div class="cell">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">weather2</span> <span class="op">&lt;-</span> <span class="fu">read_delim</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/weather2.csv"</span>, </span>
<span>                       delim <span class="op">=</span> <span class="st">";"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 12 Columns: 4
── Column specification ────────────────────────────────────────────────────────
Delimiter: ";"
chr (2): month, Wind (m/s)

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>Here, the message <code>Column specification</code> tells you that the content of the columns <code>month</code> and <code>Wind (m/s)</code> has been recognized as of data type <code>character</code>, and that the two other columns have been recognized as <code>number</code>. While <code>read_delim()</code> got things right about the number of variables, something went wrong with the variables as we could expect <code>Wind (m/s)</code> to be recognized as <code>double</code>. To find out about this issue we need to review the imported data in the object <code>weather2</code> and compare it to the original file <code>weather2.csv</code>.</p>
</section><section id="review-the-imported-data" class="level4" data-number="7.5.1.2"><h4 data-number="7.5.1.2" class="anchored" data-anchor-id="review-the-imported-data">
<span class="header-section-number">7.5.1.2</span> Review the imported data</h4>
<p>The example above shows the importance of carefully verifying that the imported data in R matches the original data set. The following figure compares the content of the file <code>weather2.csv</code> (<a href="#fig-comp-fig">Figure&nbsp;<span>7.3</span></a> left) to the content of the object <code>weather2</code> (<a href="#fig-comp-fig">Figure&nbsp;<span>7.3</span></a> right):</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-comp-fig" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="figures/comp.png" class="img-fluid figure-img" alt="Screenshots of the original text file with decimals separated by commas and the imported object in R, mostly without decimal separators" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">Figure 7.3: The data in the object does not match the data in the file.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Looking at the rows in both pictures, one can understand that all commas have simply been ignored, excepted those in the last column. This is a problem that may occur when the decimal separator used in the file is different from the decimal separator defined by your system (a.k.a locale). To solve that issue, you must impose the separator using <code>locale = locale(decimal_mark = ",")</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">weather3</span> <span class="op">&lt;-</span> <span class="fu">read_delim</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/weather2.csv"</span>, </span>
<span>                       delim <span class="op">=</span> <span class="st">";"</span>, </span>
<span>                       locale <span class="op">=</span> <span class="fu">locale</span><span class="op">(</span>decimal_mark <span class="op">=</span> <span class="st">","</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 12 Columns: 4
── Column specification ────────────────────────────────────────────────────────
Delimiter: ";"
chr (1): month
dbl (3): temperature (Celsius), precipitation (mm), Wind (m/s)

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>The last column is now recognized as <code>double</code> and the data in the object <code>weather3</code> matches the data in the file:</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="figures/comp2.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption"><em>The data in the object now matches the data in the file.</em></figcaption><p></p>
</figure>
</div>
</div>
</div>
</section></section><section id="read_csv" class="level3" data-number="7.5.2"><h3 data-number="7.5.2" class="anchored" data-anchor-id="read_csv">
<span class="header-section-number">7.5.2</span> read_csv()</h3>
<p>As we have seen in the section above, <code>read_delim()</code> can read CSV files where <code>,</code> and <code>;</code> are used as delimiters. <code>readr</code> also comes with other functions such as <code>read_csv()</code> and its twin <code>read_csv2()</code>. These are “clones” of <code>read_delim()</code> where the argument <code>delim =</code> is preset to <code>delim = ","</code> and <code>delim = ";"</code>, respectively. Thus, the only argument that is strictly required is <code>file = " "</code> to determine the path of the file.</p>
<p>Here are two examples. The first one shows the use of <code>read_csv()</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">weather_csv</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/weather.csv"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 12 Columns: 4
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (1): month
dbl (3): temperature (Celsius), precipitation (mm), Wind (m/s)

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>The resulting tibble looks correct:</p>
<div class="cell">
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">weather_csv</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 4
   month     `temperature (Celsius)` `precipitation (mm)` `Wind (m/s)`
   &lt;chr&gt;                       &lt;dbl&gt;                &lt;dbl&gt;        &lt;dbl&gt;
 1 January                      -3.4                 29.4          1.3
 2 February                     -0.4                 15.4          0.9
 3 March                        -1.7                 57.6          1.7
 4 april                         3.8                  3.2          0.8
 5 May                           5.1                 25.2          1.4
 6 June                         10.6                 52.4          1.1
 7 July                         13.1                 65            1  
 8 August                       12.8                 67.4          0.7
 9 September                     6.9                 79            1.2
10 October                       2.5                 18.2          0.8
11 November                     -2.2                  7.8          0.8
12 December                      1.5                 92            1.5</code></pre>
</div>
</div>
<p>The second one shows the use of <code>read_csv2()</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">weather_csv2</span> <span class="op">&lt;-</span> <span class="fu">read_csv2</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/weather2.csv"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ Using "','" as decimal and "'.'" as grouping mark. Use `read_delim()` for more control.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 12 Columns: 4
── Column specification ────────────────────────────────────────────────────────
Delimiter: ";"
chr (1): month
dbl (3): temperature (Celsius), precipitation (mm), Wind (m/s)

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>Note the message above <code>Column specification</code> that indicates which symbols <code>read_csv2()</code> has considered when importing the data. The resulting tibble looks correct:</p>
<div class="cell">
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">weather_csv2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 4
   month     `temperature (Celsius)` `precipitation (mm)` `Wind (m/s)`
   &lt;chr&gt;                       &lt;dbl&gt;                &lt;dbl&gt;        &lt;dbl&gt;
 1 January                      -3.4                 29.4          1.3
 2 February                     -0.4                 15.4          0.9
 3 March                        -1.7                 57.6          1.7
 4 april                         3.8                  3.2          0.8
 5 May                           5.1                 25.2          1.4
 6 June                         10.6                 52.4          1.1
 7 July                         13.1                 65            1  
 8 August                       12.8                 67.4          0.7
 9 September                     6.9                 79            1.2
10 October                       2.5                 18.2          0.8
11 November                     -2.2                  7.8          0.8
12 December                      1.5                 92            1.5</code></pre>
</div>
</div>
</section><section id="white-space-delimited-files" class="level3" data-number="7.5.3"><h3 data-number="7.5.3" class="anchored" data-anchor-id="white-space-delimited-files">
<span class="header-section-number">7.5.3</span> White space delimited files</h3>
<p>Some files have white space separating the columns. If a single tab is used then <code>read_delim()</code> will work with <code>delim = "\t"</code>. Sometimes multiple spaces are used so the columns line up, making the text file easy for humans to read. <code>read_delim()</code> will not work with these files as it expects a single delimiter. Instead we can use <code>read_table()</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">read_table</span><span class="op">(</span><span class="st">" Species   Value</span></span>
<span><span class="st">            Navicula       1</span></span>
<span><span class="st">            Cymbella       2"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  Species  Value
  &lt;chr&gt;    &lt;dbl&gt;
1 Navicula     1
2 Cymbella     2</code></pre>
</div>
</div>
<p>Another type of data you will sometimes see is the fixed width format. There are no delimiters, but each field has the same position in each row. These files can be imported with <code>read_fwf()</code>. Determining the position of each column can be painful unless you have good metadata.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Download the Mt Gonga <a href="https://raw.githubusercontent.com/biostats-r/biostats/main/WorkingInR/data/biomass2015_H.csv">plant biomass data</a> and import it.</p>
<details><summary>
Hint
</summary><code>read_delim</code>
</details>
</div>
</div>
</section><section id="useful-arguments" class="level3" data-number="7.5.4"><h3 data-number="7.5.4" class="anchored" data-anchor-id="useful-arguments">
<span class="header-section-number">7.5.4</span> Useful arguments</h3>
<p><code>read_delim()</code> and the other functions discussed above have a multitude of arguments that allow for adjusting the way data is read and displayed. Here we review a handful of them.</p>
<section id="n_max" class="level4" data-number="7.5.4.1"><h4 data-number="7.5.4.1" class="anchored" data-anchor-id="n_max">
<span class="header-section-number">7.5.4.1</span> n_max</h4>
<p><code>n_max</code> sets a limit to the number of <em>observations</em> to be read. Note that <code>n_max</code> does not consider the first row (header) of the data file as an observation.</p>
<div class="cell">
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">weather</span> <span class="op">&lt;-</span> <span class="fu">read_delim</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/weather.csv"</span>, </span>
<span>                      delim <span class="op">=</span> <span class="st">","</span>,</span>
<span>                      n_max <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 6 Columns: 4
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (1): month
dbl (3): temperature (Celsius), precipitation (mm), Wind (m/s)

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">weather</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  month    `temperature (Celsius)` `precipitation (mm)` `Wind (m/s)`
  &lt;chr&gt;                      &lt;dbl&gt;                &lt;dbl&gt;        &lt;dbl&gt;
1 January                     -3.4                 29.4          1.3
2 February                    -0.4                 15.4          0.9
3 March                       -1.7                 57.6          1.7
4 april                        3.8                  3.2          0.8
5 May                          5.1                 25.2          1.4
6 June                        10.6                 52.4          1.1</code></pre>
</div>
</div>
</section><section id="skip" class="level4" data-number="7.5.4.2"><h4 data-number="7.5.4.2" class="anchored" data-anchor-id="skip">
<span class="header-section-number">7.5.4.2</span> skip</h4>
<p>The argument <code>skip</code> may be used to skip rows when reading the data file.<br>
Be aware that:</p>
<ul>
<li>the header in the original data file counts as one row,</li>
<li>the first row that comes after those which have been skipped becomes the header for the resulting tibble.</li>
</ul>
<p>In the following example, we read the data file <code>weather.csv</code> and skip the first row:</p>
<div class="cell">
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">weather</span> <span class="op">&lt;-</span> <span class="fu">read_delim</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/weather.csv"</span>, </span>
<span>                      delim <span class="op">=</span> <span class="st">","</span>, </span>
<span>                      skip <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 11 Columns: 4
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (1): January
dbl (3): -3.4, 29.4, 1.3

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">weather</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 11 × 4
   January   `-3.4` `29.4` `1.3`
   &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
 1 February    -0.4   15.4   0.9
 2 March       -1.7   57.6   1.7
 3 april        3.8    3.2   0.8
 4 May          5.1   25.2   1.4
 5 June        10.6   52.4   1.1
 6 July        13.1   65     1  
 7 August      12.8   67.4   0.7
 8 September    6.9   79     1.2
 9 October      2.5   18.2   0.8
10 November    -2.2    7.8   0.8
11 December     1.5   92     1.5</code></pre>
</div>
</div>
<p>As expected, the first row (with the header) is skipped, and the data from the observation <code>January</code> have become the header of the tibble. The argument <code>col_names()</code> introduced below will be useful for solving this issue.</p>
</section><section id="col_names" class="level4" data-number="7.5.4.3"><h4 data-number="7.5.4.3" class="anchored" data-anchor-id="col_names">
<span class="header-section-number">7.5.4.3</span> col_names</h4>
<p>The argument <code>col_names</code> may be used to define the name of the variables/columns of the tibble. If you use <code>col_names = TRUE</code>, the first row of the data file defines the name of the variables.</p>
<div class="cell">
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">weather</span> <span class="op">&lt;-</span> <span class="fu">read_delim</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/weather.csv"</span>, </span>
<span>                      delim <span class="op">=</span> <span class="st">","</span>, </span>
<span>                      col_names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 12 Columns: 4
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (1): month
dbl (3): temperature (Celsius), precipitation (mm), Wind (m/s)

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">weather</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 4
   month     `temperature (Celsius)` `precipitation (mm)` `Wind (m/s)`
   &lt;chr&gt;                       &lt;dbl&gt;                &lt;dbl&gt;        &lt;dbl&gt;
 1 January                      -3.4                 29.4          1.3
 2 February                     -0.4                 15.4          0.9
 3 March                        -1.7                 57.6          1.7
 4 april                         3.8                  3.2          0.8
 5 May                           5.1                 25.2          1.4
 6 June                         10.6                 52.4          1.1
 7 July                         13.1                 65            1  
 8 August                       12.8                 67.4          0.7
 9 September                     6.9                 79            1.2
10 October                       2.5                 18.2          0.8
11 November                     -2.2                  7.8          0.8
12 December                      1.5                 92            1.5</code></pre>
</div>
</div>
<p>If you use <code>col_names = FALSE</code>, the first row of the data file will be the first observation in the resulting tibble, and the variables will be named <code>X1</code>, <code>X2</code>, etc.</p>
<div class="cell">
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">weather</span> <span class="op">&lt;-</span> <span class="fu">read_delim</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/weather.csv"</span>, </span>
<span>                      delim <span class="op">=</span> <span class="st">","</span>, </span>
<span>                      col_names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 13 Columns: 4
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (4): X1, X2, X3, X4

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">weather</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 13 × 4
   X1        X2                    X3                 X4        
   &lt;chr&gt;     &lt;chr&gt;                 &lt;chr&gt;              &lt;chr&gt;     
 1 month     temperature (Celsius) precipitation (mm) Wind (m/s)
 2 January   -3.4                  29.4               1.3       
 3 February  -0.4                  15.4               0.9       
 4 March     -1.7                  57.6               1.7       
 5 april     3.8                   3.2                0.8       
 6 May       5.1                   25.2               1.4       
 7 June      10.6                  52.4               1.1       
 8 July      13.1                  65.0               1.0       
 9 August    12.8                  67.4               0.7       
10 September 6.9                   79.0               1.2       
11 October   2.5                   18.2               0.8       
12 November  -2.2                  7.8                0.8       
13 December  1.5                   92.0               1.5       </code></pre>
</div>
</div>
<p><code>col_names =</code> may also be followed by the actual variable names that you want to use. In that case, write <code>col_names = c()</code> and list the names between the parentheses. Be aware that:</p>
<ul>
<li>the names that you input will be placed on top of the tibble,</li>
<li>the header in the original data file will become the first row of the resulting tibble. Here is an example:</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">weather</span> <span class="op">&lt;-</span> <span class="fu">read_delim</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/weather.csv"</span>, </span>
<span>                      delim <span class="op">=</span> <span class="st">","</span>, </span>
<span>                      col_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Month"</span>, <span class="st">"Temp"</span>, <span class="st">"Precip"</span>, <span class="st">"Wind"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 13 Columns: 4
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (4): Month, Temp, Precip, Wind

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">weather</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 13 × 4
   Month     Temp                  Precip             Wind      
   &lt;chr&gt;     &lt;chr&gt;                 &lt;chr&gt;              &lt;chr&gt;     
 1 month     temperature (Celsius) precipitation (mm) Wind (m/s)
 2 January   -3.4                  29.4               1.3       
 3 February  -0.4                  15.4               0.9       
 4 March     -1.7                  57.6               1.7       
 5 april     3.8                   3.2                0.8       
 6 May       5.1                   25.2               1.4       
 7 June      10.6                  52.4               1.1       
 8 July      13.1                  65.0               1.0       
 9 August    12.8                  67.4               0.7       
10 September 6.9                   79.0               1.2       
11 October   2.5                   18.2               0.8       
12 November  -2.2                  7.8                0.8       
13 December  1.5                   92.0               1.5       </code></pre>
</div>
</div>
</section><section id="col_types" class="level4" data-number="7.5.4.4"><h4 data-number="7.5.4.4" class="anchored" data-anchor-id="col_types">
<span class="header-section-number">7.5.4.4</span> col_types</h4>
<p>The argument <code>col_types</code> may be used to modify the data type of the variables. This is useful for example when you need to set a variable as <code>factor</code> whereas R has defined it as <code>character</code>. Here is an example with three simple variables.</p>
<div class="cell">
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">counts</span> <span class="op">&lt;-</span> <span class="fu">read_delim</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/groups.csv"</span>, </span>
<span>                     delim <span class="op">=</span> <span class="st">","</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 9 Columns: 3
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (1): group
dbl (2): ID, count

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>As the message clearly indicates, the first and last variables are recognized as <code>double</code> (i.e.&nbsp;<code>numeric</code>) while the second one is recognized as <code>character</code>. The tibble in the object <code>counts</code> displays as follows:</p>
<div class="cell">
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">counts</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 3
     ID group count
  &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;
1     1 A         5
2     2 A         3
3     3 A         2
4     4 B         4
5     5 B         5
6     6 B         8
7     7 C         1
8     8 C         2
9     9 C         9</code></pre>
</div>
</div>
<p>Let’s use <code>col_types = cols()</code> to manually set the data types to <code>double</code>, <code>factor</code> and <code>integer</code>, respectively.</p>
<div class="cell">
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">counts</span> <span class="op">&lt;-</span> <span class="fu">read_delim</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/groups.csv"</span>, </span>
<span>                     delim <span class="op">=</span> <span class="st">","</span>, </span>
<span>                     col_types <span class="op">=</span> <span class="fu">cols</span><span class="op">(</span><span class="fu">col_double</span><span class="op">(</span><span class="op">)</span>, <span class="fu">col_factor</span><span class="op">(</span><span class="op">)</span>, <span class="fu">col_integer</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now the tibble displays like this, with the correct data types for each column:</p>
<div class="cell">
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">counts</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 3
     ID group count
  &lt;dbl&gt; &lt;fct&gt; &lt;int&gt;
1     1 A         5
2     2 A         3
3     3 A         2
4     4 B         4
5     5 B         5
6     6 B         8
7     7 C         1
8     8 C         2
9     9 C         9</code></pre>
</div>
</div>
<p>If you only need to modify one or a few variables, you must name it/them when writing the code:</p>
<div class="cell">
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">counts</span> <span class="op">&lt;-</span> <span class="fu">read_delim</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/groups.csv"</span>, </span>
<span>                     delim <span class="op">=</span> <span class="st">","</span>, </span>
<span>                     col_types <span class="op">=</span> <span class="fu">cols</span><span class="op">(</span>group <span class="op">=</span> <span class="fu">col_factor</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The tibble displays like this:</p>
<div class="cell">
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">counts</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 3
     ID group count
  &lt;dbl&gt; &lt;fct&gt; &lt;dbl&gt;
1     1 A         5
2     2 A         3
3     3 A         2
4     4 B         4
5     5 B         5
6     6 B         8
7     7 C         1
8     8 C         2
9     9 C         9</code></pre>
</div>
</div>
<p>Note that <code>col_types</code> is particularly useful when importing tabular data that includes formatted dates. Dates are usually recognized as <code>character</code> when their format does not match the expected format set as default (locale, etc). In the following example, dates entered as <code>yyyy-mm-dd</code> in the last column are recognized as of type <code>date</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">countsdates</span> <span class="op">&lt;-</span> <span class="fu">read_delim</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/groups-dates1.csv"</span>, </span>
<span>                     delim <span class="op">=</span> <span class="st">","</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 9 Columns: 4
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr  (1): group
dbl  (2): ID, count
date (1): date

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>However, in the example below, dates entered as <code>dd-mm-yyyy</code> are converted to <code>character</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">countsdates</span> <span class="op">&lt;-</span> <span class="fu">read_delim</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/groups-dates2.csv"</span>, </span>
<span>                     delim <span class="op">=</span> <span class="st">","</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 9 Columns: 4
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (2): group, date
dbl (2): ID, count

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>To solve this issue, add the function <code>col_date()</code> in <code>cols()</code> to help R understand how dates are formatted and shall be read.</p>
<div class="cell">
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">countsdates</span> <span class="op">&lt;-</span> <span class="fu">read_delim</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"data/groups-dates2.csv"</span>, </span>
<span>                     delim <span class="op">=</span> <span class="st">","</span>,</span>
<span>                     col_types <span class="op">=</span> <span class="fu">cols</span><span class="op">(</span>date <span class="op">=</span> <span class="fu">col_date</span><span class="op">(</span><span class="st">"%d-%m-%Y"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The result is the following tibble now correctly formatted:</p>
<div class="cell">
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">countsdates</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 4
     ID group count date      
  &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;date&gt;    
1     1 A         5 2021-03-01
2     2 A         3 2021-03-02
3     3 A         2 2021-03-03
4     4 B         4 2021-03-01
5     5 B         5 2021-03-02
6     6 B         8 2021-03-03
7     7 C         1 2021-03-01
8     8 C         2 2021-03-02
9     9 C         9 2021-03-03</code></pre>
</div>
</div>
<p>You will find the whole list of <code>cols()</code> parameters for <code>col_types</code> <a href="https://readr.tidyverse.org/reference/cols.html" target="_blank">here</a>.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Download the midge data from <a href="https://www.ncei.noaa.gov/pub/data/paleo/insecta/chironomidae/northamerica/usa/alaska/alaska2011midge-t.txt">https://www.ncei.noaa.gov/pub/data/paleo/insecta/chironomidae/northamerica/usa/alaska/alaska2011midge-t.txt</a> and import part “3a. Clegg et al.&nbsp;2011 Hudson Lake Midge Temperature Data”</p>
<details><summary>
Hint
</summary>
What is the delimiter? Choose an suitable <code>read_*()</code> function <code>skip</code> and <code>n_max</code> argument can be useful.
</details>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Further Reading
</div>
</div>
<div class="callout-body-container callout-body">
<p>You may find the following links useful:</p>
<ul>
<li><a href="https://r4ds.had.co.nz/data-import.html" target="_blank">R for Data Science - Data import</a></li>
<li><a href="https://github.com/rstudio/cheatsheets/raw/master/data-import.pdf" target="_blank">Data Import Cheatsheet - readr/tidyr</a></li>
<li><a href="https://readr.tidyverse.org/" target="_blank">readr</a></li>
</ul>
</div>
</div>
</section></section>

<!-- -->

<div class="no-row-height column-margin column-container"><section id="contributors" class="level3 unlisted unnumbered"><h3 class="unlisted unnumbered anchored" data-anchor-id="contributors">Contributors</h3>
<ul>
<li>Jonathan Soulé</li>
<li>Aud Halbritter</li>
<li>Richard Telford</li>
</ul></section></div></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./002_First_Steps_in_R.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">First steps in R</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./010-pipes.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Pipes</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb66" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="in">``` {r setup, include=FALSE}</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"R/setup.R"</span>)</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a><span class="fu"># Importing data in R</span></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>R can import data from files in many different formats. </span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>For example:</span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a><span class="ss"> - </span>csv files with the <span class="in">`readr`</span> package</span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a><span class="ss"> - </span>excel files with the <span class="in">`readxl`</span> package</span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a><span class="ss"> - </span>xlm files with the <span class="in">`xml2`</span> package</span>
<span id="cb66-13"><a href="#cb66-13" aria-hidden="true" tabindex="-1"></a><span class="ss"> - </span>netcdf files with the <span class="in">`ncdf4`</span> package</span>
<span id="cb66-14"><a href="#cb66-14" aria-hidden="true" tabindex="-1"></a><span class="ss"> - </span>shapefiles with the <span class="in">`sf`</span> package</span>
<span id="cb66-15"><a href="#cb66-15" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb66-16"><a href="#cb66-16" aria-hidden="true" tabindex="-1"></a>In this chapter, you will learn how to import tabular data from an external text file as a tibble.</span>
<span id="cb66-17"><a href="#cb66-17" aria-hidden="true" tabindex="-1"></a>We will use functions from the package <span class="in">`readr`</span> which is part of the <span class="in">`tidyverse`</span> package, so make sure that you have activated it with <span class="in">`library(tidyverse)`</span>. </span>
<span id="cb66-18"><a href="#cb66-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-19"><a href="#cb66-19" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb66-20"><a href="#cb66-20" aria-hidden="true" tabindex="-1"></a><span class="fu">## Before we start</span></span>
<span id="cb66-21"><a href="#cb66-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-22"><a href="#cb66-22" aria-hidden="true" tabindex="-1"></a>You must be familiar with tibbles and data types (such as numeric, character, etc).</span>
<span id="cb66-23"><a href="#cb66-23" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb66-24"><a href="#cb66-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-25"><a href="#cb66-25" aria-hidden="true" tabindex="-1"></a><span class="fu">## What are tabular data? </span></span>
<span id="cb66-26"><a href="#cb66-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-27"><a href="#cb66-27" aria-hidden="true" tabindex="-1"></a>Tabular data are data that is organized in the form of a table with rows and columns. </span>
<span id="cb66-28"><a href="#cb66-28" aria-hidden="true" tabindex="-1"></a>A table often has a header, i.e. an additional row that displays variable names.</span>
<span id="cb66-29"><a href="#cb66-29" aria-hidden="true" tabindex="-1"></a>Here is an example of a formatted table with header:</span>
<span id="cb66-30"><a href="#cb66-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-31"><a href="#cb66-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-32"><a href="#cb66-32" aria-hidden="true" tabindex="-1"></a><span class="in">``` {r}</span></span>
<span id="cb66-33"><a href="#cb66-33" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-kable</span></span>
<span id="cb66-34"><a href="#cb66-34" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb66-35"><a href="#cb66-35" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb66-36"><a href="#cb66-36" aria-hidden="true" tabindex="-1"></a>table <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="at">file =</span> <span class="st">"data/weather.csv"</span>, <span class="at">delim =</span> <span class="st">","</span>)</span>
<span id="cb66-37"><a href="#cb66-37" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(table, <span class="at">caption  =</span><span class="st">"_A simple table with header_"</span>)</span>
<span id="cb66-38"><a href="#cb66-38" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-39"><a href="#cb66-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-40"><a href="#cb66-40" aria-hidden="true" tabindex="-1"></a>In this example, the table consists of 4 variables (columns) and 12 observations (rows) in addition to the header (top row). </span>
<span id="cb66-41"><a href="#cb66-41" aria-hidden="true" tabindex="-1"></a>All cell contents are clearly delimited.  </span>
<span id="cb66-42"><a href="#cb66-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-43"><a href="#cb66-43" aria-hidden="true" tabindex="-1"></a>Below is an example of a *non*-tabular dataset. </span>
<span id="cb66-44"><a href="#cb66-44" aria-hidden="true" tabindex="-1"></a>This dataset is a list of profiles with recurrent fields (<span class="in">`Name`</span>, <span class="in">`Position`</span>, <span class="in">`Institution`</span>). </span>
<span id="cb66-45"><a href="#cb66-45" aria-hidden="true" tabindex="-1"></a>Each profile contains three lines with a <span class="in">`field:value`</span> pair. </span>
<span id="cb66-46"><a href="#cb66-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-47"><a href="#cb66-47" aria-hidden="true" tabindex="-1"></a><span class="in">```{r nontabular, echo = FALSE}</span></span>
<span id="cb66-48"><a href="#cb66-48" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">readLines</span>(<span class="st">'data/profile.txt'</span>), <span class="at">sep =</span> <span class="st">'</span><span class="sc">\n</span><span class="st">'</span>)</span>
<span id="cb66-49"><a href="#cb66-49" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-50"><a href="#cb66-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-51"><a href="#cb66-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-52"><a href="#cb66-52" aria-hidden="true" tabindex="-1"></a><span class="fu">## About tidy data</span></span>
<span id="cb66-53"><a href="#cb66-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-54"><a href="#cb66-54" aria-hidden="true" tabindex="-1"></a>Sooner or later, you will read about *tidy data* which is a standard, consistent way to organize tabular data in R. </span>
<span id="cb66-55"><a href="#cb66-55" aria-hidden="true" tabindex="-1"></a>Briefly, tidy data follows a short series of rules:</span>
<span id="cb66-56"><a href="#cb66-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-57"><a href="#cb66-57" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span>each variable in the data set is presented in a specific column,</span>
<span id="cb66-58"><a href="#cb66-58" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span>each observation in the data set is presented in a specific row,</span>
<span id="cb66-59"><a href="#cb66-59" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span>each cell at the intersection of a row and a column contains a single value.</span>
<span id="cb66-60"><a href="#cb66-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-61"><a href="#cb66-61" aria-hidden="true" tabindex="-1"></a>The following figure illustrates well these rules.</span>
<span id="cb66-62"><a href="#cb66-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-63"><a href="#cb66-63" aria-hidden="true" tabindex="-1"></a><span class="in">``` {r}</span></span>
<span id="cb66-64"><a href="#cb66-64" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: threerules</span></span>
<span id="cb66-65"><a href="#cb66-65" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb66-66"><a href="#cb66-66" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: 'In a tidy dataset, variables are in columns, observations are in rows, and values are in cells. --- Source: [R for Data Science](https://r4ds.had.co.nz/tidy-data.html)'</span></span>
<span id="cb66-67"><a href="#cb66-67" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-alt: Schematic diagram showing that variables should be in columns, observations in rows and each cell should contain a single value</span></span>
<span id="cb66-68"><a href="#cb66-68" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "100%"</span></span>
<span id="cb66-69"><a href="#cb66-69" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"figures/tidy1.png"</span>)</span>
<span id="cb66-70"><a href="#cb66-70" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-71"><a href="#cb66-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-72"><a href="#cb66-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-73"><a href="#cb66-73" aria-hidden="true" tabindex="-1"></a>The dataset presented in @tbl-kable respects all three rules, and is thus a tidy dataset.  </span>
<span id="cb66-74"><a href="#cb66-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-75"><a href="#cb66-75" aria-hidden="true" tabindex="-1"></a>On the contrary, the following dataset is *not* tidy:</span>
<span id="cb66-76"><a href="#cb66-76" aria-hidden="true" tabindex="-1"></a><span class="in">``` {r}</span></span>
<span id="cb66-77"><a href="#cb66-77" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tidy</span></span>
<span id="cb66-78"><a href="#cb66-78" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb66-79"><a href="#cb66-79" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb66-80"><a href="#cb66-80" aria-hidden="true" tabindex="-1"></a>table2 <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="at">file =</span> <span class="st">"data/nottidy.csv"</span>, <span class="at">delim =</span> <span class="st">";"</span>)</span>
<span id="cb66-81"><a href="#cb66-81" aria-hidden="true" tabindex="-1"></a>rmarkdown<span class="sc">::</span><span class="fu">paged_table</span>(table2)</span>
<span id="cb66-82"><a href="#cb66-82" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-83"><a href="#cb66-83" aria-hidden="true" tabindex="-1"></a>Indeed, at least one of the rules is broken since columns display data matching several variables (Date, time, Weather, etc).   </span>
<span id="cb66-84"><a href="#cb66-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-85"><a href="#cb66-85" aria-hidden="true" tabindex="-1"></a>Importing data from a file containing tidy data is a great way to start your work, but it is *not* a prerequisite to data import.</span>
<span id="cb66-86"><a href="#cb66-86" aria-hidden="true" tabindex="-1"></a>As long as your data is tabular, you will be able to import it in R, and later you will have the chance to tidy it (see @sec-tidying-data-with-tidyr).</span>
<span id="cb66-87"><a href="#cb66-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-88"><a href="#cb66-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-89"><a href="#cb66-89" aria-hidden="true" tabindex="-1"></a><span class="fu">## File formats</span></span>
<span id="cb66-90"><a href="#cb66-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-91"><a href="#cb66-91" aria-hidden="true" tabindex="-1"></a>Tabular data may be stored in files using various formats, spreadsheets, etc. </span>
<span id="cb66-92"><a href="#cb66-92" aria-hidden="true" tabindex="-1"></a>The most common spreadsheets store data in their own, proprietary file format, e.g. MS Excel which produces <span class="in">`.xls`</span> and <span class="in">`.xlsx`</span> files.</span>
<span id="cb66-93"><a href="#cb66-93" aria-hidden="true" tabindex="-1"></a>Such formats may be a limitation to data management in R.</span>
<span id="cb66-94"><a href="#cb66-94" aria-hidden="true" tabindex="-1"></a>Simpler formats such as plain text files with <span class="in">`.txt`</span> or <span class="in">`.csv`</span> should always be preferred when saving or exporting data from spreadsheets.</span>
<span id="cb66-95"><a href="#cb66-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-96"><a href="#cb66-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-97"><a href="#cb66-97" aria-hidden="true" tabindex="-1"></a><span class="fu">### The CSV format</span></span>
<span id="cb66-98"><a href="#cb66-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-99"><a href="#cb66-99" aria-hidden="true" tabindex="-1"></a>One of the most common format for storing tabular data in plain text files is CSV, which stands for **C**omma-**S**eparated **V**alues.</span>
<span id="cb66-100"><a href="#cb66-100" aria-hidden="true" tabindex="-1"></a>It is this format that we are going to deal with here.</span>
<span id="cb66-101"><a href="#cb66-101" aria-hidden="true" tabindex="-1"></a>Note that CSV-formatted files often have (but not always) a <span class="in">`.csv`</span> extension. They may also have a <span class="in">`.txt`</span> extension.  </span>
<span id="cb66-102"><a href="#cb66-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-103"><a href="#cb66-103" aria-hidden="true" tabindex="-1"></a>In a CSV-formatted file, the data is stored in a similar manner to this: </span>
<span id="cb66-104"><a href="#cb66-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-105"><a href="#cb66-105" aria-hidden="true" tabindex="-1"></a><span class="in">``` {r csv-data, echo=FALSE, fig.cap="_Contents of a CSV file viewed in the text editor Notepad_", out.width="75%"}</span></span>
<span id="cb66-106"><a href="#cb66-106" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"figures/csv.png"</span>)</span>
<span id="cb66-107"><a href="#cb66-107" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-108"><a href="#cb66-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-109"><a href="#cb66-109" aria-hidden="true" tabindex="-1"></a>For information, this file matches the example in @tbl-kable.</span>
<span id="cb66-110"><a href="#cb66-110" aria-hidden="true" tabindex="-1"></a>Each line corresponds to a row in the table (including header) and cell contents are separated with a comma <span class="in">`,`</span>.</span>
<span id="cb66-111"><a href="#cb66-111" aria-hidden="true" tabindex="-1"></a>Note that the period symbol <span class="in">`.`</span> is used as decimal separator.</span>
<span id="cb66-112"><a href="#cb66-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-113"><a href="#cb66-113" aria-hidden="true" tabindex="-1"></a>The use of commas in the CSV format is however not universal. </span>
<span id="cb66-114"><a href="#cb66-114" aria-hidden="true" tabindex="-1"></a>Other symbols such as a semi-colon <span class="in">`;`</span> may be used as a delimiter.</span>
<span id="cb66-115"><a href="#cb66-115" aria-hidden="true" tabindex="-1"></a>This is the case in several European countries where commas are decimal separator.</span>
<span id="cb66-116"><a href="#cb66-116" aria-hidden="true" tabindex="-1"></a>Here is the same data set as above, this time in the European format:</span>
<span id="cb66-117"><a href="#cb66-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-118"><a href="#cb66-118" aria-hidden="true" tabindex="-1"></a><span class="in">```{r csv2-data, echo=FALSE, fig.cap="_Contents of another CSV file_", out.width="75%"}</span></span>
<span id="cb66-119"><a href="#cb66-119" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"figures/csv2.png"</span>)</span>
<span id="cb66-120"><a href="#cb66-120" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-121"><a href="#cb66-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-122"><a href="#cb66-122" aria-hidden="true" tabindex="-1"></a>Finally, you should know that there exist other delimiter-separated formats, in which delimiters like <span class="in">`|`</span> or tabs (coded as <span class="in">`\t`</span>) replace commas. </span>
<span id="cb66-123"><a href="#cb66-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-124"><a href="#cb66-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-125"><a href="#cb66-125" aria-hidden="true" tabindex="-1"></a><span class="fu">## Know your data!</span></span>
<span id="cb66-126"><a href="#cb66-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-127"><a href="#cb66-127" aria-hidden="true" tabindex="-1"></a>There are several reasons why different symbols are used in CSV files.</span>
<span id="cb66-128"><a href="#cb66-128" aria-hidden="true" tabindex="-1"></a>Among these reasons are:</span>
<span id="cb66-129"><a href="#cb66-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-130"><a href="#cb66-130" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span>locale, i.e. the parameters that define the language and regional settings (currency, time and date, number format setting) in use on your machine,</span>
<span id="cb66-131"><a href="#cb66-131" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span>software-based preferences, the settings which are defined _by default_ by the software that you have used to punch your data,</span>
<span id="cb66-132"><a href="#cb66-132" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span>user-based preferences, the settings that _you_ choose when punching or saving data.</span>
<span id="cb66-133"><a href="#cb66-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-134"><a href="#cb66-134" aria-hidden="true" tabindex="-1"></a>It is thus very important to know what your CSV file is made of.</span>
<span id="cb66-135"><a href="#cb66-135" aria-hidden="true" tabindex="-1"></a>We therefore recommend to systematically inspect your data file before importing in R.</span>
<span id="cb66-136"><a href="#cb66-136" aria-hidden="true" tabindex="-1"></a>One way to do it is to open the file with <span class="in">`read_lines('file.txt')`</span> (the <span class="in">`n_max`</span> argument is useful if there is lots of data) and determine:</span>
<span id="cb66-137"><a href="#cb66-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-138"><a href="#cb66-138" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span>which symbol is used as decimal separator (<span class="in">`,`</span> or <span class="in">`.`</span>)</span>
<span id="cb66-139"><a href="#cb66-139" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span>which symbol is used as delimiter (<span class="in">`,`</span> or <span class="in">`;`</span>)</span>
<span id="cb66-140"><a href="#cb66-140" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span>any extra lines of data that need removing</span>
<span id="cb66-141"><a href="#cb66-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-142"><a href="#cb66-142" aria-hidden="true" tabindex="-1"></a>Here is our previous example:</span>
<span id="cb66-143"><a href="#cb66-143" aria-hidden="true" tabindex="-1"></a><span class="in">```{r readLines, echo = TRUE}</span></span>
<span id="cb66-144"><a href="#cb66-144" aria-hidden="true" tabindex="-1"></a><span class="fu">read_lines</span>(<span class="st">'data/weather.csv'</span>)</span>
<span id="cb66-145"><a href="#cb66-145" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-146"><a href="#cb66-146" aria-hidden="true" tabindex="-1"></a>In this file, the decimal separator is <span class="in">`.`</span> and the delimiter is <span class="in">`,`</span>.</span>
<span id="cb66-147"><a href="#cb66-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-148"><a href="#cb66-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-149"><a href="#cb66-149" aria-hidden="true" tabindex="-1"></a><span class="fu">## Import with readr</span></span>
<span id="cb66-150"><a href="#cb66-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-151"><a href="#cb66-151" aria-hidden="true" tabindex="-1"></a><span class="in">`readr`</span> comes with several functions that read data files. </span>
<span id="cb66-152"><a href="#cb66-152" aria-hidden="true" tabindex="-1"></a>Among them are:</span>
<span id="cb66-153"><a href="#cb66-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-154"><a href="#cb66-154" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span><span class="in">`read_delim()`</span></span>
<span id="cb66-155"><a href="#cb66-155" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span><span class="in">`read_csv()`</span></span>
<span id="cb66-156"><a href="#cb66-156" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span><span class="in">`read_csv2()`</span></span>
<span id="cb66-157"><a href="#cb66-157" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span><span class="in">`read_table()`</span></span>
<span id="cb66-158"><a href="#cb66-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-159"><a href="#cb66-159" aria-hidden="true" tabindex="-1"></a>We will focus essentially on <span class="in">`read_delim()`</span> as it is a general function that can import all the formats. </span>
<span id="cb66-160"><a href="#cb66-160" aria-hidden="true" tabindex="-1"></a><span class="in">`read_csv()`</span> and <span class="in">`read_csv2()`</span> are more specific functions which are preset to import CSV-formatted files in which a comma <span class="in">`,`</span> or a semi-colon <span class="in">`;`</span> is defined as delimiter, respectively.</span>
<span id="cb66-161"><a href="#cb66-161" aria-hidden="true" tabindex="-1"></a><span class="in">`read_delim()`</span> reads white-space delimited files.</span>
<span id="cb66-162"><a href="#cb66-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-163"><a href="#cb66-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-164"><a href="#cb66-164" aria-hidden="true" tabindex="-1"></a><span class="fu">### read_delim()</span></span>
<span id="cb66-165"><a href="#cb66-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-166"><a href="#cb66-166" aria-hidden="true" tabindex="-1"></a><span class="in">`read_delim()`</span> is a simple function that does several things at once. </span>
<span id="cb66-167"><a href="#cb66-167" aria-hidden="true" tabindex="-1"></a>First, it finds and reads the file to import. </span>
<span id="cb66-168"><a href="#cb66-168" aria-hidden="true" tabindex="-1"></a>Then it looks at the first 1000 rows of the file and guesses the number of variables and rows, and the data type for each variable. </span>
<span id="cb66-169"><a href="#cb66-169" aria-hidden="true" tabindex="-1"></a>Finally, it displays the data as a tibble keeping track of the order of both the columns and rows, and the nature of the data.</span>
<span id="cb66-170"><a href="#cb66-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-171"><a href="#cb66-171" aria-hidden="true" tabindex="-1"></a>The function does not automatically *store* the data after reading the file. </span>
<span id="cb66-172"><a href="#cb66-172" aria-hidden="true" tabindex="-1"></a>This is why the tibble produced by <span class="in">`read_delim()`</span> must be assigned to an object using <span class="in">`&lt;-`</span>.  </span>
<span id="cb66-173"><a href="#cb66-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-174"><a href="#cb66-174" aria-hidden="true" tabindex="-1"></a><span class="in">`read_delim()`</span> has two main mandatory arguments:</span>
<span id="cb66-175"><a href="#cb66-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-176"><a href="#cb66-176" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span><span class="in">`file = " "`</span> which defines where to find the data file,</span>
<span id="cb66-177"><a href="#cb66-177" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span><span class="in">`delim = " "`</span> which defines the symbol used as delimiter.</span>
<span id="cb66-178"><a href="#cb66-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-179"><a href="#cb66-179" aria-hidden="true" tabindex="-1"></a>When searching for the file, R/RStudio uses the location of the current RStudio project as a root. </span>
<span id="cb66-180"><a href="#cb66-180" aria-hidden="true" tabindex="-1"></a>As a consequence, you may simply write the file name if the file is in the same folder as your <span class="in">`.Rproj`</span> file. </span>
<span id="cb66-181"><a href="#cb66-181" aria-hidden="true" tabindex="-1"></a>Alternatively, write <span class="in">`[subfolder]/[filename]`</span> if the file is in a subfolder.</span>
<span id="cb66-182"><a href="#cb66-182" aria-hidden="true" tabindex="-1"></a>For more info about RStudio projects, read section @sec-working-project.</span>
<span id="cb66-183"><a href="#cb66-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-184"><a href="#cb66-184" aria-hidden="true" tabindex="-1"></a>In the following example, we import the file <span class="in">`weather.csv`</span> located in the subfolder <span class="in">`data`</span> of the current RStudio project into the object <span class="in">`weather`</span>. </span>
<span id="cb66-185"><a href="#cb66-185" aria-hidden="true" tabindex="-1"></a>In <span class="in">`weather.csv`</span>, the delimiter is <span class="in">`,`</span> and the decimal separator is <span class="in">`.`</span></span>
<span id="cb66-186"><a href="#cb66-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-187"><a href="#cb66-187" aria-hidden="true" tabindex="-1"></a><span class="in">```{r delim-csv, echo=TRUE} </span></span>
<span id="cb66-188"><a href="#cb66-188" aria-hidden="true" tabindex="-1"></a>weather <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="at">file =</span> <span class="st">"data/weather.csv"</span>, </span>
<span id="cb66-189"><a href="#cb66-189" aria-hidden="true" tabindex="-1"></a>                      <span class="at">delim =</span> <span class="st">","</span>)</span>
<span id="cb66-190"><a href="#cb66-190" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-191"><a href="#cb66-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-192"><a href="#cb66-192" aria-hidden="true" tabindex="-1"></a>When the function is executed, the console shows a short series of warnings and messages.</span>
<span id="cb66-193"><a href="#cb66-193" aria-hidden="true" tabindex="-1"></a>In the frame above, the message <span class="in">`Column specification`</span> tells you that the content of the column <span class="in">`month`</span> has been recognized as of data type <span class="in">`character`</span>, and that the three other columns have been recognized as <span class="in">`double`</span> (which is similar to <span class="in">`numeric`</span>).  </span>
<span id="cb66-194"><a href="#cb66-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-195"><a href="#cb66-195" aria-hidden="true" tabindex="-1"></a>Now the tibble <span class="in">`weather`</span> is available in R as you may see in the tab <span class="in">`Environment`</span> (see @fig-csv-env). </span>
<span id="cb66-196"><a href="#cb66-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-197"><a href="#cb66-197" aria-hidden="true" tabindex="-1"></a><span class="in">``` {r} </span></span>
<span id="cb66-198"><a href="#cb66-198" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-csv-env</span></span>
<span id="cb66-199"><a href="#cb66-199" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb66-200"><a href="#cb66-200" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: The _tibble_ weather is now stored in R.</span></span>
<span id="cb66-201"><a href="#cb66-201" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-alt: Screenshot of the environment tab showing one object "weather" with 12 obsevations and 4 variables.</span></span>
<span id="cb66-202"><a href="#cb66-202" aria-hidden="true" tabindex="-1"></a><span class="co">#| out-width: "100%"</span></span>
<span id="cb66-203"><a href="#cb66-203" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"figures/csv-env.png"</span>)</span>
<span id="cb66-204"><a href="#cb66-204" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-205"><a href="#cb66-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-206"><a href="#cb66-206" aria-hidden="true" tabindex="-1"></a>You can display the table as follows:</span>
<span id="cb66-207"><a href="#cb66-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-208"><a href="#cb66-208" aria-hidden="true" tabindex="-1"></a><span class="in">```{r weather, echo=TRUE} </span></span>
<span id="cb66-209"><a href="#cb66-209" aria-hidden="true" tabindex="-1"></a>weather</span>
<span id="cb66-210"><a href="#cb66-210" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-211"><a href="#cb66-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-212"><a href="#cb66-212" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Choose the right delimiter</span></span>
<span id="cb66-213"><a href="#cb66-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-214"><a href="#cb66-214" aria-hidden="true" tabindex="-1"></a>The example above is rather straight forward, but you may experience some issues depending on the content of the CSV file.</span>
<span id="cb66-215"><a href="#cb66-215" aria-hidden="true" tabindex="-1"></a>Relatively often, one tries to import CSV files wrongly assuming that <span class="in">`,`</span> has been used as a delimiter.</span>
<span id="cb66-216"><a href="#cb66-216" aria-hidden="true" tabindex="-1"></a>Here is what happens when doing this assumption for a file (<span class="in">`weather2.csv`</span>) where <span class="in">`;`</span> was in fact used as delimiter:</span>
<span id="cb66-217"><a href="#cb66-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-218"><a href="#cb66-218" aria-hidden="true" tabindex="-1"></a><span class="in">```{r delim-csv2, echo=TRUE} </span></span>
<span id="cb66-219"><a href="#cb66-219" aria-hidden="true" tabindex="-1"></a>weather2 <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="at">file =</span> <span class="st">"data/weather2.csv"</span>, </span>
<span id="cb66-220"><a href="#cb66-220" aria-hidden="true" tabindex="-1"></a>                       <span class="at">delim =</span> <span class="st">","</span>)</span>
<span id="cb66-221"><a href="#cb66-221" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-222"><a href="#cb66-222" aria-hidden="true" tabindex="-1"></a>The message <span class="in">`Column specification`</span> tells you that the content of the whole CSV file has been transferred into one single column named <span class="in">`month;temperature (Celsius);precipitation (mm);Wind (m/s)`</span> and recognized as of data type <span class="in">`character`</span>.</span>
<span id="cb66-223"><a href="#cb66-223" aria-hidden="true" tabindex="-1"></a>Accordingly, the object <span class="in">`weather2`</span>, now visible in the tab <span class="in">`Environment`</span> (see @fig-csv-env2), is described as a tibble with 12 observations and only one variable.</span>
<span id="cb66-224"><a href="#cb66-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-225"><a href="#cb66-225" aria-hidden="true" tabindex="-1"></a><span class="in">``` {r}</span></span>
<span id="cb66-226"><a href="#cb66-226" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-csv-env2</span></span>
<span id="cb66-227"><a href="#cb66-227" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb66-228"><a href="#cb66-228" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "The _tibble_ weather2 is now stored, but is wrongly formatted."</span></span>
<span id="cb66-229"><a href="#cb66-229" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-alt: Screenshot of the environment tab, which now also has weather2 which only has one variable</span></span>
<span id="cb66-230"><a href="#cb66-230" aria-hidden="true" tabindex="-1"></a><span class="co">#| out-width: "100%"</span></span>
<span id="cb66-231"><a href="#cb66-231" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"figures/csv-env2.png"</span>)</span>
<span id="cb66-232"><a href="#cb66-232" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-233"><a href="#cb66-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-234"><a href="#cb66-234" aria-hidden="true" tabindex="-1"></a>The content of the resulting tibble is as follows:</span>
<span id="cb66-235"><a href="#cb66-235" aria-hidden="true" tabindex="-1"></a><span class="in">```{r weather2, echo=TRUE} </span></span>
<span id="cb66-236"><a href="#cb66-236" aria-hidden="true" tabindex="-1"></a>weather2</span>
<span id="cb66-237"><a href="#cb66-237" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-238"><a href="#cb66-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-239"><a href="#cb66-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-240"><a href="#cb66-240" aria-hidden="true" tabindex="-1"></a>This shows how important it is to review the data before importing it. </span>
<span id="cb66-241"><a href="#cb66-241" aria-hidden="true" tabindex="-1"></a>A quick check with <span class="in">`read_lines('data/weather2.csv')`</span> would have revealed the use of <span class="in">`;`</span> as delimiter in <span class="in">`weather2.csv`</span>, and you would have certainly used the follow code to import it. </span>
<span id="cb66-242"><a href="#cb66-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-243"><a href="#cb66-243" aria-hidden="true" tabindex="-1"></a><span class="in">```{r delim-csv2bis, echo=TRUE} </span></span>
<span id="cb66-244"><a href="#cb66-244" aria-hidden="true" tabindex="-1"></a>weather2 <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="at">file =</span> <span class="st">"data/weather2.csv"</span>, </span>
<span id="cb66-245"><a href="#cb66-245" aria-hidden="true" tabindex="-1"></a>                       <span class="at">delim =</span> <span class="st">";"</span>)</span>
<span id="cb66-246"><a href="#cb66-246" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-247"><a href="#cb66-247" aria-hidden="true" tabindex="-1"></a>Here, the message <span class="in">`Column specification`</span> tells you that the content of the columns <span class="in">`month`</span> and <span class="in">`Wind (m/s)`</span> has been recognized as of data type <span class="in">`character`</span>, and that the two other columns have been recognized as <span class="in">`number`</span>. </span>
<span id="cb66-248"><a href="#cb66-248" aria-hidden="true" tabindex="-1"></a>While <span class="in">`read_delim()`</span> got things right about the number of variables, something went wrong with the variables as we could expect <span class="in">`Wind (m/s)`</span> to be recognized as <span class="in">`double`</span>.</span>
<span id="cb66-249"><a href="#cb66-249" aria-hidden="true" tabindex="-1"></a>To find out about this issue we need to review the imported data in the object <span class="in">`weather2`</span> and compare it to the original file <span class="in">`weather2.csv`</span>.</span>
<span id="cb66-250"><a href="#cb66-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-251"><a href="#cb66-251" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Review the imported data</span></span>
<span id="cb66-252"><a href="#cb66-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-253"><a href="#cb66-253" aria-hidden="true" tabindex="-1"></a>The example above shows the importance of carefully verifying that the imported data in R matches the original data set.</span>
<span id="cb66-254"><a href="#cb66-254" aria-hidden="true" tabindex="-1"></a>The following figure compares the content of the file <span class="in">`weather2.csv`</span> (@fig-comp-fig left) to the content of the object <span class="in">`weather2`</span> (@fig-comp-fig right):</span>
<span id="cb66-255"><a href="#cb66-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-256"><a href="#cb66-256" aria-hidden="true" tabindex="-1"></a><span class="in">``` {r}</span></span>
<span id="cb66-257"><a href="#cb66-257" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-comp-fig</span></span>
<span id="cb66-258"><a href="#cb66-258" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb66-259"><a href="#cb66-259" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "The data in the object does not match the data in the file." </span></span>
<span id="cb66-260"><a href="#cb66-260" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-alt: Screenshots of the original text file with decimals separated by commas and the imported object in R, mostly without decimal separators</span></span>
<span id="cb66-261"><a href="#cb66-261" aria-hidden="true" tabindex="-1"></a><span class="co">#| out-width: "100%"</span></span>
<span id="cb66-262"><a href="#cb66-262" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"figures/comp.png"</span>)</span>
<span id="cb66-263"><a href="#cb66-263" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-264"><a href="#cb66-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-265"><a href="#cb66-265" aria-hidden="true" tabindex="-1"></a>Looking at the rows in both pictures, one can understand that all commas have simply been ignored, excepted those in the last column.</span>
<span id="cb66-266"><a href="#cb66-266" aria-hidden="true" tabindex="-1"></a>This is a problem that may occur when the decimal separator used in the file is different from the decimal separator defined by your system (a.k.a locale).</span>
<span id="cb66-267"><a href="#cb66-267" aria-hidden="true" tabindex="-1"></a>To solve that issue, you must impose the separator using <span class="in">`locale = locale(decimal_mark = ",")`</span>:</span>
<span id="cb66-268"><a href="#cb66-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-269"><a href="#cb66-269" aria-hidden="true" tabindex="-1"></a><span class="in">```{r delim-csv2ter, echo=TRUE} </span></span>
<span id="cb66-270"><a href="#cb66-270" aria-hidden="true" tabindex="-1"></a>weather3 <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="at">file =</span> <span class="st">"data/weather2.csv"</span>, </span>
<span id="cb66-271"><a href="#cb66-271" aria-hidden="true" tabindex="-1"></a>                       <span class="at">delim =</span> <span class="st">";"</span>, </span>
<span id="cb66-272"><a href="#cb66-272" aria-hidden="true" tabindex="-1"></a>                       <span class="at">locale =</span> <span class="fu">locale</span>(<span class="at">decimal_mark =</span> <span class="st">","</span>))</span>
<span id="cb66-273"><a href="#cb66-273" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-274"><a href="#cb66-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-275"><a href="#cb66-275" aria-hidden="true" tabindex="-1"></a>The last column is now recognized as <span class="in">`double`</span> and the data in the object <span class="in">`weather3`</span> matches the data in the file:</span>
<span id="cb66-276"><a href="#cb66-276" aria-hidden="true" tabindex="-1"></a><span class="in">``` {r comp2, echo=FALSE, fig.cap="_The data in the object now matches the data in the file._", out.width="100%"}</span></span>
<span id="cb66-277"><a href="#cb66-277" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"figures/comp2.png"</span>)</span>
<span id="cb66-278"><a href="#cb66-278" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-279"><a href="#cb66-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-280"><a href="#cb66-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-281"><a href="#cb66-281" aria-hidden="true" tabindex="-1"></a><span class="fu">### read_csv()</span></span>
<span id="cb66-282"><a href="#cb66-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-283"><a href="#cb66-283" aria-hidden="true" tabindex="-1"></a>As we have seen in the section above, <span class="in">`read_delim()`</span> can read CSV files where <span class="in">`,`</span> and <span class="in">`;`</span> are used as delimiters.</span>
<span id="cb66-284"><a href="#cb66-284" aria-hidden="true" tabindex="-1"></a><span class="in">`readr`</span> also comes with other functions such as <span class="in">`read_csv()`</span> and its twin <span class="in">`read_csv2()`</span>.</span>
<span id="cb66-285"><a href="#cb66-285" aria-hidden="true" tabindex="-1"></a>These are "clones" of <span class="in">`read_delim()`</span> where the argument <span class="in">`delim =`</span> is preset to  <span class="in">`delim = ","`</span> and <span class="in">`delim = ";"`</span>, respectively. </span>
<span id="cb66-286"><a href="#cb66-286" aria-hidden="true" tabindex="-1"></a>Thus, the only argument that is strictly required is <span class="in">`file = " "`</span> to determine the path of the file.</span>
<span id="cb66-287"><a href="#cb66-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-288"><a href="#cb66-288" aria-hidden="true" tabindex="-1"></a>Here are two examples. The first one shows the use of <span class="in">`read_csv()`</span>:</span>
<span id="cb66-289"><a href="#cb66-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-290"><a href="#cb66-290" aria-hidden="true" tabindex="-1"></a><span class="in">```{r read-csv, echo=TRUE} </span></span>
<span id="cb66-291"><a href="#cb66-291" aria-hidden="true" tabindex="-1"></a>weather_csv <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"data/weather.csv"</span>)</span>
<span id="cb66-292"><a href="#cb66-292" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-293"><a href="#cb66-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-294"><a href="#cb66-294" aria-hidden="true" tabindex="-1"></a>The resulting tibble looks correct:</span>
<span id="cb66-295"><a href="#cb66-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-296"><a href="#cb66-296" aria-hidden="true" tabindex="-1"></a><span class="in">```{r read-csv-tibble, echo=TRUE} </span></span>
<span id="cb66-297"><a href="#cb66-297" aria-hidden="true" tabindex="-1"></a>weather_csv</span>
<span id="cb66-298"><a href="#cb66-298" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-299"><a href="#cb66-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-300"><a href="#cb66-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-301"><a href="#cb66-301" aria-hidden="true" tabindex="-1"></a>The second one shows the use of <span class="in">`read_csv2()`</span>:</span>
<span id="cb66-302"><a href="#cb66-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-303"><a href="#cb66-303" aria-hidden="true" tabindex="-1"></a><span class="in">```{r read-csv2, echo=TRUE} </span></span>
<span id="cb66-304"><a href="#cb66-304" aria-hidden="true" tabindex="-1"></a>weather_csv2 <span class="ot">&lt;-</span> <span class="fu">read_csv2</span>(<span class="at">file =</span> <span class="st">"data/weather2.csv"</span>)</span>
<span id="cb66-305"><a href="#cb66-305" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-306"><a href="#cb66-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-307"><a href="#cb66-307" aria-hidden="true" tabindex="-1"></a>Note the message above <span class="in">`Column specification`</span> that indicates which symbols <span class="in">`read_csv2()`</span> has considered when importing the data. The resulting tibble looks correct:</span>
<span id="cb66-308"><a href="#cb66-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-309"><a href="#cb66-309" aria-hidden="true" tabindex="-1"></a><span class="in">```{r read-csv-tibble2, echo=TRUE} </span></span>
<span id="cb66-310"><a href="#cb66-310" aria-hidden="true" tabindex="-1"></a>weather_csv2</span>
<span id="cb66-311"><a href="#cb66-311" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-312"><a href="#cb66-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-313"><a href="#cb66-313" aria-hidden="true" tabindex="-1"></a><span class="fu">### White space delimited files</span></span>
<span id="cb66-314"><a href="#cb66-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-315"><a href="#cb66-315" aria-hidden="true" tabindex="-1"></a>Some files have white space separating the columns. </span>
<span id="cb66-316"><a href="#cb66-316" aria-hidden="true" tabindex="-1"></a>If a single tab is used then <span class="in">`read_delim()`</span> will work with <span class="in">`delim = "\t"`</span>.</span>
<span id="cb66-317"><a href="#cb66-317" aria-hidden="true" tabindex="-1"></a>Sometimes multiple spaces are used so the columns line up, making the text file easy for humans to read.</span>
<span id="cb66-318"><a href="#cb66-318" aria-hidden="true" tabindex="-1"></a><span class="in">`read_delim()`</span> will not work with these files as it expects a single delimiter. </span>
<span id="cb66-319"><a href="#cb66-319" aria-hidden="true" tabindex="-1"></a>Instead we can use <span class="in">`read_table()`</span>.</span>
<span id="cb66-320"><a href="#cb66-320" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-323"><a href="#cb66-323" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb66-324"><a href="#cb66-324" aria-hidden="true" tabindex="-1"></a><span class="fu">read_table</span>(<span class="st">" Species   Value</span></span>
<span id="cb66-325"><a href="#cb66-325" aria-hidden="true" tabindex="-1"></a><span class="st">            Navicula       1</span></span>
<span id="cb66-326"><a href="#cb66-326" aria-hidden="true" tabindex="-1"></a><span class="st">            Cymbella       2"</span>)</span>
<span id="cb66-327"><a href="#cb66-327" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-328"><a href="#cb66-328" aria-hidden="true" tabindex="-1"></a>Another type of data you will sometimes see is the fixed width format.</span>
<span id="cb66-329"><a href="#cb66-329" aria-hidden="true" tabindex="-1"></a>There are no delimiters, but each field has the same position in each row. </span>
<span id="cb66-330"><a href="#cb66-330" aria-hidden="true" tabindex="-1"></a>These files can be imported with <span class="in">`read_fwf()`</span>.</span>
<span id="cb66-331"><a href="#cb66-331" aria-hidden="true" tabindex="-1"></a>Determining the position of each column can be painful unless you have good metadata.</span>
<span id="cb66-332"><a href="#cb66-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-333"><a href="#cb66-333" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb66-334"><a href="#cb66-334" aria-hidden="true" tabindex="-1"></a><span class="fu">## Exercise</span></span>
<span id="cb66-335"><a href="#cb66-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-336"><a href="#cb66-336" aria-hidden="true" tabindex="-1"></a>Download the Mt Gonga <span class="co">[</span><span class="ot">plant biomass data</span><span class="co">](https://raw.githubusercontent.com/biostats-r/biostats/main/WorkingInR/data/biomass2015_H.csv)</span> and import it.</span>
<span id="cb66-337"><a href="#cb66-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-338"><a href="#cb66-338" aria-hidden="true" tabindex="-1"></a> <span class="kw">&lt;details&gt;</span></span>
<span id="cb66-339"><a href="#cb66-339" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;summary&gt;</span>Hint<span class="kw">&lt;/summary&gt;</span></span>
<span id="cb66-340"><a href="#cb66-340" aria-hidden="true" tabindex="-1"></a><span class="in">`read_delim`</span></span>
<span id="cb66-341"><a href="#cb66-341" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/details&gt;</span> </span>
<span id="cb66-342"><a href="#cb66-342" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb66-343"><a href="#cb66-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-344"><a href="#cb66-344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-345"><a href="#cb66-345" aria-hidden="true" tabindex="-1"></a><span class="fu">### Useful arguments</span></span>
<span id="cb66-346"><a href="#cb66-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-347"><a href="#cb66-347" aria-hidden="true" tabindex="-1"></a><span class="in">`read_delim()`</span> and the other functions discussed above have a multitude of arguments that allow for adjusting the way data is read and displayed. </span>
<span id="cb66-348"><a href="#cb66-348" aria-hidden="true" tabindex="-1"></a>Here we review a handful of them.</span>
<span id="cb66-349"><a href="#cb66-349" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-350"><a href="#cb66-350" aria-hidden="true" tabindex="-1"></a><span class="fu">#### n_max</span></span>
<span id="cb66-351"><a href="#cb66-351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-352"><a href="#cb66-352" aria-hidden="true" tabindex="-1"></a><span class="in">`n_max`</span> sets a limit to the number of *observations* to be read.</span>
<span id="cb66-353"><a href="#cb66-353" aria-hidden="true" tabindex="-1"></a>Note that <span class="in">`n_max`</span> does not consider the first row (header) of the data file as an observation. </span>
<span id="cb66-354"><a href="#cb66-354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-355"><a href="#cb66-355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-356"><a href="#cb66-356" aria-hidden="true" tabindex="-1"></a><span class="in">```{r nmax, echo=TRUE} </span></span>
<span id="cb66-357"><a href="#cb66-357" aria-hidden="true" tabindex="-1"></a>weather <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="at">file =</span> <span class="st">"data/weather.csv"</span>, </span>
<span id="cb66-358"><a href="#cb66-358" aria-hidden="true" tabindex="-1"></a>                      <span class="at">delim =</span> <span class="st">","</span>,</span>
<span id="cb66-359"><a href="#cb66-359" aria-hidden="true" tabindex="-1"></a>                      <span class="at">n_max =</span> <span class="dv">6</span>)</span>
<span id="cb66-360"><a href="#cb66-360" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-361"><a href="#cb66-361" aria-hidden="true" tabindex="-1"></a><span class="in">```{r nmax2, echo=TRUE} </span></span>
<span id="cb66-362"><a href="#cb66-362" aria-hidden="true" tabindex="-1"></a>weather</span>
<span id="cb66-363"><a href="#cb66-363" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-364"><a href="#cb66-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-365"><a href="#cb66-365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-366"><a href="#cb66-366" aria-hidden="true" tabindex="-1"></a><span class="fu">#### skip</span></span>
<span id="cb66-367"><a href="#cb66-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-368"><a href="#cb66-368" aria-hidden="true" tabindex="-1"></a>The argument <span class="in">`skip`</span> may be used to skip rows when reading the data file.  </span>
<span id="cb66-369"><a href="#cb66-369" aria-hidden="true" tabindex="-1"></a>Be aware that:</span>
<span id="cb66-370"><a href="#cb66-370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-371"><a href="#cb66-371" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span>the header in the original data file counts as one row,</span>
<span id="cb66-372"><a href="#cb66-372" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span>the first row that comes after those which have been skipped becomes the header for the resulting tibble.</span>
<span id="cb66-373"><a href="#cb66-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-374"><a href="#cb66-374" aria-hidden="true" tabindex="-1"></a>In the following example, we read the data file <span class="in">`weather.csv`</span> and skip the first row:</span>
<span id="cb66-375"><a href="#cb66-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-376"><a href="#cb66-376" aria-hidden="true" tabindex="-1"></a><span class="in">```{r skip, echo=TRUE} </span></span>
<span id="cb66-377"><a href="#cb66-377" aria-hidden="true" tabindex="-1"></a>weather <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="at">file =</span> <span class="st">"data/weather.csv"</span>, </span>
<span id="cb66-378"><a href="#cb66-378" aria-hidden="true" tabindex="-1"></a>                      <span class="at">delim =</span> <span class="st">","</span>, </span>
<span id="cb66-379"><a href="#cb66-379" aria-hidden="true" tabindex="-1"></a>                      <span class="at">skip =</span> <span class="dv">1</span>)</span>
<span id="cb66-380"><a href="#cb66-380" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-381"><a href="#cb66-381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-382"><a href="#cb66-382" aria-hidden="true" tabindex="-1"></a><span class="in">```{r skip2, echo=TRUE} </span></span>
<span id="cb66-383"><a href="#cb66-383" aria-hidden="true" tabindex="-1"></a>weather</span>
<span id="cb66-384"><a href="#cb66-384" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-385"><a href="#cb66-385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-386"><a href="#cb66-386" aria-hidden="true" tabindex="-1"></a>As expected, the first row (with the header) is skipped, and the data from the observation <span class="in">`January`</span> have become the header of the tibble.</span>
<span id="cb66-387"><a href="#cb66-387" aria-hidden="true" tabindex="-1"></a>The argument <span class="in">`col_names()`</span> introduced below will be useful for solving this issue.</span>
<span id="cb66-388"><a href="#cb66-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-389"><a href="#cb66-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-390"><a href="#cb66-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-391"><a href="#cb66-391" aria-hidden="true" tabindex="-1"></a><span class="fu">#### col_names</span></span>
<span id="cb66-392"><a href="#cb66-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-393"><a href="#cb66-393" aria-hidden="true" tabindex="-1"></a>The argument <span class="in">`col_names`</span> may be used to define the name of the variables/columns of the tibble.</span>
<span id="cb66-394"><a href="#cb66-394" aria-hidden="true" tabindex="-1"></a>If you use <span class="in">`col_names = TRUE`</span>, the first row of the data file defines the name of the variables. </span>
<span id="cb66-395"><a href="#cb66-395" aria-hidden="true" tabindex="-1"></a><span class="in">```{r col-namesT, echo=TRUE} </span></span>
<span id="cb66-396"><a href="#cb66-396" aria-hidden="true" tabindex="-1"></a>weather <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="at">file =</span> <span class="st">"data/weather.csv"</span>, </span>
<span id="cb66-397"><a href="#cb66-397" aria-hidden="true" tabindex="-1"></a>                      <span class="at">delim =</span> <span class="st">","</span>, </span>
<span id="cb66-398"><a href="#cb66-398" aria-hidden="true" tabindex="-1"></a>                      <span class="at">col_names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb66-399"><a href="#cb66-399" aria-hidden="true" tabindex="-1"></a>weather</span>
<span id="cb66-400"><a href="#cb66-400" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-401"><a href="#cb66-401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-402"><a href="#cb66-402" aria-hidden="true" tabindex="-1"></a>If you use <span class="in">`col_names = FALSE`</span>, the first row of the data file will be the first observation in the resulting tibble, and the variables will be named <span class="in">`X1`</span>, <span class="in">`X2`</span>, etc.</span>
<span id="cb66-403"><a href="#cb66-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-404"><a href="#cb66-404" aria-hidden="true" tabindex="-1"></a><span class="in">```{r col-namesF, echo=TRUE} </span></span>
<span id="cb66-405"><a href="#cb66-405" aria-hidden="true" tabindex="-1"></a>weather <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="at">file =</span> <span class="st">"data/weather.csv"</span>, </span>
<span id="cb66-406"><a href="#cb66-406" aria-hidden="true" tabindex="-1"></a>                      <span class="at">delim =</span> <span class="st">","</span>, </span>
<span id="cb66-407"><a href="#cb66-407" aria-hidden="true" tabindex="-1"></a>                      <span class="at">col_names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb66-408"><a href="#cb66-408" aria-hidden="true" tabindex="-1"></a>weather</span>
<span id="cb66-409"><a href="#cb66-409" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-410"><a href="#cb66-410" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-411"><a href="#cb66-411" aria-hidden="true" tabindex="-1"></a><span class="in">`col_names =`</span> may also be followed by the actual variable names that you want to use.</span>
<span id="cb66-412"><a href="#cb66-412" aria-hidden="true" tabindex="-1"></a>In that case, write <span class="in">`col_names = c()`</span> and list the names between the parentheses.</span>
<span id="cb66-413"><a href="#cb66-413" aria-hidden="true" tabindex="-1"></a>Be aware that:</span>
<span id="cb66-414"><a href="#cb66-414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-415"><a href="#cb66-415" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span>the names that you input will be placed on top of the tibble,</span>
<span id="cb66-416"><a href="#cb66-416" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span>the header in the original data file will become the first row of the resulting tibble.</span>
<span id="cb66-417"><a href="#cb66-417" aria-hidden="true" tabindex="-1"></a>Here is an example:</span>
<span id="cb66-418"><a href="#cb66-418" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-419"><a href="#cb66-419" aria-hidden="true" tabindex="-1"></a><span class="in">```{r col-names, echo=TRUE} </span></span>
<span id="cb66-420"><a href="#cb66-420" aria-hidden="true" tabindex="-1"></a>weather <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="at">file =</span> <span class="st">"data/weather.csv"</span>, </span>
<span id="cb66-421"><a href="#cb66-421" aria-hidden="true" tabindex="-1"></a>                      <span class="at">delim =</span> <span class="st">","</span>, </span>
<span id="cb66-422"><a href="#cb66-422" aria-hidden="true" tabindex="-1"></a>                      <span class="at">col_names =</span> <span class="fu">c</span>(<span class="st">"Month"</span>, <span class="st">"Temp"</span>, <span class="st">"Precip"</span>, <span class="st">"Wind"</span>))</span>
<span id="cb66-423"><a href="#cb66-423" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-424"><a href="#cb66-424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-425"><a href="#cb66-425" aria-hidden="true" tabindex="-1"></a><span class="in">```{r col-names2, echo=TRUE} </span></span>
<span id="cb66-426"><a href="#cb66-426" aria-hidden="true" tabindex="-1"></a>weather</span>
<span id="cb66-427"><a href="#cb66-427" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-428"><a href="#cb66-428" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-429"><a href="#cb66-429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-430"><a href="#cb66-430" aria-hidden="true" tabindex="-1"></a><span class="fu">#### col_types </span></span>
<span id="cb66-431"><a href="#cb66-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-432"><a href="#cb66-432" aria-hidden="true" tabindex="-1"></a>The argument <span class="in">`col_types`</span> may be used to modify the data type of the variables.</span>
<span id="cb66-433"><a href="#cb66-433" aria-hidden="true" tabindex="-1"></a>This is useful for example when you need to set a variable as <span class="in">`factor`</span> whereas R has defined it as <span class="in">`character`</span>.</span>
<span id="cb66-434"><a href="#cb66-434" aria-hidden="true" tabindex="-1"></a>Here is an example with three simple variables.</span>
<span id="cb66-435"><a href="#cb66-435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-436"><a href="#cb66-436" aria-hidden="true" tabindex="-1"></a><span class="in">```{r col-types, echo=TRUE} </span></span>
<span id="cb66-437"><a href="#cb66-437" aria-hidden="true" tabindex="-1"></a>counts <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="at">file =</span> <span class="st">"data/groups.csv"</span>, </span>
<span id="cb66-438"><a href="#cb66-438" aria-hidden="true" tabindex="-1"></a>                     <span class="at">delim =</span> <span class="st">","</span>)</span>
<span id="cb66-439"><a href="#cb66-439" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-440"><a href="#cb66-440" aria-hidden="true" tabindex="-1"></a>As the message clearly indicates, the first and last variables are recognized as <span class="in">`double`</span> (i.e. <span class="in">`numeric`</span>) while the second one is recognized as <span class="in">`character`</span>. </span>
<span id="cb66-441"><a href="#cb66-441" aria-hidden="true" tabindex="-1"></a>The tibble in the object <span class="in">`counts`</span> displays as follows:</span>
<span id="cb66-442"><a href="#cb66-442" aria-hidden="true" tabindex="-1"></a><span class="in">```{r col-types2, echo=TRUE} </span></span>
<span id="cb66-443"><a href="#cb66-443" aria-hidden="true" tabindex="-1"></a>counts</span>
<span id="cb66-444"><a href="#cb66-444" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-445"><a href="#cb66-445" aria-hidden="true" tabindex="-1"></a>Let's use <span class="in">`col_types = cols()`</span> to manually set the data types to <span class="in">`double`</span>, <span class="in">`factor`</span> and <span class="in">`integer`</span>, respectively.</span>
<span id="cb66-446"><a href="#cb66-446" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-447"><a href="#cb66-447" aria-hidden="true" tabindex="-1"></a><span class="in">```{r col-types3, echo=TRUE} </span></span>
<span id="cb66-448"><a href="#cb66-448" aria-hidden="true" tabindex="-1"></a>counts <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="at">file =</span> <span class="st">"data/groups.csv"</span>, </span>
<span id="cb66-449"><a href="#cb66-449" aria-hidden="true" tabindex="-1"></a>                     <span class="at">delim =</span> <span class="st">","</span>, </span>
<span id="cb66-450"><a href="#cb66-450" aria-hidden="true" tabindex="-1"></a>                     <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="fu">col_double</span>(), <span class="fu">col_factor</span>(), <span class="fu">col_integer</span>()))</span>
<span id="cb66-451"><a href="#cb66-451" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-452"><a href="#cb66-452" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-453"><a href="#cb66-453" aria-hidden="true" tabindex="-1"></a>Now the tibble displays like this, with the correct data types for each column:</span>
<span id="cb66-454"><a href="#cb66-454" aria-hidden="true" tabindex="-1"></a><span class="in">```{r col-types4, echo=TRUE} </span></span>
<span id="cb66-455"><a href="#cb66-455" aria-hidden="true" tabindex="-1"></a>counts</span>
<span id="cb66-456"><a href="#cb66-456" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-457"><a href="#cb66-457" aria-hidden="true" tabindex="-1"></a>If you only need to modify one or a few variables, you must name it/them when writing the code:</span>
<span id="cb66-458"><a href="#cb66-458" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-459"><a href="#cb66-459" aria-hidden="true" tabindex="-1"></a><span class="in">```{r col-types5, echo=TRUE} </span></span>
<span id="cb66-460"><a href="#cb66-460" aria-hidden="true" tabindex="-1"></a>counts <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="at">file =</span> <span class="st">"data/groups.csv"</span>, </span>
<span id="cb66-461"><a href="#cb66-461" aria-hidden="true" tabindex="-1"></a>                     <span class="at">delim =</span> <span class="st">","</span>, </span>
<span id="cb66-462"><a href="#cb66-462" aria-hidden="true" tabindex="-1"></a>                     <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">group =</span> <span class="fu">col_factor</span>()))</span>
<span id="cb66-463"><a href="#cb66-463" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-464"><a href="#cb66-464" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-465"><a href="#cb66-465" aria-hidden="true" tabindex="-1"></a>The tibble displays like this:</span>
<span id="cb66-466"><a href="#cb66-466" aria-hidden="true" tabindex="-1"></a><span class="in">```{r col-types6, echo=TRUE} </span></span>
<span id="cb66-467"><a href="#cb66-467" aria-hidden="true" tabindex="-1"></a>counts</span>
<span id="cb66-468"><a href="#cb66-468" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-469"><a href="#cb66-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-470"><a href="#cb66-470" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-471"><a href="#cb66-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-472"><a href="#cb66-472" aria-hidden="true" tabindex="-1"></a>Note that <span class="in">`col_types`</span> is particularly useful when importing tabular data that includes formatted dates.</span>
<span id="cb66-473"><a href="#cb66-473" aria-hidden="true" tabindex="-1"></a>Dates are usually recognized as <span class="in">`character`</span> when their format does not match the expected format set as default (locale, etc).</span>
<span id="cb66-474"><a href="#cb66-474" aria-hidden="true" tabindex="-1"></a>In the following example, dates entered  as <span class="in">`yyyy-mm-dd`</span> in the last column are recognized as of type <span class="in">`date`</span>:</span>
<span id="cb66-475"><a href="#cb66-475" aria-hidden="true" tabindex="-1"></a><span class="in">```{r col-types-dates1, echo=TRUE} </span></span>
<span id="cb66-476"><a href="#cb66-476" aria-hidden="true" tabindex="-1"></a>countsdates <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="at">file =</span> <span class="st">"data/groups-dates1.csv"</span>, </span>
<span id="cb66-477"><a href="#cb66-477" aria-hidden="true" tabindex="-1"></a>                     <span class="at">delim =</span> <span class="st">","</span>)</span>
<span id="cb66-478"><a href="#cb66-478" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-479"><a href="#cb66-479" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-480"><a href="#cb66-480" aria-hidden="true" tabindex="-1"></a>However, in the example below, dates entered as <span class="in">`dd-mm-yyyy`</span> are converted to <span class="in">`character`</span>:</span>
<span id="cb66-481"><a href="#cb66-481" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-482"><a href="#cb66-482" aria-hidden="true" tabindex="-1"></a><span class="in">```{r col-types-dates2, echo=TRUE} </span></span>
<span id="cb66-483"><a href="#cb66-483" aria-hidden="true" tabindex="-1"></a>countsdates <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="at">file =</span> <span class="st">"data/groups-dates2.csv"</span>, </span>
<span id="cb66-484"><a href="#cb66-484" aria-hidden="true" tabindex="-1"></a>                     <span class="at">delim =</span> <span class="st">","</span>)</span>
<span id="cb66-485"><a href="#cb66-485" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-486"><a href="#cb66-486" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-487"><a href="#cb66-487" aria-hidden="true" tabindex="-1"></a>To solve this issue, add the function <span class="in">`col_date()`</span> in <span class="in">`cols()`</span> to help R understand how dates are formatted and shall be read.</span>
<span id="cb66-488"><a href="#cb66-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-489"><a href="#cb66-489" aria-hidden="true" tabindex="-1"></a><span class="in">```{r col-types-dates3, echo=TRUE} </span></span>
<span id="cb66-490"><a href="#cb66-490" aria-hidden="true" tabindex="-1"></a>countsdates <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="at">file =</span> <span class="st">"data/groups-dates2.csv"</span>, </span>
<span id="cb66-491"><a href="#cb66-491" aria-hidden="true" tabindex="-1"></a>                     <span class="at">delim =</span> <span class="st">","</span>,</span>
<span id="cb66-492"><a href="#cb66-492" aria-hidden="true" tabindex="-1"></a>                     <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">date =</span> <span class="fu">col_date</span>(<span class="st">"%d-%m-%Y"</span>)))</span>
<span id="cb66-493"><a href="#cb66-493" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-494"><a href="#cb66-494" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-495"><a href="#cb66-495" aria-hidden="true" tabindex="-1"></a>The result is the following tibble now correctly formatted:</span>
<span id="cb66-496"><a href="#cb66-496" aria-hidden="true" tabindex="-1"></a><span class="in">```{r col-types-dates4, echo=TRUE} </span></span>
<span id="cb66-497"><a href="#cb66-497" aria-hidden="true" tabindex="-1"></a>countsdates </span>
<span id="cb66-498"><a href="#cb66-498" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb66-499"><a href="#cb66-499" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-500"><a href="#cb66-500" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-501"><a href="#cb66-501" aria-hidden="true" tabindex="-1"></a>You will find the whole list of <span class="in">`cols()`</span> parameters for <span class="in">`col_types`</span>  <span class="co">[</span><span class="ot">here</span><span class="co">](https://readr.tidyverse.org/reference/cols.html)</span>{target="_blank"}.  </span>
<span id="cb66-502"><a href="#cb66-502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-503"><a href="#cb66-503" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb66-504"><a href="#cb66-504" aria-hidden="true" tabindex="-1"></a><span class="fu">## Exercise</span></span>
<span id="cb66-505"><a href="#cb66-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-506"><a href="#cb66-506" aria-hidden="true" tabindex="-1"></a>Download the midge data from <span class="co">[</span><span class="ot">https://www.ncei.noaa.gov/pub/data/paleo/insecta/chironomidae/northamerica/usa/alaska/alaska2011midge-t.txt</span><span class="co">](https://www.ncei.noaa.gov/pub/data/paleo/insecta/chironomidae/northamerica/usa/alaska/alaska2011midge-t.txt)</span> and import part "3a. Clegg et al. 2011 Hudson Lake Midge Temperature Data"</span>
<span id="cb66-507"><a href="#cb66-507" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-508"><a href="#cb66-508" aria-hidden="true" tabindex="-1"></a> <span class="kw">&lt;details&gt;</span></span>
<span id="cb66-509"><a href="#cb66-509" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;summary&gt;</span>Hint<span class="kw">&lt;/summary&gt;</span></span>
<span id="cb66-510"><a href="#cb66-510" aria-hidden="true" tabindex="-1"></a>What is the delimiter? </span>
<span id="cb66-511"><a href="#cb66-511" aria-hidden="true" tabindex="-1"></a>Choose an suitable <span class="in">`read_*()`</span> function</span>
<span id="cb66-512"><a href="#cb66-512" aria-hidden="true" tabindex="-1"></a><span class="in">`skip`</span> and </span>
<span id="cb66-513"><a href="#cb66-513" aria-hidden="true" tabindex="-1"></a><span class="in">`n_max`</span> argument can be useful.</span>
<span id="cb66-514"><a href="#cb66-514" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/details&gt;</span> </span>
<span id="cb66-515"><a href="#cb66-515" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb66-516"><a href="#cb66-516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-517"><a href="#cb66-517" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb66-518"><a href="#cb66-518" aria-hidden="true" tabindex="-1"></a><span class="fu">## Further Reading</span></span>
<span id="cb66-519"><a href="#cb66-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-520"><a href="#cb66-520" aria-hidden="true" tabindex="-1"></a>You may find the following links useful:</span>
<span id="cb66-521"><a href="#cb66-521" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-522"><a href="#cb66-522" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span><span class="co">[</span><span class="ot">R for Data Science - Data import</span><span class="co">](https://r4ds.had.co.nz/data-import.html)</span>{target="_blank"}</span>
<span id="cb66-523"><a href="#cb66-523" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span><span class="co">[</span><span class="ot">Data Import Cheatsheet - readr/tidyr</span><span class="co">](https://github.com/rstudio/cheatsheets/raw/master/data-import.pdf)</span>{target="_blank"}</span>
<span id="cb66-524"><a href="#cb66-524" aria-hidden="true" tabindex="-1"></a><span class="ss">+ </span><span class="co">[</span><span class="ot">readr</span><span class="co">](https://readr.tidyverse.org/)</span>{target="_blank"}</span>
<span id="cb66-525"><a href="#cb66-525" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb66-526"><a href="#cb66-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-527"><a href="#cb66-527" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-528"><a href="#cb66-528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-529"><a href="#cb66-529" aria-hidden="true" tabindex="-1"></a>::: {.column-margin}</span>
<span id="cb66-530"><a href="#cb66-530" aria-hidden="true" tabindex="-1"></a><span class="fu">### Contributors {.unlisted .unnumbered}</span></span>
<span id="cb66-531"><a href="#cb66-531" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-532"><a href="#cb66-532" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Jonathan Soulé</span>
<span id="cb66-533"><a href="#cb66-533" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Aud Halbritter</span>
<span id="cb66-534"><a href="#cb66-534" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Richard Telford</span>
<span id="cb66-535"><a href="#cb66-535" aria-hidden="true" tabindex="-1"></a>:::</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>
