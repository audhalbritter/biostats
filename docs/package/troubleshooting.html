<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>7 Troubleshooting | Writing an R package</title>
<meta name="author" content="Richard J Telford">
<meta name="generator" content="bookdown 0.23 with bs4_book()">
<meta property="og:title" content="7 Troubleshooting | Writing an R package">
<meta property="og:type" content="book">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="7 Troubleshooting | Writing an R package">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.10/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.5.1/tabs.js"></script><script src="libs/bs3compat-0.2.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="css/style-chapters.css">
<meta name="description" content="These are some errors, warnings and notes you might find with check and how to fix them.  7.1 Warning ‘library’ or ‘require’ call &gt; checking dependencies in R code ... WARNING  'library' or...">
<meta property="og:description" content="These are some errors, warnings and notes you might find with check and how to fix them.  7.1 Warning ‘library’ or ‘require’ call &gt; checking dependencies in R code ... WARNING  'library' or...">
<meta name="twitter:description" content="These are some errors, warnings and notes you might find with check and how to fix them.  7.1 Warning ‘library’ or ‘require’ call &gt; checking dependencies in R code ... WARNING  'library' or...">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Writing an R package</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Introduction</a></li>
<li><a class="" href="system-setup.html"><span class="header-section-number">2</span> System setup</a></li>
<li><a class="" href="creating-the-package-infrastructure.html"><span class="header-section-number">3</span> Creating the package infrastructure</a></li>
<li><a class="" href="contents.html"><span class="header-section-number">4</span> Contents</a></li>
<li><a class="" href="more-documentation.html"><span class="header-section-number">5</span> More documentation</a></li>
<li><a class="" href="distributing-your-package.html"><span class="header-section-number">6</span> Distributing your package</a></li>
<li><a class="active" href="troubleshooting.html"><span class="header-section-number">7</span> Troubleshooting</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="troubleshooting" class="section level1" number="7">
<h1>
<span class="header-section-number">7</span> Troubleshooting<a class="anchor" aria-label="anchor" href="#troubleshooting"><i class="fas fa-link"></i></a>
</h1>
<p>These are some errors, warnings and notes you might find with check and how to fix them.</p>
<div id="warning-library-or-require-call" class="section level2" number="7.1">
<h2>
<span class="header-section-number">7.1</span> Warning ‘library’ or ‘require’ call<a class="anchor" aria-label="anchor" href="#warning-library-or-require-call"><i class="fas fa-link"></i></a>
</h2>
<pre><code>&gt; checking dependencies in R code ... WARNING
  'library' or 'require' call not declared from: ‘dplyr’
  'library' or 'require' call to ‘dplyr’ in package code.
    Please use :: or requireNamespace() instead.
    See section 'Suggested packages' in the 'Writing R Extensions' manual.</code></pre>
<p>Diagnosis: you have a <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> call in one of your functions.</p>
<p>Solution: see section <a href="contents.html#importing-and-exporting-functions">4.4.1</a>) for how to import functions correctly.</p>
</div>
<div id="note-no-visible-global-function-definition" class="section level2" number="7.2">
<h2>
<span class="header-section-number">7.2</span> Note no visible global function definition<a class="anchor" aria-label="anchor" href="#note-no-visible-global-function-definition"><i class="fas fa-link"></i></a>
</h2>
<pre><code>  my_function: no visible global function definition for
    ‘rnorm’
  Undefined global functions or variables:
    rnorm
  Consider adding
    importFrom("stats", "rnorm")
  to your NAMESPACE file.</code></pre>
<p>Diagnosis: you have used a function from another package other than <code>base</code> in function <code>my_function</code> without importing it.</p>
<p>Solution: see section <a href="contents.html#importing-and-exporting-functions">4.4.1</a>) for how to import functions correctly.</p>
</div>
<div id="error-invalid-namespace-file" class="section level2" number="7.3">
<h2>
<span class="header-section-number">7.3</span> Error Invalid NAMESPACE file<a class="anchor" aria-label="anchor" href="#error-invalid-namespace-file"><i class="fas fa-link"></i></a>
</h2>
<pre><code>&gt; checking package namespace information ... ERROR
  Invalid NAMESPACE file, parsing gives:
  Error in asChar(ivars): empty name in directive 'importFrom' in 'NAMESPACE' file
  
  See section ‘Package namespaces’ in the ‘Writing R Extensions’ manual.</code></pre>
<p>Diagnosis: A package has been imported with <code>@import</code> or <code>@importFrom</code> in roxygen comments but not added to the DESCRIPTION file.</p>
<p>Solution: Delete the malformed NAMESPACE file.
Then add the missing package to the DESCRIPTION file with <code><a href="https://usethis.r-lib.org/reference/use_package.html">use_package()</a></code> (see section (importing-and-exporting-functions))</p>
</div>
<div id="note-no-visible-binding-for-global-variable" class="section level2" number="7.4">
<h2>
<span class="header-section-number">7.4</span> Note no visible binding for global variable<a class="anchor" aria-label="anchor" href="#note-no-visible-binding-for-global-variable"><i class="fas fa-link"></i></a>
</h2>
<pre><code>&gt; checking R code for possible problems ... NOTE
  my_function: no visible binding for global variable
    ‘species’
  Undefined global functions or variables:
     species</code></pre>
<p>Diagnosis: You are probably using dplyr, ggplot2 or related packages.</p>
<p>Solution: Use the <code>.data</code> pronoun or declare global variables (see section (using-dplyr-ggplot2-etc)).</p>
</div>
<div id="note-non-standard-filedirectory-found-at-top-level" class="section level2" number="7.5">
<h2>
<span class="header-section-number">7.5</span> NOTE Non-standard file/directory found at top level<a class="anchor" aria-label="anchor" href="#note-non-standard-filedirectory-found-at-top-level"><i class="fas fa-link"></i></a>
</h2>
<pre><code>&gt; checking top-level files ... NOTE
  Non-standard file/directory found at top level:
    ‘extra.R’</code></pre>
<p>Diagnosis: You have an unexpected file in the package’s root directory.</p>
<p>Solution: Add this file to <code>.Rbuildignore</code>, or move it to a more appropriate place, perhaps <code>inst/</code>.</p>
<div id="further-reading" class="section level3 unnumbered facta toc-ignore">
<h3>Further reading<a class="anchor" aria-label="anchor" href="#further-reading"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Wickham, H. and Bryan, J. <a href="https://r-pkgs.org/">R Packages</a>
</li>
<li>Wickham, H. <a href="https://adv-r.hadley.nz/">Advanced R</a>
</li>
<li>
<a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html">Writing R Extensions</a> Official documentation from CRAN.</li>
</ul>
</div>
<div id="contributors" class="section level3 unnumbered contributors toc-ignore">
<h3>Contributors<a class="anchor" aria-label="anchor" href="#contributors"><i class="fas fa-link"></i></a>
</h3>
<p>Richard J. Telford</p>

</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="distributing-your-package.html"><span class="header-section-number">6</span> Distributing your package</a></div>
<div class="empty"></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#troubleshooting"><span class="header-section-number">7</span> Troubleshooting</a></li>
<li><a class="nav-link" href="#warning-library-or-require-call"><span class="header-section-number">7.1</span> Warning ‘library’ or ‘require’ call</a></li>
<li><a class="nav-link" href="#note-no-visible-global-function-definition"><span class="header-section-number">7.2</span> Note no visible global function definition</a></li>
<li><a class="nav-link" href="#error-invalid-namespace-file"><span class="header-section-number">7.3</span> Error Invalid NAMESPACE file</a></li>
<li><a class="nav-link" href="#note-no-visible-binding-for-global-variable"><span class="header-section-number">7.4</span> Note no visible binding for global variable</a></li>
<li>
<a class="nav-link" href="#note-non-standard-filedirectory-found-at-top-level"><span class="header-section-number">7.5</span> NOTE Non-standard file/directory found at top level</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#further-reading">Further reading</a></li>
<li><a class="nav-link" href="#contributors">Contributors</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Writing an R package</strong>" was written by Richard J Telford. It was last built on 2021-08-30.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
